<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Mark Elixir</title>
            <style>/*!
  Theme: Default
  Description: Original highlight.js style
  Author: (c) Ivan Sagalaev <maniac@softwaremaniacs.org>
  Maintainer: @highlightjs/core-team
  Website: https://highlightjs.org/
  License: see project LICENSE
  Touched: 2021
*/pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{background:#f3f3f3;color:#444}.hljs-comment{color:#697070}.hljs-punctuation,.hljs-tag{color:#444a}.hljs-tag .hljs-attr,.hljs-tag .hljs-name{color:#444}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-name,.hljs-selector-tag{font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#800}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-link,.hljs-operator,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#ab5656}.hljs-literal{color:#695}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code{color:#397300}.hljs-meta{color:#1f7199}.hljs-meta .hljs-string{color:#38a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style>
            <style>/* test tailwind compatibility */
*,
::before,
::after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
  border-color: #e5e7eb;
}
body {
  padding: 0;
  margin: 0;
}
#map {
  height: 100vh;
  width: 100vw;
}
me-main > me-wrapper {
  margin: 10px !important;
}

.map-canvas img {
  display: block;
  object-fit: contain;
}

.map-container me-tpc > * {
  pointer-events: all !important;
}

.map-canvas h1,
.map-canvas h2,
.map-canvas h3,
.map-canvas h4,
.map-canvas h5,
.map-canvas h6,
.map-canvas p {
  margin: 0;
}
</style>
        </head>
        <body>
            <div id="map"></div>
            <script>
              window.injectedData = {"nodeData":{"topic":"cmsplan6.md","id":"root","children":[{"children":[],"dangerouslySetInnerHTML":"<p>ZacznÄ™ od przeczytania zasobÃ³w, audytu i dostarczenia kompletnego projektu. PrzeprowadzÄ™ to systematycznie.</p>","id":"0"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p>Analiza obecnego stanu + kompletny projekt rozbudowy dla socjologa-edytora.</p>","id":"182"},{"children":[],"dangerouslySetInnerHTML":"<hr>","id":"259"}],"dangerouslySetInnerHTML":"<h2>Krok 1: Analiza materiaÅ‚Ã³w ÅºrÃ³dÅ‚owych## AUDYT I PROJEKT CMS + WEBAPP</h2>","id":"109"},{"children":[{"children":[{"children":[{"dangerouslySetInnerHTML":"<p>Backend: Node.js/TypeScript + Express + Drizzle ORM + MySQL</p>","id":"339"},{"dangerouslySetInnerHTML":"<p>Modele: Workshop, Enrollment, User, Session, Tag, Location</p>","id":"401"},{"dangerouslySetInnerHTML":"<p>Brak: Questionnaire, Question, Response, Analysis</p>","id":"462"}],"dangerouslySetInnerHTML":"<p><strong>Stan obecny:</strong></p>","id":"320"},{"children":[{"dangerouslySetInnerHTML":"<p>Zero struktury kwestionariuszy (brak modeli, brak UI)</p>","id":"525"},{"dangerouslySetInnerHTML":"<p>Brak warstwy LLM/analizy odpowiedzi</p>","id":"581"},{"dangerouslySetInnerHTML":"<p>Brak zarzÄ…dzania zgodami GDPR dla przetwarzania przez AI</p>","id":"619"},{"dangerouslySetInnerHTML":"<p>Brak wersjonowania treÅ›ci (draftâ†’previewâ†’publish bez historii)</p>","id":"678"}],"dangerouslySetInnerHTML":"<p><strong>Luki:</strong></p>","id":"513"}],"dangerouslySetInnerHTML":"<h3>1.1 Architektura informacji</h3>","id":"287"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>IstniejÄ…ce:</strong></p>","id":"773"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>Uczestnik â†’ przeglÄ…danie â†’ zapis â†’ udziaÅ‚\nFacylitator â†’ prowadzenie wÅ‚asnych warsztatÃ³w\nSocjolog-Editor â†’ tworzenie warsztatu z szablonu (&#x3C;10min)\n</code></pre>","id":"789"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>BrakujÄ…ce:</strong></p>","id":"944"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>Socjolog-Editor â†’ tworzenie kwestionariusza z PDF â†’ publikacja\nUczestnik â†’ wypeÅ‚nianie kwestionariusza â†’ zapis odpowiedzi\nSystem â†’ zbieranie odpowiedzi â†’ anonimizacja â†’ LLM analiza â†’ raport\n</code></pre>","id":"959"}],"dangerouslySetInnerHTML":"<h3>1.2 PrzepÅ‚ywy uÅ¼ytkownika</h3>","id":"742"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<table>\n<thead>\n<tr>\n<th>Typ</th>\n<th>Status</th>\n<th>Uwagi</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Workshop</td>\n<td>âœ…</td>\n<td>Kompletny</td>\n</tr>\n<tr>\n<td>Session</td>\n<td>âœ…</td>\n<td>ModuÅ‚y warsztatu</td>\n</tr>\n<tr>\n<td>Enrollment</td>\n<td>âœ…</td>\n<td>Zapisy i lista rezerwowa</td>\n</tr>\n<tr>\n<td>Tag/Category</td>\n<td>âœ…</td>\n<td>Taksonomia</td>\n</tr>\n<tr>\n<td><strong>Questionnaire</strong></td>\n<td>âŒ</td>\n<td><strong>Brak caÅ‚kowicie</strong></td>\n</tr>\n<tr>\n<td><strong>QuestionGroup</strong></td>\n<td>âŒ</td>\n<td><strong>Sekcje z PDF</strong></td>\n</tr>\n<tr>\n<td><strong>Question</strong></td>\n<td>âŒ</td>\n<td><strong>Pytania z typami</strong></td>\n</tr>\n<tr>\n<td><strong>Response</strong></td>\n<td>âŒ</td>\n<td><strong>Odpowiedzi uÅ¼ytkownikÃ³w</strong></td>\n</tr>\n<tr>\n<td><strong>LLMAnalysis</strong></td>\n<td>âŒ</td>\n<td><strong>Agregacje i insighty</strong></td>\n</tr>\n<tr>\n<td><strong>Consent</strong></td>\n<td>âŒ</td>\n<td><strong>GDPR dla AI</strong></td>\n</tr>\n</tbody>\n</table>","id":"1200"}],"dangerouslySetInnerHTML":"<h3>1.3 Typy treÅ›ci (obecne vs docelowe)</h3>","id":"1158"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Workshop workflow (OK):</strong></p>","id":"1701"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-mermaid\">graph LR\n    A[draft] --> B[preview]\n    B --> C[published]\n    C --> D[archived]\n    B -.revert.-> A\n</code></pre>","id":"1729"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Questionnaire workflow (DO ZBUDOWANIA):</strong></p>","id":"1847"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-mermaid\">graph LR\n    A[draft] --> B[review]\n    B --> C[published]\n    C --> D[closed]\n    D --> E[analyzed]\n    B -.rollback.-> A\n</code></pre>","id":"1891"}],"dangerouslySetInnerHTML":"<h3>1.4 Stany UI i workflow</h3>","id":"1672"},{"children":[{"children":[{"dangerouslySetInnerHTML":"<p>âœ… WCAG 2.2 AA deklarowane</p>","id":"2067"},{"dangerouslySetInnerHTML":"<p>âœ… Semantic HTML</p>","id":"2095"},{"dangerouslySetInnerHTML":"<p>âš ï¸ Brak testÃ³w automatycznych (pa11y zadeklarowane, nie uruchomione)</p>","id":"2113"},{"dangerouslySetInnerHTML":"<p>âŒ Brak meta-description dla warsztatÃ³w</p>","id":"2184"},{"dangerouslySetInnerHTML":"<p>âŒ Brak canonical URLs</p>","id":"2225"},{"dangerouslySetInnerHTML":"<p>âŒ Brak structured data (JSON-LD)</p>","id":"2249"}],"dangerouslySetInnerHTML":"<p><strong>Obecny stan:</strong></p>","id":"2048"},{"children":[{"dangerouslySetInnerHTML":"<p>robots.txt + sitemap.xml</p>","id":"2299"},{"dangerouslySetInnerHTML":"<p>OpenGraph dla social sharing</p>","id":"2326"},{"dangerouslySetInnerHTML":"<p>Lighthouse CI w pipeline</p>","id":"2357"}],"dangerouslySetInnerHTML":"<p><strong>Potrzeby:</strong></p>","id":"2283"}],"dangerouslySetInnerHTML":"<h3>1.5 SEO/A11y</h3>","id":"2030"},{"children":[{"children":[{"dangerouslySetInnerHTML":"<p>Vanilla JS (dobry wybÃ³r)</p>","id":"2424"},{"dangerouslySetInnerHTML":"<p>Tailwind CSS (OK dla prototypu, watchdog dla bundle size)</p>","id":"2451"},{"dangerouslySetInnerHTML":"<p>Brak CDN, brak cache headers</p>","id":"2511"},{"dangerouslySetInnerHTML":"<p>Brak lazy loading obrazÃ³w</p>","id":"2542"}],"dangerouslySetInnerHTML":"<p><strong>Obecny stack:</strong></p>","id":"2404"},{"children":[{"dangerouslySetInnerHTML":"<p>Redis dla session + cache</p>","id":"2590"},{"dangerouslySetInnerHTML":"<p>Compression middleware</p>","id":"2618"},{"dangerouslySetInnerHTML":"<p>Image optimization (WebP, srcset)</p>","id":"2643"},{"dangerouslySetInnerHTML":"<p>Critical CSS inline</p>","id":"2679"}],"dangerouslySetInnerHTML":"<p><strong>Optymalizacje:</strong></p>","id":"2569"},{"children":[],"dangerouslySetInnerHTML":"<hr>","id":"2700"}],"dangerouslySetInnerHTML":"<h3>1.6 Performance</h3>","id":"2383"}],"dangerouslySetInnerHTML":"<h2>1. AUDYT APLIKACJI</h2>","id":"264"},{"children":[{"children":[{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-mermaid\">erDiagram\n    User ||--o{ Workshop : creates\n    User ||--o{ Enrollment : makes\n    User ||--o{ Response : submits\n    User ||--o{ Consent : gives\n    \n    Workshop ||--o{ Session : contains\n    Workshop ||--o{ Enrollment : receives\n    Workshop }o--o{ Tag : tagged_with\n    Workshop }o--|| Location : held_at\n    Workshop ||--o{ Questionnaire : includes\n    \n    Questionnaire ||--o{ QuestionGroup : organized_into\n    QuestionGroup ||--o{ Question : contains\n    Question ||--o{ Response : answered_by\n    \n    Enrollment ||--|| Response : triggers\n    Response }o--|| LLMAnalysis : analyzed_in\n    \n    User {\n        uuid id PK\n        string email UK\n        string password_hash\n        enum role\n        jsonb profile\n        timestamp created_at\n        timestamp updated_at\n    }\n    \n    Workshop {\n        uuid id PK\n        uuid creator_id FK\n        string title\n        text description\n        timestamp start_date\n        timestamp end_date\n        int seat_limit\n        enum status\n        string language\n        jsonb metadata\n    }\n    \n    Questionnaire {\n        uuid id PK\n        uuid workshop_id FK\n        string title\n        text instructions\n        enum status\n        jsonb settings\n        timestamp published_at\n        timestamp closed_at\n    }\n    \n    QuestionGroup {\n        uuid id PK\n        uuid questionnaire_id FK\n        string title\n        text description\n        int order_index\n        jsonb ui_config\n    }\n    \n    Question {\n        uuid id PK\n        uuid group_id FK\n        string text\n        enum type\n        jsonb options\n        jsonb validation\n        boolean required\n        int order_index\n    }\n    \n    Response {\n        uuid id PK\n        uuid question_id FK\n        uuid user_id FK\n        uuid enrollment_id FK\n        jsonb answer\n        timestamp submitted_at\n    }\n    \n    LLMAnalysis {\n        uuid id PK\n        uuid questionnaire_id FK\n        string analysis_type\n        jsonb results\n        jsonb metadata\n        timestamp created_at\n    }\n    \n    Consent {\n        uuid id PK\n        uuid user_id FK\n        uuid questionnaire_id FK\n        boolean ai_processing\n        timestamp given_at\n    }\n</code></pre>","id":"2769"}],"dangerouslySetInnerHTML":"<h3>2.1 Entity Relationship Diagram</h3>","id":"2732"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Questionnaire Schema:</strong></p>","id":"4990"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">Questionnaire:</span>\n  <span class=\"hljs-attr\">id:</span> <span class=\"hljs-string\">uuid</span>\n  <span class=\"hljs-attr\">workshop_id:</span> <span class=\"hljs-string\">uuid</span> <span class=\"hljs-string\">(nullable</span> <span class=\"hljs-string\">dla</span> <span class=\"hljs-string\">standalone)</span>\n  <span class=\"hljs-attr\">title:</span>\n    <span class=\"hljs-attr\">pl:</span> <span class=\"hljs-string\">string</span> <span class=\"hljs-string\">(min:</span> <span class=\"hljs-number\">5</span><span class=\"hljs-string\">,</span> <span class=\"hljs-attr\">max:</span> <span class=\"hljs-number\">200</span><span class=\"hljs-string\">)</span>\n    <span class=\"hljs-attr\">en:</span> <span class=\"hljs-string\">string</span>\n  <span class=\"hljs-attr\">instructions:</span>\n    <span class=\"hljs-attr\">pl:</span> <span class=\"hljs-string\">text</span>\n    <span class=\"hljs-attr\">en:</span> <span class=\"hljs-string\">text</span>\n  <span class=\"hljs-attr\">status:</span> <span class=\"hljs-string\">enum</span> [<span class=\"hljs-string\">draft</span>, <span class=\"hljs-string\">review</span>, <span class=\"hljs-string\">published</span>, <span class=\"hljs-string\">closed</span>, <span class=\"hljs-string\">analyzed</span>]\n  <span class=\"hljs-attr\">settings:</span>\n    <span class=\"hljs-attr\">anonymous:</span> <span class=\"hljs-string\">boolean</span> <span class=\"hljs-string\">(default:</span> <span class=\"hljs-literal\">false</span><span class=\"hljs-string\">)</span>\n    <span class=\"hljs-attr\">require_consent:</span> <span class=\"hljs-string\">boolean</span> <span class=\"hljs-string\">(default:</span> <span class=\"hljs-literal\">true</span><span class=\"hljs-string\">)</span>\n    <span class=\"hljs-attr\">max_responses:</span> <span class=\"hljs-string\">int</span> <span class=\"hljs-string\">(nullable)</span>\n    <span class=\"hljs-attr\">close_after_workshop:</span> <span class=\"hljs-string\">boolean</span>\n    <span class=\"hljs-attr\">show_all_questions:</span> <span class=\"hljs-string\">boolean</span> <span class=\"hljs-string\">(default:</span> <span class=\"hljs-literal\">true</span><span class=\"hljs-string\">,</span> <span class=\"hljs-string\">jak</span> <span class=\"hljs-string\">w</span> <span class=\"hljs-string\">PDF)</span>\n    <span class=\"hljs-attr\">allow_edit:</span> <span class=\"hljs-string\">boolean</span> <span class=\"hljs-string\">(default:</span> <span class=\"hljs-literal\">true</span><span class=\"hljs-string\">,</span> <span class=\"hljs-string\">jak</span> <span class=\"hljs-string\">w</span> <span class=\"hljs-string\">PDF)</span>\n    <span class=\"hljs-attr\">question_style:</span> <span class=\"hljs-string\">enum</span> [<span class=\"hljs-string\">first_person_plural</span>] <span class=\"hljs-comment\"># \"Co MY bÄ™dziemy robiÄ‡?\"</span>\n  <span class=\"hljs-attr\">published_at:</span> <span class=\"hljs-string\">timestamp</span>\n  <span class=\"hljs-attr\">closed_at:</span> <span class=\"hljs-string\">timestamp</span>\n  <span class=\"hljs-attr\">created_by:</span> <span class=\"hljs-string\">uuid</span>\n  <span class=\"hljs-attr\">created_at:</span> <span class=\"hljs-string\">timestamp</span>\n  <span class=\"hljs-attr\">updated_at:</span> <span class=\"hljs-string\">timestamp</span>\n</code></pre>","id":"5016"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>QuestionGroup Schema (sekcje z PDF):</strong></p>","id":"5725"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">QuestionGroup:</span>\n  <span class=\"hljs-attr\">id:</span> <span class=\"hljs-string\">uuid</span>\n  <span class=\"hljs-attr\">questionnaire_id:</span> <span class=\"hljs-string\">uuid</span>\n  <span class=\"hljs-attr\">title:</span>\n    <span class=\"hljs-attr\">pl:</span> <span class=\"hljs-string\">string</span> <span class=\"hljs-comment\"># \"1. WIZJA / MANIFEST\"</span>\n    <span class=\"hljs-attr\">en:</span> <span class=\"hljs-string\">string</span>\n  <span class=\"hljs-attr\">description:</span>\n    <span class=\"hljs-attr\">pl:</span> <span class=\"hljs-string\">text</span>\n    <span class=\"hljs-attr\">en:</span> <span class=\"hljs-string\">text</span>\n  <span class=\"hljs-attr\">order_index:</span> <span class=\"hljs-string\">int</span>\n  <span class=\"hljs-attr\">ui_config:</span>\n    <span class=\"hljs-attr\">collapsed:</span> <span class=\"hljs-string\">boolean</span> <span class=\"hljs-string\">(default:</span> <span class=\"hljs-literal\">false</span><span class=\"hljs-string\">)</span>\n    <span class=\"hljs-attr\">show_progress:</span> <span class=\"hljs-string\">boolean</span>\n    <span class=\"hljs-attr\">icon:</span> <span class=\"hljs-string\">string</span> <span class=\"hljs-string\">(nullable)</span>\n</code></pre>","id":"5766"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Question Schema:</strong></p>","id":"6061"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">Question:</span>\n  <span class=\"hljs-attr\">id:</span> <span class=\"hljs-string\">uuid</span>\n  <span class=\"hljs-attr\">group_id:</span> <span class=\"hljs-string\">uuid</span>\n  <span class=\"hljs-attr\">text:</span>\n    <span class=\"hljs-attr\">pl:</span> <span class=\"hljs-string\">string</span> <span class=\"hljs-comment\"># \"Co jest dla Was waÅ¼ne we wspÃ³lnym miejscu zamieszkania?\"</span>\n    <span class=\"hljs-attr\">en:</span> <span class=\"hljs-string\">string</span>\n  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">enum</span> [<span class=\"hljs-string\">text</span>, <span class=\"hljs-string\">textarea</span>, <span class=\"hljs-string\">number</span>, <span class=\"hljs-string\">scale</span>, <span class=\"hljs-string\">single_choice</span>, <span class=\"hljs-string\">multiple_choice</span>]\n  <span class=\"hljs-attr\">options:</span> <span class=\"hljs-comment\"># dla choice types</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">value:</span> <span class=\"hljs-string\">string</span>\n      <span class=\"hljs-attr\">label:</span>\n        <span class=\"hljs-attr\">pl:</span> <span class=\"hljs-string\">string</span>\n        <span class=\"hljs-attr\">en:</span> <span class=\"hljs-string\">string</span>\n  <span class=\"hljs-attr\">validation:</span>\n    <span class=\"hljs-attr\">required:</span> <span class=\"hljs-string\">boolean</span>\n    <span class=\"hljs-attr\">min_length:</span> <span class=\"hljs-string\">int</span> <span class=\"hljs-string\">(dla</span> <span class=\"hljs-string\">text/textarea)</span>\n    <span class=\"hljs-attr\">max_length:</span> <span class=\"hljs-string\">int</span>\n    <span class=\"hljs-attr\">min_value:</span> <span class=\"hljs-string\">int</span> <span class=\"hljs-string\">(dla</span> <span class=\"hljs-string\">number/scale)</span>\n    <span class=\"hljs-attr\">max_value:</span> <span class=\"hljs-string\">int</span>\n    <span class=\"hljs-attr\">pattern:</span> <span class=\"hljs-string\">regex</span> <span class=\"hljs-string\">(nullable)</span>\n  <span class=\"hljs-attr\">conditional_logic:</span> <span class=\"hljs-comment\"># wyÅ›wietlanie zaleÅ¼ne od innych odpowiedzi</span>\n    <span class=\"hljs-attr\">show_if:</span>\n      <span class=\"hljs-attr\">question_id:</span> <span class=\"hljs-string\">uuid</span>\n      <span class=\"hljs-attr\">operator:</span> <span class=\"hljs-string\">enum</span> [<span class=\"hljs-string\">equals</span>, <span class=\"hljs-string\">contains</span>, <span class=\"hljs-string\">greater_than</span>, <span class=\"hljs-string\">etc.</span>]\n      <span class=\"hljs-attr\">value:</span> <span class=\"hljs-string\">any</span>\n  <span class=\"hljs-attr\">order_index:</span> <span class=\"hljs-string\">int</span>\n  <span class=\"hljs-attr\">help_text:</span>\n    <span class=\"hljs-attr\">pl:</span> <span class=\"hljs-string\">string</span> <span class=\"hljs-string\">(nullable)</span>\n    <span class=\"hljs-attr\">en:</span> <span class=\"hljs-string\">string</span>\n</code></pre>","id":"6082"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Response Schema:</strong></p>","id":"6844"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">Response:</span>\n  <span class=\"hljs-attr\">id:</span> <span class=\"hljs-string\">uuid</span>\n  <span class=\"hljs-attr\">question_id:</span> <span class=\"hljs-string\">uuid</span>\n  <span class=\"hljs-attr\">user_id:</span> <span class=\"hljs-string\">uuid</span> <span class=\"hljs-string\">(nullable</span> <span class=\"hljs-string\">jeÅ›li</span> <span class=\"hljs-string\">anonymous)</span>\n  <span class=\"hljs-attr\">enrollment_id:</span> <span class=\"hljs-string\">uuid</span> <span class=\"hljs-string\">(nullable)</span>\n  <span class=\"hljs-attr\">answer:</span> <span class=\"hljs-string\">jsonb</span> <span class=\"hljs-comment\"># format zaleÅ¼ny od typu pytania</span>\n  <span class=\"hljs-attr\">metadata:</span>\n    <span class=\"hljs-attr\">ip_hash:</span> <span class=\"hljs-string\">string</span> <span class=\"hljs-string\">(dla</span> <span class=\"hljs-string\">rate</span> <span class=\"hljs-string\">limiting,</span> <span class=\"hljs-string\">nie</span> <span class=\"hljs-string\">IP!)</span>\n    <span class=\"hljs-attr\">user_agent_hash:</span> <span class=\"hljs-string\">string</span>\n    <span class=\"hljs-attr\">time_spent_ms:</span> <span class=\"hljs-string\">int</span>\n    <span class=\"hljs-attr\">edit_count:</span> <span class=\"hljs-string\">int</span>\n  <span class=\"hljs-attr\">submitted_at:</span> <span class=\"hljs-string\">timestamp</span>\n  <span class=\"hljs-attr\">updated_at:</span> <span class=\"hljs-string\">timestamp</span> <span class=\"hljs-string\">(jeÅ›li</span> <span class=\"hljs-string\">allow_edit)</span>\n</code></pre>","id":"6865"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>LLMAnalysis Schema:</strong></p>","id":"7245"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">LLMAnalysis:</span>\n  <span class=\"hljs-attr\">id:</span> <span class=\"hljs-string\">uuid</span>\n  <span class=\"hljs-attr\">questionnaire_id:</span> <span class=\"hljs-string\">uuid</span>\n  <span class=\"hljs-attr\">analysis_type:</span> <span class=\"hljs-string\">enum</span> [<span class=\"hljs-string\">thematic</span>, <span class=\"hljs-string\">clusters</span>, <span class=\"hljs-string\">contradictions</span>, <span class=\"hljs-string\">insights</span>, <span class=\"hljs-string\">recommendations</span>]\n  <span class=\"hljs-attr\">results:</span> <span class=\"hljs-string\">jsonb</span>\n    <span class=\"hljs-attr\">summary:</span> <span class=\"hljs-string\">text</span>\n    <span class=\"hljs-attr\">themes:</span> <span class=\"hljs-string\">array</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">string</span>\n        <span class=\"hljs-attr\">frequency:</span> <span class=\"hljs-string\">int</span>\n        <span class=\"hljs-attr\">examples:</span> <span class=\"hljs-string\">array[string]</span>\n        <span class=\"hljs-attr\">sentiment:</span> <span class=\"hljs-string\">float</span> [<span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">1</span>]\n    <span class=\"hljs-attr\">clusters:</span> <span class=\"hljs-string\">array</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">id:</span> <span class=\"hljs-string\">string</span>\n        <span class=\"hljs-attr\">size:</span> <span class=\"hljs-string\">int</span>\n        <span class=\"hljs-attr\">centroid:</span> <span class=\"hljs-string\">text</span>\n        <span class=\"hljs-attr\">members:</span> <span class=\"hljs-string\">array[uuid]</span> <span class=\"hljs-comment\"># response_ids</span>\n    <span class=\"hljs-attr\">contradictions:</span> <span class=\"hljs-string\">array</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">question_pair:</span> [<span class=\"hljs-string\">uuid</span>, <span class=\"hljs-string\">uuid</span>]\n        <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">text</span>\n        <span class=\"hljs-attr\">severity:</span> <span class=\"hljs-string\">enum</span> [<span class=\"hljs-string\">low</span>, <span class=\"hljs-string\">medium</span>, <span class=\"hljs-string\">high</span>]\n    <span class=\"hljs-attr\">insights:</span> <span class=\"hljs-string\">array</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">category:</span> <span class=\"hljs-string\">string</span>\n        <span class=\"hljs-attr\">text:</span> <span class=\"hljs-string\">text</span>\n        <span class=\"hljs-attr\">confidence:</span> <span class=\"hljs-string\">float</span> [<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>]\n        <span class=\"hljs-attr\">sources:</span> <span class=\"hljs-string\">array[uuid]</span> <span class=\"hljs-comment\"># response_ids</span>\n    <span class=\"hljs-attr\">recommendations:</span> <span class=\"hljs-string\">array</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">text:</span> <span class=\"hljs-string\">text</span>\n        <span class=\"hljs-attr\">priority:</span> <span class=\"hljs-string\">enum</span> [<span class=\"hljs-string\">low</span>, <span class=\"hljs-string\">medium</span>, <span class=\"hljs-string\">high</span>]\n        <span class=\"hljs-attr\">rationale:</span> <span class=\"hljs-string\">text</span>\n  <span class=\"hljs-attr\">metadata:</span>\n    <span class=\"hljs-attr\">model:</span> <span class=\"hljs-string\">string</span> <span class=\"hljs-comment\"># \"gpt-4\", \"claude-3-opus\", etc.</span>\n    <span class=\"hljs-attr\">prompt_version:</span> <span class=\"hljs-string\">string</span>\n    <span class=\"hljs-attr\">tokens_used:</span> <span class=\"hljs-string\">int</span>\n    <span class=\"hljs-attr\">processing_time_ms:</span> <span class=\"hljs-string\">int</span>\n    <span class=\"hljs-attr\">confidence_score:</span> <span class=\"hljs-string\">float</span>\n  <span class=\"hljs-attr\">created_at:</span> <span class=\"hljs-string\">timestamp</span>\n  <span class=\"hljs-attr\">created_by:</span> <span class=\"hljs-string\">uuid</span>\n</code></pre>","id":"7269"}],"dangerouslySetInnerHTML":"<h3>2.2 Schematy JSON</h3>","id":"4967"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<table>\n<thead>\n<tr>\n<th>Resource</th>\n<th>Participant</th>\n<th>Facilitator</th>\n<th>Moderator</th>\n<th>Sociologist-Editor</th>\n<th>Admin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Workshop</strong></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>view:published</td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>view:draft</td>\n<td>âŒ</td>\n<td>own</td>\n<td>all</td>\n<td>all</td>\n<td>all</td>\n</tr>\n<tr>\n<td>create</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>edit</td>\n<td>âŒ</td>\n<td>own:draft</td>\n<td>own</td>\n<td>all</td>\n<td>all</td>\n</tr>\n<tr>\n<td>publish</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>delete</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>own</td>\n<td>all</td>\n</tr>\n<tr>\n<td><strong>Questionnaire</strong></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>view:published</td>\n<td>enrolled</td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>view:draft</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>all</td>\n<td>all</td>\n</tr>\n<tr>\n<td>create</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>edit</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>own:draft</td>\n<td>all</td>\n</tr>\n<tr>\n<td>publish</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>close</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>own</td>\n<td>all</td>\n</tr>\n<tr>\n<td><strong>Response</strong></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>submit</td>\n<td>enrolled</td>\n<td>enrolled</td>\n<td>enrolled</td>\n<td>enrolled</td>\n<td>enrolled</td>\n</tr>\n<tr>\n<td>edit:own</td>\n<td>âœ… (if allowed)</td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>view:own</td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>view:all</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>workshop_creator</td>\n<td>all</td>\n</tr>\n<tr>\n<td>export</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>workshop_creator</td>\n<td>all</td>\n</tr>\n<tr>\n<td><strong>Analysis</strong></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>view</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>questionnaire_creator</td>\n<td>all</td>\n</tr>\n<tr>\n<td>trigger</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>export</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âŒ</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n</tbody>\n</table>","id":"8319"},{"children":[],"dangerouslySetInnerHTML":"<hr>","id":"9357"}],"dangerouslySetInnerHTML":"<h3>2.3 RBAC Matrix</h3>","id":"8298"}],"dangerouslySetInnerHTML":"<h2>2. MODEL TREÅšCI + RBAC</h2>","id":"2705"},{"children":[{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Ekran gÅ‚Ã³wny:</strong></p>","id":"9445"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ [â†] Kwestionariusze    [ğŸ“‹ Szablon z PDF â–¼] [+ Nowy]  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                         â”‚\nâ”‚  ğŸ“‹ NASZA (NIE)UTOPIA                     [Edytuj] [â‹®] â”‚\nâ”‚  4 sekcje Â· 23 pytania Â· 12 odpowiedzi                 â”‚\nâ”‚  Status: Opublikowany Â· Zamknij: 2025-12-01            â”‚\nâ”‚                                                         â”‚\nâ”‚  ğŸ“‹ Projekt SpoÅ‚ecznoÅ›ci XYZ              [Edytuj] [â‹®] â”‚\nâ”‚  4 sekcje Â· 23 pytania Â· 0 odpowiedzi                  â”‚\nâ”‚  Status: Szkic                                          â”‚\nâ”‚                                                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>","id":"9463"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Kreator - krok 1 (wybÃ³r szablonu):</strong></p>","id":"10245"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Wybierz szablon kwestionariusza                        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                         â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚\nâ”‚  â”‚ ğŸ“‹ NASZA (NIE)    â”‚  â”‚ ğŸ“ Pusty          â”‚          â”‚\nâ”‚  â”‚    UTOPIA         â”‚  â”‚    kwestionariusz â”‚          â”‚\nâ”‚  â”‚                   â”‚  â”‚                   â”‚          â”‚\nâ”‚  â”‚ 4 sekcje gotowe   â”‚  â”‚ Zacznij od zera   â”‚          â”‚\nâ”‚  â”‚ 23 pytania        â”‚  â”‚                   â”‚          â”‚\nâ”‚  â”‚                   â”‚  â”‚                   â”‚          â”‚\nâ”‚  â”‚ [UÅ¼yj szablonu]   â”‚  â”‚ [StwÃ³rz pusty]    â”‚          â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚\nâ”‚                                                         â”‚\nâ”‚  ğŸ’¡ Szablon \"NASZA (NIE)UTOPIA\" zawiera pytania        â”‚\nâ”‚     z dokumentu PDF - gotowe do uÅ¼ycia!                â”‚\nâ”‚                                                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>","id":"10284"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Kreator - krok 2 (podstawowe info):</strong></p>","id":"11361"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Nowy kwestionariusz                         [Zapisz]   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                         â”‚\nâ”‚  TytuÅ‚ (PL)  [NASZA (NIE)UTOPIA                      ] â”‚\nâ”‚  TytuÅ‚ (EN)  [OUR (DIS)UTOPIA                        ] â”‚\nâ”‚                                                         â”‚\nâ”‚  Instrukcje (PL)                                        â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚ WypeÅ‚nij kwestionariusz opisujÄ…cy WaszÄ… wizjÄ™  â”‚   â”‚\nâ”‚  â”‚ wspÃ³lnoty. PamiÄ™taj, Å¼e...                      â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                         â”‚\nâ”‚  â˜‘ Przypisz do warsztatu: [Wybierz warsztat â–¼]        â”‚\nâ”‚  â˜‘ Wymagaj zgody na przetwarzanie przez AI             â”‚\nâ”‚  â˜‘ Anonimowe odpowiedzi                                â”‚\nâ”‚  â˜‘ PozwÃ³l edytowaÄ‡ odpowiedzi                          â”‚\nâ”‚  â˜ Zamknij automatycznie po warsztacie                 â”‚\nâ”‚                                                         â”‚\nâ”‚  Max odpowiedzi: [âˆ] (nieograniczone)                  â”‚\nâ”‚                                                         â”‚\nâ”‚                                 [Anuluj] [Dalej â†’]     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>","id":"11401"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Edytor kwestionariusza (gÅ‚Ã³wny ekran):</strong></p>","id":"12774"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ [â†] NASZA (NIE)UTOPIA                     [PodglÄ…d] [Zapisz] [Opublikuj]â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ SEKCJE              â”‚  1. WIZJA / MANIFEST                       [â‹®]   â”‚\nâ”‚                     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚\nâ”‚ â–¼ 1. Wizja/Manifestâ”‚                                                    â”‚\nâ”‚   â–· 2. PrzestrzeÅ„   â”‚  Kluczowe wartoÅ›ci                         [â‹®]   â”‚\nâ”‚   â–· 3. Relacje      â”‚  Co jest dla Was waÅ¼ne we wspÃ³lnym miejscu       â”‚\nâ”‚   â–· 4. Organizowanieâ”‚  zamieszkania? Co leÅ¼y u podstaw tego pomysÅ‚u?   â”‚\nâ”‚                     â”‚  Z jakimi wartoÅ›ciami utoÅ¼samiacie siÄ™?          â”‚\nâ”‚ + Dodaj sekcjÄ™      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚                     â”‚  â”‚ [DÅ‚uga odpowiedÅº (textarea)]             â”‚   â”‚\nâ”‚ USTAWIENIA          â”‚  â”‚ â˜‘ Wymagane                               â”‚   â”‚\nâ”‚ â€¢ Podstawowe        â”‚  â”‚ Min 10 znakÃ³w Â· Max 500 znakÃ³w           â”‚   â”‚\nâ”‚ â€¢ WyÅ›wietlanie      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚ â€¢ Analiza AI        â”‚                                                    â”‚\nâ”‚                     â”‚  Cel                                        [â‹®]   â”‚\nâ”‚ PODGLÄ„D             â”‚  Dlaczego Wasze miejsce istnieje?                â”‚\nâ”‚ [ğŸ‘ Zobacz]         â”‚  By Å¼yÅ‚o siÄ™ Å‚atwiej, zabawniej I na wÅ‚asnych    â”‚\nâ”‚                     â”‚  zasadach                                         â”‚\nâ”‚                     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚                     â”‚  â”‚ [KrÃ³tka odpowiedÅº (text)]                â”‚   â”‚\nâ”‚                     â”‚  â”‚ â˜ Wymagane Â· Max 200 znakÃ³w              â”‚   â”‚\nâ”‚                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                     â”‚                                                    â”‚\nâ”‚                     â”‚  + Dodaj pytanie                                   â”‚\nâ”‚                     â”‚                                                    â”‚\nâ”‚                     â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚\nâ”‚                     â”‚  ğŸ“Œ UWAGA: W trybie uczestnika wszystkie pytania â”‚\nâ”‚                     â”‚     w tej sekcji bÄ™dÄ… widoczne jednoczeÅ›nie,     â”‚\nâ”‚                     â”‚     zgodnie z szablonem PDF.                     â”‚\nâ”‚                     â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>","id":"12818"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Menu kontekstowe pytania [â‹®]:</strong></p>","id":"15308"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ âœ Edytuj pytanie â”‚\nâ”‚ â†‘ PrzesuÅ„ wyÅ¼ej  â”‚\nâ”‚ â†“ PrzesuÅ„ niÅ¼ej  â”‚\nâ”‚ ğŸ“‹ Duplikuj      â”‚\nâ”‚ ğŸ—‘ UsuÅ„          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>","id":"15342"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Edytor pytania (modal):</strong></p>","id":"15498"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Edytuj pytanie                            [Zapisz] [Ã—]  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                         â”‚\nâ”‚  Tekst pytania (PL) *                                   â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚ Co jest dla Was waÅ¼ne we wspÃ³lnym miejscu       â”‚   â”‚\nâ”‚  â”‚ zamieszkania?                                   â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                         â”‚\nâ”‚  Tekst pytania (EN)                                     â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚ What is important to you in a shared living    â”‚   â”‚\nâ”‚  â”‚ space?                                          â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                         â”‚\nâ”‚  Typ odpowiedzi:                                        â”‚\nâ”‚  ( ) KrÃ³tka odpowiedÅº (text)                           â”‚\nâ”‚  (â€¢) DÅ‚uga odpowiedÅº (textarea)                        â”‚\nâ”‚  ( ) Liczba (number)                                    â”‚\nâ”‚  ( ) Skala (1-10)                                       â”‚\nâ”‚  ( ) WybÃ³r pojedynczy (radio)                          â”‚\nâ”‚  ( ) WybÃ³r wielokrotny (checkbox)                      â”‚\nâ”‚                                                         â”‚\nâ”‚  Walidacja:                                             â”‚\nâ”‚  â˜‘ Wymagane                                             â”‚\nâ”‚  Min: [10] znakÃ³w  Max: [500] znakÃ³w                   â”‚\nâ”‚                                                         â”‚\nâ”‚  Tekst pomocy (opcjonalnie)                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚ MoÅ¼esz wymieniÄ‡ wartoÅ›ci rozdzielone przecinkamiâ”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                         â”‚\nâ”‚  Logika warunkowa (zaawansowane)                        â”‚\nâ”‚  â˜ PokaÅ¼ tylko jeÅ›li...                                â”‚\nâ”‚                                                         â”‚\nâ”‚                                  [Anuluj] [Zapisz]     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>","id":"15526"}],"dangerouslySetInnerHTML":"<h3>3.1 Kreator kwestionariusza - struktura UI</h3>","id":"9397"},{"children":[{"children":[{"dangerouslySetInnerHTML":"<p>JSON fixture z peÅ‚nÄ… strukturÄ… 4 sekcji + wszystkie pytania z PDF</p>","id":"17861"},{"dangerouslySetInnerHTML":"<p>Import w jednym klikniÄ™ciu</p>","id":"17929"},{"dangerouslySetInnerHTML":"<p>KaÅ¼de pytanie mapowane do odpowiedniego typu (text/textarea/scale)</p>","id":"17958"}],"dangerouslySetInnerHTML":"<p><strong>Implementacja:</strong></p>","id":"17840"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>PrzykÅ‚ad JSON (fragment):</strong></p>","id":"18026"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"template_id\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"nasza_nieutopia_v1\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"title\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"pl\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"NASZA (NIE)UTOPIA\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"en\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"OUR (DIS)UTOPIA\"</span>\n  <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"groups\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">\"order\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">\"title\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n        <span class=\"hljs-attr\">\"pl\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"1. WIZJA / MANIFEST\"</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-attr\">\"en\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"1. VISION / MANIFEST\"</span>\n      <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">\"questions\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">\"order\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-attr\">\"label\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Kluczowe wartoÅ›ci\"</span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-attr\">\"text\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n            <span class=\"hljs-attr\">\"pl\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Co jest dla Was waÅ¼ne we wspÃ³lnym miejscu zamieszkania? Co leÅ¼y u podstaw tego pomysÅ‚u? Z jakimi wartoÅ›ciami utoÅ¼samiacie siÄ™?\"</span><span class=\"hljs-punctuation\">,</span>\n            <span class=\"hljs-attr\">\"en\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"What is important to you in a shared living space? What is the foundation of this idea? What values do you identify with?\"</span>\n          <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-attr\">\"type\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"textarea\"</span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-attr\">\"required\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">false</span></span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-attr\">\"validation\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n            <span class=\"hljs-attr\">\"max_length\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">500</span>\n          <span class=\"hljs-punctuation\">}</span>\n        <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-punctuation\">{</span>\n          <span class=\"hljs-attr\">\"order\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">2</span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-attr\">\"label\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Cel\"</span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-attr\">\"text\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n            <span class=\"hljs-attr\">\"pl\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Dlaczego Wasze miejsce istnieje? By Å¼yÅ‚o siÄ™ Å‚atwiej, zabawniej I na wÅ‚asnych zasadach\"</span><span class=\"hljs-punctuation\">,</span>\n            <span class=\"hljs-attr\">\"en\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Why does your place exist? So that life is easier, more fun, and on your own terms\"</span>\n          <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-attr\">\"type\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"textarea\"</span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-attr\">\"required\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">false</span></span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-attr\">\"validation\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n            <span class=\"hljs-attr\">\"max_length\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">300</span>\n          <span class=\"hljs-punctuation\">}</span>\n        <span class=\"hljs-punctuation\">}</span>\n        <span class=\"hljs-comment\">// ... pozostaÅ‚e pytania</span>\n      <span class=\"hljs-punctuation\">]</span>\n    <span class=\"hljs-punctuation\">}</span>\n    <span class=\"hljs-comment\">// ... pozostaÅ‚e sekcje</span>\n  <span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>","id":"18056"}],"dangerouslySetInnerHTML":"<h3>3.2 Szablon z PDF - gotowa lista pytaÅ„</h3>","id":"17796"},{"children":[{"children":[{"dangerouslySetInnerHTML":"<p>\"Wszystkie pytania w jednym bloku widoczne jednoczeÅ›nie\"</p>","id":"19472"},{"dangerouslySetInnerHTML":"<p>\"MoÅ¼na miÄ™dzy nimi skakaÄ‡\"</p>","id":"19531"},{"dangerouslySetInnerHTML":"<p>\"KaÅ¼dÄ… odpowiedÅº zawsze moÅ¼na zmieniÄ‡\"</p>","id":"19560"},{"dangerouslySetInnerHTML":"<p>\"Styl 1. os. mn.: 'co MY bÄ™dziemy robiÄ‡?'\"</p>","id":"19601"}],"dangerouslySetInnerHTML":"<p><strong>Zgodnie z notÄ…tkami z PDF:</strong></p>","id":"19439"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ NASZA (NIE)UTOPIA                          [Zapisz szkic]â”‚\nâ”‚ Warsztat: Budowanie WspÃ³lnoty Â· 12.12.2025               â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ PostÄ™p: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 8/23                       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                         â”‚\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚ â”‚ 1. WIZJA / MANIFEST                             â”‚   â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                         â”‚\nâ”‚ Kluczowe wartoÅ›ci                                       â”‚\nâ”‚ Co jest dla Was waÅ¼ne we wspÃ³lnym miejscu zamieszkania? â”‚\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚ â”‚ pogÅ‚Ä™bione relacje miÄ™dzyludzkie, szacunek do   â”‚   â”‚\nâ”‚ â”‚ natury, wolnoÅ›Ä‡, rÃ³wnoÅ›Ä‡, rozwÃ³j osobisty,      â”‚   â”‚\nâ”‚ â”‚ rÃ³Å¼norodnoÅ›Ä‡ bio i ludzka                       â”‚   â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚ âœ“ Zapisano 2 min temu                                   â”‚\nâ”‚                                                         â”‚\nâ”‚ Cel                                                     â”‚\nâ”‚ Dlaczego Wasze miejsce istnieje?                        â”‚\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚ â”‚ By Å¼yÅ‚o siÄ™ Å‚atwiej, zabawniej I na wÅ‚asnych    â”‚   â”‚\nâ”‚ â”‚ zasadach                                        â”‚   â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚ âœ“ Zapisano 2 min temu                                   â”‚\nâ”‚                                                         â”‚\nâ”‚ Potrzeby                                                â”‚\nâ”‚ Jakie potrzeby bÄ™dziecie realizowaÄ‡ w Waszym miejscu?   â”‚\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚ â”‚ [Kliknij aby odpowiedzieÄ‡]                      â”‚   â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                         â”‚\nâ”‚ Obraz nas                                               â”‚\nâ”‚ W jaki sposÃ³b jesteÅ›my postrzegani przez osoby z        â”‚\nâ”‚ zewnÄ…trz?                                               â”‚\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚ â”‚ [Kliknij aby odpowiedzieÄ‡]                      â”‚   â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                         â”‚\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚\nâ”‚                                                         â”‚\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚ â”‚ 2. PRZESTRZEÅƒ I MATERIA                         â”‚   â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                         â”‚\nâ”‚ ... (wszystkie pytania sekcji 2) ...                   â”‚\nâ”‚                                                         â”‚\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚\nâ”‚                                                         â”‚\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚ â”‚ 3. RELACJE, INTERAKCJE I WOLNOÅšÄ† OSOBISTA       â”‚   â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                         â”‚\nâ”‚ ... (wszystkie pytania sekcji 3) ...                   â”‚\nâ”‚                                                         â”‚\nâ”‚                         [Zapisz szkic] [WyÅ›lij â†’]      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>","id":"19645"},{"children":[{"dangerouslySetInnerHTML":"<p>Autosave co 30s lub po kaÅ¼dej zmianie (debounce 2s)</p>","id":"23158"},{"dangerouslySetInnerHTML":"<p>Scroll do ostatnio edytowanego pytania</p>","id":"23212"},{"dangerouslySetInnerHTML":"<p>Walidacja inline (bez blokowania)</p>","id":"23253"},{"dangerouslySetInnerHTML":"<p>Mobile-first layout (kolumna single)</p>","id":"23289"}],"dangerouslySetInnerHTML":"<p><strong>Funkcje:</strong></p>","id":"23143"},{"children":[],"dangerouslySetInnerHTML":"<hr>","id":"23327"}],"dangerouslySetInnerHTML":"<h3>3.3 Widok uczestnika (wypeÅ‚nianie)</h3>","id":"19399"}],"dangerouslySetInnerHTML":"<h2>3. UX \"BEZ KODU\" DLA SOCJOLOGA</h2>","id":"9362"},{"children":[{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Management API (dla CMS):</strong></p>","id":"23382"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>POST   /api/v1/questionnaires\nGET    /api/v1/questionnaires\nGET    /api/v1/questionnaires/:id\nPUT    /api/v1/questionnaires/:id\nDELETE /api/v1/questionnaires/:id\nPOST   /api/v1/questionnaires/:id/publish\nPOST   /api/v1/questionnaires/:id/close\n\nPOST   /api/v1/questionnaires/:id/groups\nPUT    /api/v1/questionnaires/:id/groups/:groupId\nDELETE /api/v1/questionnaires/:id/groups/:groupId\n\nPOST   /api/v1/questionnaires/:id/groups/:groupId/questions\nPUT    /api/v1/questionnaires/:id/questions/:questionId\nDELETE /api/v1/questionnaires/:id/questions/:questionId\nPOST   /api/v1/questionnaires/:id/questions/reorder\n\nGET    /api/v1/questionnaires/:id/preview\n</code></pre>","id":"23412"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Public API (dla uczestnikÃ³w):</strong></p>","id":"24075"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>GET    /api/v1/public/questionnaires/:id # tylko published\nGET    /api/v1/public/questionnaires/:id/schema # dla frontend validation\n\nPOST   /api/v1/responses\nGET    /api/v1/responses/my/:questionnaireId\nPUT    /api/v1/responses/:id # jeÅ›li allow_edit\nPOST   /api/v1/responses/:questionnaireId/submit # finalizacja\n</code></pre>","id":"24109"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Analysis API (dla LLM):</strong></p>","id":"24433"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>POST   /api/v1/analysis/ingest\n       Body: { questionnaire_id, responses: [...] }\n       \nPOST   /api/v1/analysis/run\n       Body: { \n         questionnaire_id, \n         analysis_types: [\"thematic\", \"clusters\", \"insights\"],\n         options: { min_cluster_size: 3 }\n       }\n\nGET    /api/v1/analysis/:questionnaireId\nGET    /api/v1/analysis/:questionnaireId/export?format=json|csv\n</code></pre>","id":"24461"}],"dangerouslySetInnerHTML":"<h3>4.1 API Endpoints</h3>","id":"23359"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>TypeScript SDK:</strong></p>","id":"24879"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-typescript\"><span class=\"hljs-comment\">// client.ts</span>\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">QuestionnaireClient</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'@workshopsai/sdk'</span>;\n\n<span class=\"hljs-keyword\">const</span> client = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">QuestionnaireClient</span>({\n  <span class=\"hljs-attr\">baseUrl</span>: <span class=\"hljs-string\">'https://api.workshopsai.com'</span>,\n  <span class=\"hljs-attr\">apiKey</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">API_KEY</span>\n});\n\n<span class=\"hljs-comment\">// Tworzenie</span>\n<span class=\"hljs-keyword\">const</span> questionnaire = <span class=\"hljs-keyword\">await</span> client.<span class=\"hljs-property\">questionnaires</span>.<span class=\"hljs-title function_\">create</span>({\n  <span class=\"hljs-attr\">title</span>: { <span class=\"hljs-attr\">pl</span>: <span class=\"hljs-string\">'TytuÅ‚'</span>, <span class=\"hljs-attr\">en</span>: <span class=\"hljs-string\">'Title'</span> },\n  <span class=\"hljs-attr\">settings</span>: { <span class=\"hljs-attr\">anonymous</span>: <span class=\"hljs-literal\">true</span> }\n});\n\n<span class=\"hljs-comment\">// Dodawanie pytania</span>\n<span class=\"hljs-keyword\">await</span> client.<span class=\"hljs-property\">questions</span>.<span class=\"hljs-title function_\">create</span>(questionnaire.<span class=\"hljs-property\">id</span>, {\n  <span class=\"hljs-attr\">group_id</span>: group.<span class=\"hljs-property\">id</span>,\n  <span class=\"hljs-attr\">text</span>: { <span class=\"hljs-attr\">pl</span>: <span class=\"hljs-string\">'Pytanie?'</span>, <span class=\"hljs-attr\">en</span>: <span class=\"hljs-string\">'Question?'</span> },\n  <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">'textarea'</span>,\n  <span class=\"hljs-attr\">required</span>: <span class=\"hljs-literal\">false</span>\n});\n\n<span class=\"hljs-comment\">// Publikacja</span>\n<span class=\"hljs-keyword\">await</span> client.<span class=\"hljs-property\">questionnaires</span>.<span class=\"hljs-title function_\">publish</span>(questionnaire.<span class=\"hljs-property\">id</span>);\n\n<span class=\"hljs-comment\">// Pobieranie odpowiedzi</span>\n<span class=\"hljs-keyword\">const</span> responses = <span class=\"hljs-keyword\">await</span> client.<span class=\"hljs-property\">responses</span>.<span class=\"hljs-title function_\">list</span>(questionnaire.<span class=\"hljs-property\">id</span>);\n</code></pre>","id":"24899"}],"dangerouslySetInnerHTML":"<h3>4.2 SDK dla frontend</h3>","id":"24853"},{"children":[{"children":[{"dangerouslySetInnerHTML":"<p>Draft: edytowalna kopia robocza</p>","id":"25645"},{"dangerouslySetInnerHTML":"<p>Preview: immutable snapshot dla testowania (generowany on-demand)</p>","id":"25679"},{"dangerouslySetInnerHTML":"<p>Published: zamroÅ¼ona wersja (read-only)</p>","id":"25747"},{"dangerouslySetInnerHTML":"<p>History: tablica JSON z timestampami + diff</p>","id":"25789"}],"dangerouslySetInnerHTML":"<p><strong>Strategia:</strong></p>","id":"25628"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Endpoint preview:</strong></p>","id":"25834"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>GET /api/v1/questionnaires/:id/preview?token=&#x3C;preview_token>\n</code></pre>","id":"25856"},{"children":[],"dangerouslySetInnerHTML":"<p>Token preview waÅ¼ny 24h, pozwala na dostÄ™p bez autentykacji.</p>","id":"25925"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Rollback:</strong></p>","id":"25987"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>POST /api/v1/questionnaires/:id/rollback\nBody: { version: \"2025-01-15T10:30:00Z\" }\n</code></pre>","id":"26001"}],"dangerouslySetInnerHTML":"<h3>4.3 Wersjonowanie i preview</h3>","id":"25595"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Redis cache keys:</strong></p>","id":"26121"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>questionnaire:{id}\nquestionnaire:{id}:schema\nresponses:{questionnaire_id}:count\nanalysis:{questionnaire_id}:latest\n</code></pre>","id":"26143"},{"children":[{"dangerouslySetInnerHTML":"<p>Update questionnaire â†’ invalidate <code>questionnaire:{id}*</code></p>","id":"26296"},{"dangerouslySetInnerHTML":"<p>New response â†’ increment counter + invalidate analysis cache</p>","id":"26354"},{"dangerouslySetInnerHTML":"<p>Publish â†’ invalidate public schema cache</p>","id":"26417"}],"dangerouslySetInnerHTML":"<p><strong>Invalidation triggers:</strong></p>","id":"26267"},{"children":[],"dangerouslySetInnerHTML":"<hr>","id":"26459"}],"dangerouslySetInnerHTML":"<h3>4.4 Cache invalidation</h3>","id":"26093"}],"dangerouslySetInnerHTML":"<h2>4. INTEGRACJA Z WEBAPP</h2>","id":"23332"},{"children":[{"children":[{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-mermaid\">graph TD\n    A[Responses collected] --> B[Anonimizacja]\n    B --> C[Text preprocessing]\n    C --> D[Embeddings generation]\n    D --> E[Vector store]\n    E --> F[Analysis LLM]\n    F --> G{Analysis type}\n    G -->|Thematic| H[Theme extraction]\n    G -->|Clusters| I[Clustering]\n    G -->|Contradictions| J[Consistency check]\n    G -->|Insights| K[Pattern recognition]\n    G -->|Recommendations| L[Action items]\n    H --> M[Results aggregation]\n    I --> M\n    J --> M\n    K --> M\n    L --> M\n    M --> N[Store in DB]\n    N --> O[Notify sociologist]\n</code></pre>","id":"26515"}],"dangerouslySetInnerHTML":"<h3>5.1 Pipeline przetwarzania</h3>","id":"26483"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Proces:</strong></p>","id":"27100"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-typescript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">anonymizeResponses</span>(<span class=\"hljs-params\">responses: Response[]</span>): <span class=\"hljs-title class_\">AnonymizedResponse</span>[] {\n  <span class=\"hljs-keyword\">return</span> responses.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">r</span> =></span> ({\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-title function_\">generateAnonymousId</span>(), <span class=\"hljs-comment\">// nowy UUID, nie powiÄ…zany z user_id</span>\n    <span class=\"hljs-attr\">question_text</span>: r.<span class=\"hljs-property\">question</span>.<span class=\"hljs-property\">text</span>,\n    <span class=\"hljs-attr\">answer</span>: <span class=\"hljs-title function_\">redactPII</span>(r.<span class=\"hljs-property\">answer</span>), <span class=\"hljs-comment\">// usuniÄ™cie email, tel, nazwisk</span>\n    <span class=\"hljs-attr\">metadata</span>: {\n      <span class=\"hljs-attr\">timestamp_bucket</span>: <span class=\"hljs-title function_\">bucketTimestamp</span>(r.<span class=\"hljs-property\">submitted_at</span>, <span class=\"hljs-string\">'1h'</span>), <span class=\"hljs-comment\">// zaokrÄ…glenie do godziny</span>\n      <span class=\"hljs-attr\">question_type</span>: r.<span class=\"hljs-property\">question</span>.<span class=\"hljs-property\">type</span>\n    }\n  }));\n}\n</code></pre>","id":"27112"},{"children":[{"dangerouslySetInnerHTML":"<p>Regex: email, phone, PESEL, NIP</p>","id":"27587"},{"dangerouslySetInnerHTML":"<p>Named Entity Recognition (NER) dla nazwisk/miejsc</p>","id":"27621"},{"dangerouslySetInnerHTML":"<p>ZastÄ™powanie: <code>[IMIÄ˜]</code>, <code>[EMAIL]</code>, <code>[TELEFON]</code></p>","id":"27673"}],"dangerouslySetInnerHTML":"<p><strong>PII detection:</strong></p>","id":"27566"}],"dangerouslySetInnerHTML":"<h3>5.2 Anonimizacja</h3>","id":"27078"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Model:</strong> <code>text-embedding-3-small</code> (OpenAI) lub <code>voyage-02</code> (Voyage AI)<br>\n<strong>Dim:</strong> 1536 (small) lub 384 (dla kosztÃ³w)</p>","id":"27747"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Process:</strong></p>","id":"27867"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-python\"><span class=\"hljs-comment\"># 1. Generate embeddings per response</span>\nembeddings = openai.embeddings.create(\n  model=<span class=\"hljs-string\">\"text-embedding-3-small\"</span>,\n  <span class=\"hljs-built_in\">input</span>=[r.answer <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> anonymized_responses]\n)\n\n<span class=\"hljs-comment\"># 2. Store w vector DB (Pinecone/Qdrant/ChromaDB)</span>\nvector_db.upsert(\n  ids=[r.<span class=\"hljs-built_in\">id</span> <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> responses],\n  vectors=[e.embedding <span class=\"hljs-keyword\">for</span> e <span class=\"hljs-keyword\">in</span> embeddings.data],\n  metadata=[{<span class=\"hljs-string\">\"question_id\"</span>: r.question_id} <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> responses]\n)\n\n<span class=\"hljs-comment\"># 3. Query dla similar responses</span>\nsimilar = vector_db.query(\n  vector=query_embedding,\n  top_k=<span class=\"hljs-number\">10</span>,\n  <span class=\"hljs-built_in\">filter</span>={<span class=\"hljs-string\">\"question_id\"</span>: target_question_id}\n)\n</code></pre>","id":"27880"}],"dangerouslySetInnerHTML":"<h3>5.3 Embeddings i RAG</h3>","id":"27721"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Format zgodny z best practices (z digest.txt):</strong></p>","id":"28445"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Thematic analysis:</strong></p>","id":"28497"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>JesteÅ› ekspertem socjologiem analizujÄ…cym odpowiedzi na kwestionariusz dotyczÄ…cy wspÃ³lnoty mieszkaniowej.\n\n# ZADANIE\nPrzeanalizuj poniÅ¼sze anonimowe odpowiedzi i wyodrÄ™bnij kluczowe tematy.\n\n# INSTRUKCJE\n1. Przeczytaj wszystkie odpowiedzi uwaÅ¼nie\n2. Zidentyfikuj powtarzajÄ…ce siÄ™ motywy i wartoÅ›ci\n3. Dla kaÅ¼dego tematu:\n   - Nadaj krÃ³tkÄ…, opisowÄ… nazwÄ™\n   - Policz czÄ™stotliwoÅ›Ä‡ wystÄ™powania\n   - Wybierz 2-3 reprezentatywne cytaty (bez identyfikacji autorÃ³w)\n   - OceÅ„ sentyment: pozytywny/neutralny/negatywny\n4. UporzÄ…dkuj tematy od najczÄ™stszych\n\n# ODPOWIEDZI DO ANALIZY\n{{responses}}\n\n# FORMAT WYJÅšCIA\nOdpowiedz TYLKO w formacie JSON:\n{\n  \"themes\": [\n    {\n      \"name\": \"Nazwa tematu\",\n      \"frequency\": 12,\n      \"examples\": [\"cytat 1\", \"cytat 2\"],\n      \"sentiment\": \"positive\"\n    }\n  ]\n}\n\n# OGRANICZENIA\n- NIE ujawniaj Å¼adnych danych osobowych\n- NIE spekuluj o toÅ¼samoÅ›ci respondentÃ³w\n- Trzymaj siÄ™ faktÃ³w z odpowiedzi\n- Unikaj subiektywnych interpretacji\n</code></pre>","id":"28520"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Clustering:</strong></p>","id":"29496"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>JesteÅ› algorytmem clusteringu dla danych jakoÅ›ciowych.\n\n# ZADANIE\nPogrupuj podobne odpowiedzi w klastry reprezentujÄ…ce wspÃ³lne perspektywy.\n\n# KROKI\n1. Dla kaÅ¼dej odpowiedzi wygeneruj reprezentacjÄ™ semantycznÄ…\n2. Zastosuj hierarchical clustering (ward linkage)\n3. OkreÅ›l optymalnÄ… liczbÄ™ klastrÃ³w (elbow method, 2-10 klastrÃ³w)\n4. Dla kaÅ¼dego klastra:\n   - OkreÅ›l centroid (najbardziej reprezentatywna odpowiedÅº)\n   - Wylistuj ID odpowiedzi (anonimowe)\n   - Scharakteryzuj wspÃ³lne cechy\n\n# DANE WEJÅšCIOWE\n{{response_embeddings}}\n\n# FORMAT WYJÅšCIA JSON\n{\n  \"optimal_clusters\": 5,\n  \"clusters\": [\n    {\n      \"id\": \"cluster_1\",\n      \"size\": 8,\n      \"centroid\": \"WspÃ³lna przestrzeÅ„ do pracy zdalnej\",\n      \"members\": [\"anon_uuid_1\", \"anon_uuid_2\", ...],\n      \"characteristics\": [\"praca zdalna\", \"wspÃ³Å‚dzielenie\", \"cisza\"]\n    }\n  ]\n}\n</code></pre>","id":"29512"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Insights extraction:</strong></p>","id":"30355"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>DziaÅ‚asz jako senior research analyst specjalizujÄ…cy siÄ™ w community design.\n\n# CEL\nWyciÄ…gnij nieoczywiste insighty z odpowiedzi na kwestionariusz wspÃ³lnotowy.\n\n# METODOLOGIA\n1. Przeanalizuj odpowiedzi cross-question (miÄ™dzy sekcjami)\n2. Szukaj:\n   - Niespodziewanych korelacji\n   - Ukrytych potrzeb (nie wyraÅ¼onych wprost)\n   - Potencjalnych konfliktÃ³w wartoÅ›ci\n   - NieobsÅ‚ugiwanych przypadkÃ³w uÅ¼ycia\n3. OceÅ„ confidence kaÅ¼dego insightu (0-1)\n4. Podaj ÅºrÃ³dÅ‚a (ID anonimowych odpowiedzi)\n\n# DANE\nSekcja 1 (Wizja): {{section_1_responses}}\nSekcja 2 (PrzestrzeÅ„): {{section_2_responses}}\nSekcja 3 (Relacje): {{section_3_responses}}\nSekcja 4 (Organizowanie): {{section_4_responses}}\n\n# WYJÅšCIE JSON\n{\n  \"insights\": [\n    {\n      \"category\": \"Konflikt potrzeb\",\n      \"text\": \"20% uczestnikÃ³w pragnie ciszy do pracy, ale 80% chce wspÃ³lnych przestrzeni - potencjalny konflikt\",\n      \"confidence\": 0.85,\n      \"sources\": [\"anon_1\", \"anon_3\", \"anon_12\"]\n    }\n  ]\n}\n\n# REGUÅY\n- Minimum 5 odpowiedzi dla wiarygodnego insightu\n- Confidence &#x3C; 0.6 = oznacz jako \"wymagajÄ…ce weryfikacji\"\n- Cytuj konkretne dane, nie spekuluj\n</code></pre>","id":"30380"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Recommendations:</strong></p>","id":"31503"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>JesteÅ› doradcÄ… wspÃ³lnotowym z 20-letnim doÅ›wiadczeniem w cohousing.\n\n# ZADANIE\nNa podstawie analizy odpowiedzi zaproponuj konkretne rekomendacje dla projektantÃ³w wspÃ³lnoty.\n\n# KONTEKST\nWyniki analiz:\n- Tematy: {{themes}}\n- Klastry: {{clusters}}\n- SprzecznoÅ›ci: {{contradictions}}\n- Insighty: {{insights}}\n\n# KROKI\n1. Przeanalizuj wszystkie wyniki razem\n2. Zidentyfikuj top 5-10 obszarÃ³w wymagajÄ…cych uwagi\n3. Dla kaÅ¼dego zaproponuj:\n   - Konkretne dziaÅ‚anie\n   - Priorytet (low/medium/high)\n   - Uzasadnienie oparte na danych\n\n# FORMAT JSON\n{\n  \"recommendations\": [\n    {\n      \"text\": \"Zaprojektuj strefÄ™ ciszy oddzielonÄ… od wspÃ³lnych przestrzeni\",\n      \"priority\": \"high\",\n      \"rationale\": \"80% uczestnikÃ³w wskazuje potrzebÄ™ pracy zdalnej, ale 60% obawia siÄ™ haÅ‚asu\"\n    }\n  ]\n}\n\n# ZASADY\n- Rekomendacje SMART (specific, measurable, actionable)\n- Bez platform (nie \"zainstaluj X\", tylko \"zapewnij Y\")\n- Skupienie na human-centered design\n</code></pre>","id":"31524"}],"dangerouslySetInnerHTML":"<h3>5.4 Prompty analizy</h3>","id":"28420"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Primary:</strong> GPT-4 Turbo lub Claude 3 Opus (dla zÅ‚oÅ¼onych analiz)<br>\n<strong>Fallback:</strong> GPT-3.5 Turbo (dla kosztÃ³w przy duÅ¼ych wolumenach)<br>\n<strong>Specialized:</strong> Claude 3 Haiku dla sentiment analysis (szybki + tani)</p>","id":"32512"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Error handling:</strong></p>","id":"32719"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-typescript\"><span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">runAnalysis</span>(<span class=\"hljs-params\">params</span>) {\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">callGPT4</span>(params);\n  } <span class=\"hljs-keyword\">catch</span> (error) {\n    <span class=\"hljs-keyword\">if</span> (error.<span class=\"hljs-property\">code</span> === <span class=\"hljs-string\">'RATE_LIMIT'</span>) {\n      <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">sleep</span>(<span class=\"hljs-title function_\">exponentialBackoff</span>(retryCount));\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">runAnalysis</span>(params);\n    }\n    <span class=\"hljs-keyword\">if</span> (error.<span class=\"hljs-property\">code</span> === <span class=\"hljs-string\">'CONTENT_FILTER'</span>) {\n      <span class=\"hljs-comment\">// sanitize input + retry</span>\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">callGPT4</span>(<span class=\"hljs-title function_\">sanitize</span>(params));\n    }\n    <span class=\"hljs-comment\">// fallback to cheaper model</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">callGPT35</span>(params);\n  }\n}\n</code></pre>","id":"32739"}],"dangerouslySetInnerHTML":"<h3>5.5 Model selection i fallback</h3>","id":"32476"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Metryki:</strong></p>","id":"33225"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">Quality Metrics:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Completeness:</span> <span class=\"hljs-string\">czy</span> <span class=\"hljs-string\">wszystkie</span> <span class=\"hljs-string\">sekcje</span> <span class=\"hljs-string\">przeanalizowane?</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Confidence:</span> <span class=\"hljs-string\">Å›redni</span> <span class=\"hljs-string\">confidence</span> <span class=\"hljs-string\">score</span> <span class=\"hljs-string\">></span> <span class=\"hljs-number\">0.7</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Consistency:</span> <span class=\"hljs-string\">czy</span> <span class=\"hljs-string\">insights</span> <span class=\"hljs-string\">spÃ³jne</span> <span class=\"hljs-string\">z</span> <span class=\"hljs-string\">themes?</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Actionability:</span> <span class=\"hljs-string\">czy</span> <span class=\"hljs-string\">recommendations</span> <span class=\"hljs-string\">konkretne?</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">PII Leakage:</span> <span class=\"hljs-string\">zero</span> <span class=\"hljs-string\">mentions</span> <span class=\"hljs-string\">danych</span> <span class=\"hljs-string\">osobowych</span>\n\n<span class=\"hljs-attr\">Automated Checks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">JSON</span> <span class=\"hljs-string\">validity</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Required</span> <span class=\"hljs-string\">fields</span> <span class=\"hljs-string\">presence</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Confidence</span> <span class=\"hljs-string\">thresholds</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">PII</span> <span class=\"hljs-string\">regex</span> <span class=\"hljs-string\">scan</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Sentiment</span> <span class=\"hljs-string\">distribution</span> <span class=\"hljs-string\">(nie</span> <span class=\"hljs-string\">wszystko</span> <span class=\"hljs-string\">positive</span> <span class=\"hljs-string\">=</span> <span class=\"hljs-string\">suspicious)</span>\n\n<span class=\"hljs-attr\">Human Review:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Random</span> <span class=\"hljs-string\">sample</span> <span class=\"hljs-number\">10</span><span class=\"hljs-string\">%</span> <span class=\"hljs-string\">analiz</span> <span class=\"hljs-string\">przez</span> <span class=\"hljs-string\">socjologa</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Feedback</span> <span class=\"hljs-string\">loop</span> <span class=\"hljs-string\">â†’</span> <span class=\"hljs-string\">fine-tuning</span> <span class=\"hljs-string\">promptÃ³w</span>\n</code></pre>","id":"33238"},{"children":[],"dangerouslySetInnerHTML":"<hr>","id":"33791"}],"dangerouslySetInnerHTML":"<h3>5.6 Ewaluacja jakoÅ›ci analiz</h3>","id":"33191"}],"dangerouslySetInnerHTML":"<h2>5. WARSTWA LLM</h2>","id":"26464"},{"children":[{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Testy funkcjonalne:</strong></p>","id":"33847"},{"children":[],"dangerouslySetInnerHTML":"<table>\n<thead>\n<tr>\n<th>ID</th>\n<th>Obszar</th>\n<th>Przypadek</th>\n<th>Kryteria</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>F01</td>\n<td>Kreator</td>\n<td>Utworzenie kwestionariusza z szablonu PDF</td>\n<td>Wszystkie 4 sekcje + 23 pytania zaimportowane</td>\n</tr>\n<tr>\n<td>F02</td>\n<td>Kreator</td>\n<td>Dodanie custom pytania</td>\n<td>Pytanie zapisane z walidacjÄ…</td>\n</tr>\n<tr>\n<td>F03</td>\n<td>Kreator</td>\n<td>Reorder pytaÅ„ (drag&#x26;drop)</td>\n<td>KolejnoÅ›Ä‡ zachowana po odÅ›wieÅ¼eniu</td>\n</tr>\n<tr>\n<td>F04</td>\n<td>Publikacja</td>\n<td>Publish kwestionariusza</td>\n<td>Status=published, timestamp ustawiony</td>\n</tr>\n<tr>\n<td>F05</td>\n<td>Publikacja</td>\n<td>Preview przed publikacjÄ…</td>\n<td>Link preview dziaÅ‚a bez login</td>\n</tr>\n<tr>\n<td>F06</td>\n<td>Uczestnik</td>\n<td>WypeÅ‚nianie kwestionariusza</td>\n<td>Wszystkie pytania widoczne jednoczeÅ›nie</td>\n</tr>\n<tr>\n<td>F07</td>\n<td>Uczestnik</td>\n<td>Autosave odpowiedzi</td>\n<td>Szkic zapisany co 30s, odzyskany po refresh</td>\n</tr>\n<tr>\n<td>F08</td>\n<td>Uczestnik</td>\n<td>Edycja odpowiedzi</td>\n<td>Zmiana moÅ¼liwa jeÅ›li allow_edit=true</td>\n</tr>\n<tr>\n<td>F09</td>\n<td>Uczestnik</td>\n<td>Submit final</td>\n<td>Status=submitted, brak moÅ¼liwoÅ›ci edycji (jeÅ›li not allowed)</td>\n</tr>\n<tr>\n<td>F10</td>\n<td>RBAC</td>\n<td>Sociologist tworzy kwestionariusz</td>\n<td>Dozwolone</td>\n</tr>\n<tr>\n<td>F11</td>\n<td>RBAC</td>\n<td>Participant prÃ³buje edytowaÄ‡ cudzÄ… odpowiedÅº</td>\n<td>403 Forbidden</td>\n</tr>\n<tr>\n<td>F12</td>\n<td>LLM</td>\n<td>Trigger analysis</td>\n<td>Job uruchomiony, status=processing</td>\n</tr>\n<tr>\n<td>F13</td>\n<td>LLM</td>\n<td>Anonimizacja</td>\n<td>Zero PII w outputach analizy</td>\n</tr>\n<tr>\n<td>F14</td>\n<td>LLM</td>\n<td>Thematic analysis</td>\n<td>Min 3 tematy zwrÃ³cone w JSON</td>\n</tr>\n<tr>\n<td>F15</td>\n<td>LLM</td>\n<td>Recommendations</td>\n<td>Min 5 rekomendacji w JSON</td>\n</tr>\n<tr>\n<td>F16</td>\n<td>Export</td>\n<td>CSV export responses</td>\n<td>Plik zawiera wszystkie odpowiedzi</td>\n</tr>\n<tr>\n<td>F17</td>\n<td>Export</td>\n<td>JSON export analysis</td>\n<td>Zgodny z schematem</td>\n</tr>\n</tbody>\n</table>","id":"33872"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Testy A11y:</strong></p>","id":"35275"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-bash\"><span class=\"hljs-comment\"># Automatyczne</span>\nnpm run <span class=\"hljs-built_in\">test</span>:a11y <span class=\"hljs-comment\"># pa11y + axe-core</span>\n\n<span class=\"hljs-comment\"># Manualne</span>\n- Nawigacja tylko klawiaturÄ… (Tab, Enter, Esc)\n- Screen reader (NVDA/JAWS/VoiceOver)\n- Zoom 200% (layout nie pÄ™ka)\n- Kontrast narzÄ™dziem WebAIM\n</code></pre>","id":"35291"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Testy bezpieczeÅ„stwa:</strong></p>","id":"35512"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-bash\"><span class=\"hljs-comment\"># OWASP ZAP scan</span>\nnpm run security:scan\n\n<span class=\"hljs-comment\"># Manualne</span>\n- XSS injection w pytaniach/odpowiedziach\n- SQL injection w filtrach\n- CSRF na POST /responses\n- Rate limiting na /api/v1/responses (max 10/min)\n- JWT expiry (<span class=\"hljs-built_in\">timeout</span> 1h)\n</code></pre>","id":"35538"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Testy wydajnoÅ›ciowe:</strong></p>","id":"35773"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-bash\"><span class=\"hljs-comment\"># Load testing (k6)</span>\nk6 run loadtest.js\n\nScenarios:\n- 100 concurrent <span class=\"hljs-built_in\">users</span> wypeÅ‚nia kwestionariusz\n- 1000 responses â†’ trigger analysis (max 5min processing)\n- 10 socjologÃ³w edytuje rÃ³Å¼ne kwestionariusze jednoczeÅ›nie\n</code></pre>","id":"35798"}],"dangerouslySetInnerHTML":"<h3>6.1 Plan testÃ³w</h3>","id":"33826"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>GÅ‚Ã³wne:</strong></p>","id":"36039"},{"children":[],"dangerouslySetInnerHTML":"<table>\n<thead>\n<tr>\n<th>Metryka</th>\n<th>Docelowa wartoÅ›Ä‡</th>\n<th>Pomiar</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Workshop creation time</td>\n<td>&#x3C;10 min</td>\n<td>Timer w CMS</td>\n</tr>\n<tr>\n<td>Questionnaire creation time</td>\n<td>&#x3C;15 min</td>\n<td>Timer w CMS</td>\n</tr>\n<tr>\n<td>Response completion rate</td>\n<td>>70%</td>\n<td>submitted / started</td>\n</tr>\n<tr>\n<td>Analysis processing time</td>\n<td>&#x3C;5 min dla 100 responses</td>\n<td>Job duration</td>\n</tr>\n<tr>\n<td>API response time (p95)</td>\n<td>&#x3C;500ms</td>\n<td>APM</td>\n</tr>\n<tr>\n<td>Uptime</td>\n<td>>99.5%</td>\n<td>Monitoring</td>\n</tr>\n</tbody>\n</table>","id":"36051"},{"children":[{"dangerouslySetInnerHTML":"<p>User satisfaction (NPS po 1 miesiÄ…cu)</p>","id":"36458"},{"dangerouslySetInnerHTML":"<p>Feature adoption (% sociologists using questionnaires)</p>","id":"36498"},{"dangerouslySetInnerHTML":"<p>Error rate (&#x3C;1% failed requests)</p>","id":"36555"},{"dangerouslySetInnerHTML":"<p>Time to insight (od close do analysis report: &#x3C;1h)</p>","id":"36590"}],"dangerouslySetInnerHTML":"<p><strong>WtÃ³rne:</strong></p>","id":"36444"}],"dangerouslySetInnerHTML":"<h3>6.2 KPI</h3>","id":"36026"},{"children":[{"children":[{"dangerouslySetInnerHTML":"<p>âœ… Socjolog tworzy kwestionariusz z szablonu PDF w &#x3C;15 min</p>","id":"36696"},{"dangerouslySetInnerHTML":"<p>âœ… Uczestnik wypeÅ‚nia wszystkie 4 sekcje (23 pytania) w &#x3C;30 min</p>","id":"36756"},{"dangerouslySetInnerHTML":"<p>âœ… Odpowiedzi sÄ… anonimizowane (zero PII leaks)</p>","id":"36821"},{"dangerouslySetInnerHTML":"<p>âœ… Analiza LLM zwraca min 3 tematy + 5 recommendations</p>","id":"36870"},{"dangerouslySetInnerHTML":"<p>âœ… Export CSV/JSON dziaÅ‚a</p>","id":"36926"},{"dangerouslySetInnerHTML":"<p>âœ… WCAG 2.2 AA zgodnoÅ›Ä‡ (minimum pa11y score >90)</p>","id":"36953"},{"dangerouslySetInnerHTML":"<p>âœ… GDPR zgoda required przed wypeÅ‚nianiem</p>","id":"37004"},{"dangerouslySetInnerHTML":"<p>âœ… Mobile responsive (viewport 320px+)</p>","id":"37047"}],"dangerouslySetInnerHTML":"<p><strong>Must-have dla MVP:</strong></p>","id":"36671"},{"children":[{"dangerouslySetInnerHTML":"<p>Bulk import pytaÅ„ z CSV</p>","id":"37106"},{"dangerouslySetInnerHTML":"<p>AI-assisted question generation (suggest follow-ups)</p>","id":"37132"},{"dangerouslySetInnerHTML":"<p>Real-time collaboration (multi-user editing)</p>","id":"37187"},{"dangerouslySetInnerHTML":"<p>Conditional logic builder (GUI)</p>","id":"37234"},{"dangerouslySetInnerHTML":"<p>Integration z Google Forms/Typeform (import)</p>","id":"37268"}],"dangerouslySetInnerHTML":"<p><strong>Nice-to-have:</strong></p>","id":"37086"},{"children":[],"dangerouslySetInnerHTML":"<hr>","id":"37314"}],"dangerouslySetInnerHTML":"<h3>6.3 Acceptance criteria</h3>","id":"36642"}],"dangerouslySetInnerHTML":"<h2>6. TESTY, AKCEPTACJA, KPI</h2>","id":"33796"},{"children":[{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Epic 1: Questionnaire CMS</strong></p>","id":"37381"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>US1.1: Jako socjolog chcÄ™ stworzyÄ‡ pusty kwestionariusz\n  - Acceptance: form z tytuÅ‚em + settings â†’ saved draft\n  \nUS1.2: Jako socjolog chcÄ™ zaimportowaÄ‡ szablon z PDF\n  - Acceptance: klik \"Szablon PDF\" â†’ 4 sekcje + 23 pytania loaded\n  \nUS1.3: Jako socjolog chcÄ™ dodaÄ‡/edytowaÄ‡ pytania\n  - Acceptance: modal z typami pytaÅ„ + walidacja â†’ saved\n  \nUS1.4: Jako socjolog chcÄ™ zmieniÄ‡ kolejnoÅ›Ä‡ pytaÅ„\n  - Acceptance: drag&#x26;drop â†’ order_index updated\n  \nUS1.5: Jako socjolog chcÄ™ podejrzeÄ‡ kwestionariusz przed publikacjÄ…\n  - Acceptance: preview link generowany â†’ rendering poprawny\n  \nUS1.6: Jako socjolog chcÄ™ opublikowaÄ‡ kwestionariusz\n  - Acceptance: status=published, timestamp set, immutable\n</code></pre>","id":"37411"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Epic 2: Response Collection</strong></p>","id":"38111"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>US2.1: Jako uczestnik chcÄ™ zobaczyÄ‡ wszystkie pytania jednoczeÅ›nie\n  - Acceptance: scroll view, wszystkie sekcje expanded by default\n  \nUS2.2: Jako uczestnik chcÄ™ zapisaÄ‡ szkic odpowiedzi\n  - Acceptance: autosave co 30s, status=draft\n  \nUS2.3: Jako uczestnik chcÄ™ edytowaÄ‡ odpowiedzi\n  - Acceptance: jeÅ›li allow_edit=true â†’ update moÅ¼liwy\n  \nUS2.4: Jako uczestnik chcÄ™ wysÅ‚aÄ‡ finalne odpowiedzi\n  - Acceptance: submit button â†’ status=submitted, lock edits\n  \nUS2.5: Jako uczestnik chcÄ™ wyraziÄ‡ zgodÄ™ na przetwarzanie przez AI\n  - Acceptance: checkbox + modal z informacjÄ… â†’ consent zapisana\n</code></pre>","id":"38143"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Epic 3: LLM Analysis</strong></p>","id":"38743"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>US3.1: Jako system chcÄ™ anonimizowaÄ‡ odpowiedzi\n  - Acceptance: PII detection â†’ redaction â†’ zero leaks\n  \nUS3.2: Jako system chcÄ™ generowaÄ‡ embeddings\n  - Acceptance: vector store populated, searchable\n  \nUS3.3: Jako socjolog chcÄ™ uruchomiÄ‡ analizÄ™ tematycznÄ…\n  - Acceptance: job triggered â†’ themes JSON w &#x3C;5 min\n  \nUS3.4: Jako socjolog chcÄ™ zobaczyÄ‡ rekomendacje\n  - Acceptance: recommendations list + priority + rationale\n  \nUS3.5: Jako socjolog chcÄ™ wyeksportowaÄ‡ analizÄ™\n  - Acceptance: CSV/JSON download z peÅ‚nymi wynikami\n</code></pre>","id":"38768"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Epic 4: RBAC &#x26; Security</strong></p>","id":"39305"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>US4.1: Jako admin chcÄ™ zarzÄ…dzaÄ‡ rolami uÅ¼ytkownikÃ³w\n  - Acceptance: UI do zmiany role â†’ permissions updated\n  \nUS4.2: Jako system chcÄ™ logowaÄ‡ wszystkie operacje\n  - Acceptance: audit log w DB, queryable\n  \nUS4.3: Jako system chcÄ™ rate-limitowaÄ‡ API\n  - Acceptance: max 10 req/min per IP â†’ 429 po przekroczeniu\n</code></pre>","id":"39333"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Epic 5: Testing &#x26; Docs</strong></p>","id":"39654"},{"children":[],"dangerouslySetInnerHTML":"<pre><code>US5.1: Jako developer chcÄ™ mieÄ‡ testy jednostkowe\n  - Acceptance: coverage >80%, CI pipeline green\n  \nUS5.2: Jako developer chcÄ™ dokumentacjÄ™ API\n  - Acceptance: OpenAPI spec + Swagger UI\n  \nUS5.3: Jako uÅ¼ytkownik chcÄ™ tutorial video\n  - Acceptance: 5min screencast opublikowany\n</code></pre>","id":"39681"}],"dangerouslySetInnerHTML":"<h3>7.1 Epiki i User Stories</h3>","id":"37351"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<pre><code>Phase 1: Database &#x26; Models (2 dni)\n[ ] T1.1 Migracja schema - dodanie tabel Questionnaire, QuestionGroup, Question\n[ ] T1.2 Migracja schema - dodanie tabel Response, Consent, LLMAnalysis\n[ ] T1.3 Drizzle models + relations\n[ ] T1.4 Seed data - szablon PDF jako JSON fixture\n[ ] T1.5 Unit testy dla models\n\nPhase 2: Backend API (3 dni)\n[ ] T2.1 Routes: questionnaires CRUD\n[ ] T2.2 Routes: questions CRUD + reorder\n[ ] T2.3 Routes: responses CRUD (public + management)\n[ ] T2.4 Routes: analysis trigger + fetch\n[ ] T2.5 Middleware: RBAC permissions check\n[ ] T2.6 Middleware: rate limiting (express-rate-limit)\n[ ] T2.7 Services: QuestionnaireService\n[ ] T2.8 Services: ResponseService (anonimizacja)\n[ ] T2.9 Services: AnalysisService (LLM integration)\n[ ] T2.10 Integration tests dla API\n\nPhase 3: Frontend CMS (4 dni)\n[ ] T3.1 UI: lista kwestionariuszy\n[ ] T3.2 UI: kreator - krok 1 (wybÃ³r szablonu)\n[ ] T3.3 UI: kreator - krok 2 (basic info)\n[ ] T3.4 UI: edytor - nawigacja sekcji\n[ ] T3.5 UI: edytor - lista pytaÅ„\n[ ] T3.6 UI: modal edycji pytania\n[ ] T3.7 UI: drag&#x26;drop reorder\n[ ] T3.8 UI: preview mode\n[ ] T3.9 Logic: import szablonu PDF\n[ ] T3.10 Logic: publish workflow\n[ ] T3.11 E2E testy (Playwright)\n\nPhase 4: Frontend Participant (2 dni)\n[ ] T4.1 UI: widok kwestionariusza (all questions visible)\n[ ] T4.2 UI: autosave indicator\n[ ] T4.3 UI: consent modal (GDPR)\n[ ] T4.4 Logic: autosave co 30s\n[ ] T4.5 Logic: submit + validation\n[ ] T4.6 Mobile responsive\n\nPhase 5: LLM Integration (3 dni)\n[ ] T5.1 Setup OpenAI client + API keys\n[ ] T5.2 Anonimizacja pipeline (PII detection)\n[ ] T5.3 Embeddings generation (vector store setup)\n[ ] T5.4 Prompt templates (thematic, clustering, insights, recommendations)\n[ ] T5.5 Analysis runner (job queue - BullMQ)\n[ ] T5.6 Results storage + cache\n[ ] T5.7 Unit testy dla LLM pipeline\n[ ] T5.8 Ewaluacja: PII leakage tests\n\nPhase 6: Export &#x26; Reporting (1 dzieÅ„)\n[ ] T6.1 CSV export responses\n[ ] T6.2 JSON export analysis\n[ ] T6.3 PDF report generation (optional)\n\nPhase 7: Security &#x26; Performance (2 dni)\n[ ] T7.1 Helmet.js + CORS hardening\n[ ] T7.2 Input sanitization (DOMPurify)\n[ ] T7.3 Redis cache setup\n[ ] T7.4 CDN config (CloudFlare)\n[ ] T7.5 Compression middleware\n[ ] T7.6 Image optimization pipeline\n[ ] T7.7 Load testing (k6)\n[ ] T7.8 Security scan (OWASP ZAP)\n\nPhase 8: A11y &#x26; i18n (2 dni)\n[ ] T8.1 ARIA labels + roles\n[ ] T8.2 Keyboard navigation (focus mgmt)\n[ ] T8.3 pa11y + axe tests\n[ ] T8.4 i18n setup (pl/en strings)\n[ ] T8.5 Language switcher UI\n\nPhase 9: Docs &#x26; Deploy (2 dni)\n[ ] T9.1 OpenAPI spec generation\n[ ] T9.2 Swagger UI endpoint\n[ ] T9.3 README update (API examples)\n[ ] T9.4 Tutorial video recording\n[ ] T9.5 Docker production config\n[ ] T9.6 CI/CD pipeline (GitHub Actions)\n[ ] T9.7 Staging deploy\n[ ] T9.8 Production deploy + smoke tests\n</code></pre>","id":"40007"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Total: ~21 dni roboczych (4 tygodnie z buforem)</strong></p>","id":"42839"}],"dangerouslySetInnerHTML":"<h3>7.2 Zadania techniczne (backlog)</h3>","id":"39969"},{"children":[{"children":[{"dangerouslySetInnerHTML":"<p>Seed database z szablonem PDF</p>","id":"42978"},{"dangerouslySetInnerHTML":"<p>Utworzenie demo questionnaire dla testÃ³w</p>","id":"43010"}],"dangerouslySetInnerHTML":"<p><strong>Scenario 1: Brak istniejÄ…cych danych (greenfield)</strong></p>","id":"42922"},{"children":[{"dangerouslySetInnerHTML":"<p>Skrypt: link kwestionariusza do workshop_id</p>","id":"43105"},{"dangerouslySetInnerHTML":"<p>Bulk import responses (jeÅ›li zebrane offline)</p>","id":"43151"},{"dangerouslySetInnerHTML":"<p>Trigger analysis dla historycznych danych</p>","id":"43199"}],"dangerouslySetInnerHTML":"<p><strong>Scenario 2: Migracja z istniejÄ…cych warsztatÃ³w</strong></p>","id":"43052"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Skrypt migracji:</strong></p>","id":"43242"},{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-bash\">npm run migrate:questionnaires -- --from-csv data/questionnaires.csv\nnpm run migrate:responses -- --questionnaire-id UUID --from-csv data/responses.csv\nnpm run analysis:backfill -- --questionnaire-id UUID\n</code></pre>","id":"43263"},{"children":[],"dangerouslySetInnerHTML":"<hr>","id":"43481"}],"dangerouslySetInnerHTML":"<h3>7.3 Plan migracji treÅ›ci</h3>","id":"42892"}],"dangerouslySetInnerHTML":"<h2>7. BACKLOG + PLAN WDROÅ»ENIA</h2>","id":"37319"},{"children":[{"children":[{"children":[],"dangerouslySetInnerHTML":"<pre><code>/\nâ”œâ”€â”€ /workshops (public listing)\nâ”œâ”€â”€ /workshops/:id (public detail)\nâ”‚\nâ”œâ”€â”€ /cms\nâ”‚   â”œâ”€â”€ /login\nâ”‚   â”œâ”€â”€ /dashboard\nâ”‚   â”œâ”€â”€ /workshops (management)\nâ”‚   â”‚   â”œâ”€â”€ /new\nâ”‚   â”‚   â”œâ”€â”€ /:id/edit\nâ”‚   â”‚   â””â”€â”€ /:id/preview\nâ”‚   â”œâ”€â”€ /questionnaires (NEW)\nâ”‚   â”‚   â”œâ”€â”€ /new\nâ”‚   â”‚   â”‚   â”œâ”€â”€ ?template=pdf (wybÃ³r szablonu)\nâ”‚   â”‚   â”‚   â””â”€â”€ ?blank (pusty)\nâ”‚   â”‚   â”œâ”€â”€ /:id/edit\nâ”‚   â”‚   â”‚   â”œâ”€â”€ /sections\nâ”‚   â”‚   â”‚   â”œâ”€â”€ /questions\nâ”‚   â”‚   â”‚   â””â”€â”€ /settings\nâ”‚   â”‚   â”œâ”€â”€ /:id/preview\nâ”‚   â”‚   â”œâ”€â”€ /:id/responses (lista odpowiedzi)\nâ”‚   â”‚   â””â”€â”€ /:id/analysis (wyniki LLM)\nâ”‚   â”œâ”€â”€ /users (RBAC management)\nâ”‚   â””â”€â”€ /settings\nâ”‚\nâ”œâ”€â”€ /questionnaires/:id (public view dla uczestnikÃ³w)\nâ”‚   â”œâ”€â”€ /fill (wypeÅ‚nianie)\nâ”‚   â””â”€â”€ /thank-you (podziÄ™kowanie po submit)\nâ”‚\nâ””â”€â”€ /api/v1\n    â”œâ”€â”€ /workshops\n    â”œâ”€â”€ /questionnaires (NEW)\n    â”œâ”€â”€ /questions (NEW)\n    â”œâ”€â”€ /responses (NEW)\n    â”œâ”€â”€ /analysis (NEW)\n    â””â”€â”€ /docs (Swagger UI)\n</code></pre>","id":"43520"}],"dangerouslySetInnerHTML":"<h3>8.1 Sitemap</h3>","id":"43503"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><em>(patrz sekcja 2.1 powyÅ¼ej)</em></p>","id":"44442"}],"dangerouslySetInnerHTML":"<h3>8.2 ERD (Mermaid)</h3>","id":"44419"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">openapi:</span> <span class=\"hljs-number\">3.0</span><span class=\"hljs-number\">.0</span>\n<span class=\"hljs-attr\">info:</span>\n  <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">WorkshopsAI</span> <span class=\"hljs-string\">CMS</span> <span class=\"hljs-string\">API</span>\n  <span class=\"hljs-attr\">version:</span> <span class=\"hljs-number\">1.0</span><span class=\"hljs-number\">.0</span>\n\n<span class=\"hljs-attr\">paths:</span>\n  <span class=\"hljs-string\">/api/v1/questionnaires:</span>\n    <span class=\"hljs-attr\">post:</span>\n      <span class=\"hljs-attr\">summary:</span> <span class=\"hljs-string\">Create</span> <span class=\"hljs-string\">questionnaire</span>\n      <span class=\"hljs-attr\">security:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">bearerAuth:</span> []\n      <span class=\"hljs-attr\">requestBody:</span>\n        <span class=\"hljs-attr\">content:</span>\n          <span class=\"hljs-attr\">application/json:</span>\n            <span class=\"hljs-attr\">schema:</span>\n              <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>\n              <span class=\"hljs-attr\">required:</span> [<span class=\"hljs-string\">title</span>]\n              <span class=\"hljs-attr\">properties:</span>\n                <span class=\"hljs-attr\">title:</span>\n                  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>\n                  <span class=\"hljs-attr\">properties:</span>\n                    <span class=\"hljs-attr\">pl:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">minLength:</span> <span class=\"hljs-number\">5</span>}\n                    <span class=\"hljs-attr\">en:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">minLength:</span> <span class=\"hljs-number\">5</span>}\n                <span class=\"hljs-attr\">workshop_id:</span>\n                  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>\n                  <span class=\"hljs-attr\">format:</span> <span class=\"hljs-string\">uuid</span>\n                <span class=\"hljs-attr\">settings:</span>\n                  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>\n                  <span class=\"hljs-attr\">properties:</span>\n                    <span class=\"hljs-attr\">anonymous:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">boolean</span>}\n                    <span class=\"hljs-attr\">require_consent:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">boolean</span>}\n                <span class=\"hljs-attr\">template_id:</span>\n                  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>\n                  <span class=\"hljs-attr\">enum:</span> [<span class=\"hljs-string\">nasza_nieutopia_v1</span>, <span class=\"hljs-string\">blank</span>]\n      <span class=\"hljs-attr\">responses:</span>\n        <span class=\"hljs-attr\">'201':</span>\n          <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">Created</span>\n          <span class=\"hljs-attr\">content:</span>\n            <span class=\"hljs-attr\">application/json:</span>\n              <span class=\"hljs-attr\">schema:</span>\n                <span class=\"hljs-string\">$ref:</span> <span class=\"hljs-string\">'#/components/schemas/Questionnaire'</span>\n        <span class=\"hljs-attr\">'403':</span>\n          <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">Forbidden</span> <span class=\"hljs-string\">(insufficient</span> <span class=\"hljs-string\">permissions)</span>\n\n  <span class=\"hljs-string\">/api/v1/questionnaires/{id}:</span>\n    <span class=\"hljs-attr\">get:</span>\n      <span class=\"hljs-attr\">summary:</span> <span class=\"hljs-string\">Get</span> <span class=\"hljs-string\">questionnaire</span>\n      <span class=\"hljs-attr\">parameters:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">id</span>\n          <span class=\"hljs-attr\">in:</span> <span class=\"hljs-string\">path</span>\n          <span class=\"hljs-attr\">required:</span> <span class=\"hljs-literal\">true</span>\n          <span class=\"hljs-attr\">schema:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">format:</span> <span class=\"hljs-string\">uuid</span>}\n      <span class=\"hljs-attr\">responses:</span>\n        <span class=\"hljs-attr\">'200':</span>\n          <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">Success</span>\n          <span class=\"hljs-attr\">content:</span>\n            <span class=\"hljs-attr\">application/json:</span>\n              <span class=\"hljs-attr\">schema:</span>\n                <span class=\"hljs-string\">$ref:</span> <span class=\"hljs-string\">'#/components/schemas/Questionnaire'</span>\n\n  <span class=\"hljs-string\">/api/v1/responses:</span>\n    <span class=\"hljs-attr\">post:</span>\n      <span class=\"hljs-attr\">summary:</span> <span class=\"hljs-string\">Submit</span> <span class=\"hljs-string\">response</span>\n      <span class=\"hljs-attr\">security:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">bearerAuth:</span> []\n      <span class=\"hljs-attr\">requestBody:</span>\n        <span class=\"hljs-attr\">content:</span>\n          <span class=\"hljs-attr\">application/json:</span>\n            <span class=\"hljs-attr\">schema:</span>\n              <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>\n              <span class=\"hljs-attr\">required:</span> [<span class=\"hljs-string\">question_id</span>, <span class=\"hljs-string\">answer</span>]\n              <span class=\"hljs-attr\">properties:</span>\n                <span class=\"hljs-attr\">question_id:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">format:</span> <span class=\"hljs-string\">uuid</span>}\n                <span class=\"hljs-attr\">answer:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>} <span class=\"hljs-comment\"># polymorphic based on question type</span>\n                <span class=\"hljs-attr\">enrollment_id:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">format:</span> <span class=\"hljs-string\">uuid</span>}\n      <span class=\"hljs-attr\">responses:</span>\n        <span class=\"hljs-attr\">'201':</span>\n          <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">Created</span>\n        <span class=\"hljs-attr\">'429':</span>\n          <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">Rate</span> <span class=\"hljs-string\">limit</span> <span class=\"hljs-string\">exceeded</span>\n\n  <span class=\"hljs-string\">/api/v1/analysis/run:</span>\n    <span class=\"hljs-attr\">post:</span>\n      <span class=\"hljs-attr\">summary:</span> <span class=\"hljs-string\">Trigger</span> <span class=\"hljs-string\">LLM</span> <span class=\"hljs-string\">analysis</span>\n      <span class=\"hljs-attr\">security:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">bearerAuth:</span> []\n      <span class=\"hljs-attr\">requestBody:</span>\n        <span class=\"hljs-attr\">content:</span>\n          <span class=\"hljs-attr\">application/json:</span>\n            <span class=\"hljs-attr\">schema:</span>\n              <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>\n              <span class=\"hljs-attr\">required:</span> [<span class=\"hljs-string\">questionnaire_id</span>]\n              <span class=\"hljs-attr\">properties:</span>\n                <span class=\"hljs-attr\">questionnaire_id:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">format:</span> <span class=\"hljs-string\">uuid</span>}\n                <span class=\"hljs-attr\">analysis_types:</span>\n                  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">array</span>\n                  <span class=\"hljs-attr\">items:</span>\n                    <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>\n                    <span class=\"hljs-attr\">enum:</span> [<span class=\"hljs-string\">thematic</span>, <span class=\"hljs-string\">clusters</span>, <span class=\"hljs-string\">contradictions</span>, <span class=\"hljs-string\">insights</span>, <span class=\"hljs-string\">recommendations</span>]\n      <span class=\"hljs-attr\">responses:</span>\n        <span class=\"hljs-attr\">'202':</span>\n          <span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">Accepted</span> <span class=\"hljs-string\">(job</span> <span class=\"hljs-string\">queued)</span>\n          <span class=\"hljs-attr\">content:</span>\n            <span class=\"hljs-attr\">application/json:</span>\n              <span class=\"hljs-attr\">schema:</span>\n                <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>\n                <span class=\"hljs-attr\">properties:</span>\n                  <span class=\"hljs-attr\">job_id:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>}\n                  <span class=\"hljs-attr\">estimated_duration_ms:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">integer</span>}\n\n<span class=\"hljs-attr\">components:</span>\n  <span class=\"hljs-attr\">schemas:</span>\n    <span class=\"hljs-attr\">Questionnaire:</span>\n      <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>\n      <span class=\"hljs-attr\">properties:</span>\n        <span class=\"hljs-attr\">id:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">format:</span> <span class=\"hljs-string\">uuid</span>}\n        <span class=\"hljs-attr\">title:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>}\n        <span class=\"hljs-attr\">status:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">enum:</span> [<span class=\"hljs-string\">draft</span>, <span class=\"hljs-string\">review</span>, <span class=\"hljs-string\">published</span>, <span class=\"hljs-string\">closed</span>, <span class=\"hljs-string\">analyzed</span>]}\n        <span class=\"hljs-attr\">settings:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>}\n        <span class=\"hljs-attr\">created_at:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">format:</span> <span class=\"hljs-string\">date-time</span>}\n        <span class=\"hljs-attr\">groups:</span>\n          <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">array</span>\n          <span class=\"hljs-attr\">items:</span>\n            <span class=\"hljs-string\">$ref:</span> <span class=\"hljs-string\">'#/components/schemas/QuestionGroup'</span>\n    \n    <span class=\"hljs-attr\">QuestionGroup:</span>\n      <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>\n      <span class=\"hljs-attr\">properties:</span>\n        <span class=\"hljs-attr\">id:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">format:</span> <span class=\"hljs-string\">uuid</span>}\n        <span class=\"hljs-attr\">title:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>}\n        <span class=\"hljs-attr\">order_index:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">integer</span>}\n        <span class=\"hljs-attr\">questions:</span>\n          <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">array</span>\n          <span class=\"hljs-attr\">items:</span>\n            <span class=\"hljs-string\">$ref:</span> <span class=\"hljs-string\">'#/components/schemas/Question'</span>\n    \n    <span class=\"hljs-attr\">Question:</span>\n      <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>\n      <span class=\"hljs-attr\">properties:</span>\n        <span class=\"hljs-attr\">id:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">format:</span> <span class=\"hljs-string\">uuid</span>}\n        <span class=\"hljs-attr\">text:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">object</span>}\n        <span class=\"hljs-attr\">type:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">string</span>, <span class=\"hljs-attr\">enum:</span> [<span class=\"hljs-string\">text</span>, <span class=\"hljs-string\">textarea</span>, <span class=\"hljs-string\">number</span>, <span class=\"hljs-string\">scale</span>, <span class=\"hljs-string\">single_choice</span>, <span class=\"hljs-string\">multiple_choice</span>]}\n        <span class=\"hljs-attr\">required:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">boolean</span>}\n        <span class=\"hljs-attr\">order_index:</span> {<span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">integer</span>}\n\n  <span class=\"hljs-attr\">securitySchemes:</span>\n    <span class=\"hljs-attr\">bearerAuth:</span>\n      <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">http</span>\n      <span class=\"hljs-attr\">scheme:</span> <span class=\"hljs-string\">bearer</span>\n      <span class=\"hljs-attr\">bearerFormat:</span> <span class=\"hljs-string\">JWT</span>\n</code></pre>","id":"44514"}],"dangerouslySetInnerHTML":"<h3>8.3 API Contracts (OpenAPI fragment)</h3>","id":"44472"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<pre><code class=\"hljs language-gherkin\">Feature: Questionnaire Creation from PDF Template\n\nScenario: Sociologist imports PDF template\n  Given I am logged in as \"Sociologist-Editor\"\n  When I navigate to /cms/questionnaires/new\n  And I select \"Szablon z PDF\"\n  And I choose template \"NASZA (NIE)UTOPIA\"\n  Then I should see questionnaire created with:\n    | Field | Value |\n    | Sections | 4 |\n    | Questions | 23 |\n    | Status | draft |\n\nScenario: Participant fills questionnaire\n  Given questionnaire \"NASZA (NIE)UTOPIA\" is published\n  And I am enrolled in workshop \"Budowanie WspÃ³lnoty\"\n  When I navigate to /questionnaires/:id/fill\n  Then I should see all 23 questions visible on one page\n  And I can scroll between sections\n  When I type answer in \"Kluczowe wartoÅ›ci\" field\n  Then answer is auto-saved within 30 seconds\n  When I click \"WyÅ›lij\"\n  Then I should see confirmation \"Odpowiedzi wysÅ‚ane\"\n  And my responses status is \"submitted\"\n\nScenario: Analysis triggered and completed\n  Given questionnaire has 50 submitted responses\n  When I trigger analysis with types [\"thematic\", \"insights\"]\n  Then job is queued with job_id\n  And within 5 minutes I receive results:\n    | Analysis Type | Min Items |\n    | thematic | 3 themes |\n    | insights | 5 insights |\n  And no PII is present in results\n</code></pre>","id":"48739"}],"dangerouslySetInnerHTML":"<h3>8.4 Przypadki testowe (przykÅ‚ady)</h3>","id":"48700"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ WorkshopsAI - Analytics Dashboard                      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                         â”‚\nâ”‚ [Ostatnie 30 dni â–¼]                          [Filtruj] â”‚\nâ”‚                                                         â”‚\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\nâ”‚ â”‚ Kwestionariuszeâ”‚ â”‚   Odpowiedzi  â”‚ â”‚    Analizy    â”‚ â”‚\nâ”‚ â”‚      12        â”‚ â”‚      348      â”‚ â”‚      8        â”‚ â”‚\nâ”‚ â”‚  â†‘ 20% vs m-1  â”‚ â”‚  â†‘ 45% vs m-1 â”‚ â”‚  â†‘ 100% (NEW) â”‚ â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\nâ”‚                                                         â”‚\nâ”‚ Completion Rate                                         â”‚\nâ”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 72% (target: >70%)            â”‚\nâ”‚                                                         â”‚\nâ”‚ Avg Response Time: 18 min (target: &#x3C;30 min)            â”‚\nâ”‚                                                         â”‚\nâ”‚ Top 5 Kwestionariuszy:                                 â”‚\nâ”‚ 1. NASZA (NIE)UTOPIA - 120 responses                   â”‚\nâ”‚ 2. Projekt XYZ - 85 responses                          â”‚\nâ”‚ 3. WspÃ³lnota ABC - 67 responses                        â”‚\nâ”‚                                                         â”‚\nâ”‚ API Performance (p95):                                  â”‚\nâ”‚ â€¢ GET /questionnaires: 180ms âœ“                         â”‚\nâ”‚ â€¢ POST /responses: 320ms âœ“                             â”‚\nâ”‚ â€¢ POST /analysis/run: 4200ms âœ“                         â”‚\nâ”‚                                                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>","id":"50046"},{"children":[],"dangerouslySetInnerHTML":"<hr>","id":"51717"}],"dangerouslySetInnerHTML":"<h3>8.5 KPI Dashboard mockup</h3>","id":"50016"}],"dangerouslySetInnerHTML":"<h2>8. ARTEFAKTY</h2>","id":"43486"},{"children":[{"children":[],"dangerouslySetInnerHTML":"<p><strong>Co zostanie zbudowane:</strong></p>","id":"51739"},{"children":[{"dangerouslySetInnerHTML":"<p><strong>CMS dla kwestionariuszy</strong> - kreator bez kodu, import z PDF, RBAC, wersjonowanie</p>","id":"51785"},{"dangerouslySetInnerHTML":"<p><strong>Frontend uczestnika</strong> - single-page view wszystkich pytaÅ„, autosave, mobile-first</p>","id":"51870"},{"dangerouslySetInnerHTML":"<p><strong>LLM analysis engine</strong> - anonimizacja, embeddings, 5 typÃ³w analiz, raporty</p>","id":"51957"}],"dangerouslySetInnerHTML":"<p>3 nowe moduÅ‚y:</p>","id":"51767"},{"children":[{"dangerouslySetInnerHTML":"<p>Wszystkie pytania widoczne jednoczeÅ›nie (zgodnie z PDF)</p>","id":"52059"},{"dangerouslySetInnerHTML":"<p>Szablon PDF jako JSON fixture (1-click import)</p>","id":"52117"},{"dangerouslySetInnerHTML":"<p>Zero-PII architecture dla LLM</p>","id":"52166"},{"dangerouslySetInnerHTML":"<p>RAG-based insights (vector search)</p>","id":"52198"},{"dangerouslySetInnerHTML":"<p>Tree-based prompt evaluation (z digest)</p>","id":"52235"}],"dangerouslySetInnerHTML":"<p><strong>GÅ‚Ã³wne innowacje:</strong></p>","id":"52034"},{"children":[],"dangerouslySetInnerHTML":"<p><strong>Timeline:</strong> 4 tygodnie<br>\n<strong>Risk:</strong> Integracja LLM (mitigacja: fallback models + retry logic)<br>\n<strong>Success metric:</strong> Socjolog tworzy kwestionariusz &#x3C;15 min, analiza zwraca 3+ tematy + 5+ recommendations</p>","id":"52276"},{"children":[],"dangerouslySetInnerHTML":"<p>Audyt zakoÅ„czony. Wszystkie artefakty dostarczone.</p>","id":"52480"}],"dangerouslySetInnerHTML":"<h2>PODSUMOWANIE</h2>","id":"51722"}]}};
              (function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".mind-elixir{--gap: 30px;--root-radius: 30px;--main-radius: 20px;--root-color: #ffffff;--root-bgcolor: #4c4f69;--root-border-color: rgba(0, 0, 0, 0);--main-color: #444446;--main-bgcolor: #ffffff;--topic-padding: 3px;--color: #777777;--bgcolor: #f6f6f6;--selected: #4dc4ff;--panel-color: #444446;--panel-bgcolor: #ffffff;--panel-border-color: #eaeaea;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}.mind-elixir .hyper-link{text-decoration:none;margin-left:.3em}.map-container{-webkit-user-select:none;user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container *{box-sizing:border-box}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .selected{outline:2px solid var(--selected);outline-offset:1px}.map-container .lhs{direction:rtl}.map-container .lhs me-tpc{direction:ltr}.map-container .map-canvas{height:20000px;width:20000px;position:relative;-webkit-user-select:none;user-select:none;transition:transform .3s;transform:scale(1);background-color:var(--bgcolor)}.map-container .map-canvas me-nodes{position:absolute;display:flex;justify-content:center;align-items:center;height:fit-content;width:fit-content}.map-container .map-canvas me-root{position:relative}.map-container .map-canvas me-root me-tpc{display:block;font-size:25px;color:var(--root-color);padding:10px var(--gap);border-radius:var(--root-radius);border:var(--root-border-color) 2px solid;white-space:pre-wrap;background-color:var(--root-bgcolor)}.map-container me-main>me-wrapper{position:relative;margin:45px 65px}.map-container me-main>me-wrapper>me-parent{margin:10px;padding:0}.map-container me-main>me-wrapper>me-parent>me-tpc{border-radius:var(--main-radius);background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);padding:8px 25px}.map-container me-wrapper{display:block;pointer-events:none;width:fit-content}.map-container me-children,.map-container me-parent{display:inline-block;vertical-align:middle}.map-container me-parent{position:relative;cursor:pointer;padding:6px var(--gap);margin-top:10px}.map-container me-parent me-tpc{position:relative;display:block;border-radius:3px;color:var(--color);pointer-events:all;max-width:35em;white-space:pre-wrap;padding:var(--topic-padding)}.map-container me-parent me-tpc .insert-preview{position:absolute;width:100%;left:0;z-index:9}.map-container me-parent me-tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container me-parent me-tpc .before{height:14px;top:-14px}.map-container me-parent me-tpc .in{height:100%;top:0}.map-container me-parent me-tpc .after{height:14px;bottom:-14px}.map-container me-parent me-epd{position:absolute;height:18px;width:18px;opacity:.8;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NDcxNzI0MiIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNDgwaC0xMzguNjY2NjY3VjM0MS4zMzMzMzNjMC0xNy4wNjY2NjctMTQuOTMzMzMzLTMyLTMyLTMycy0zMiAxNC45MzMzMzMtMzIgMzJ2MTM4LjY2NjY2N0gzNDEuMzMzMzMzYy0xNy4wNjY2NjcgMC0zMiAxNC45MzMzMzMtMzIgMzJzMTQuOTMzMzMzIDMyIDMyIDMyaDEzOC42NjY2NjdWNjgyLjY2NjY2N2MwIDE3LjA2NjY2NyAxNC45MzMzMzMgMzIgMzIgMzJzMzItMTQuOTMzMzMzIDMyLTMydi0xMzguNjY2NjY3SDY4Mi42NjY2NjdjMTcuMDY2NjY3IDAgMzItMTQuOTMzMzMzIDMyLTMycy0xNC45MzMzMzMtMzItMzItMzJ6Ij48L3BhdGg+Cjwvc3ZnPg==);background-repeat:no-repeat;background-size:contain;background-position:center;pointer-events:all;z-index:9}.map-container me-parent me-epd.minus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NTU2NDk4NSIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNTQ0SDM0MS4zMzMzMzNjLTE3LjA2NjY2NyAwLTMyLTE0LjkzMzMzMy0zMi0zMnMxNC45MzMzMzMtMzIgMzItMzJoMzQxLjMzMzMzNGMxNy4wNjY2NjcgMCAzMiAxNC45MzMzMzMgMzIgMzJzLTE0LjkzMzMzMyAzMi0zMiAzMnoiPjwvcGF0aD4KPC9zdmc+)!important;transition:opacity .3s;opacity:0}.map-container me-parent me-epd.minus:hover{opacity:.8}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .lines,.map-container .summary,.map-container .subLines,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller,.map-container .summary{pointer-events:none}.map-container .topiclinks text,.map-container .linkcontroller text,.map-container .summary text{pointer-events:all}.map-container .topiclinks .selected,.map-container .linkcontroller .selected,.map-container .summary .selected{pointer-events:none}.map-container .lines,.map-container .subLines{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.map-container #input-box{position:absolute;top:0;left:0;width:max-content;max-width:35em;z-index:11;direction:ltr;-webkit-user-select:auto;user-select:auto;pointer-events:auto;background-color:var(--bgcolor)}.map-container me-tpc>*{pointer-events:none}.map-container me-tpc>a{pointer-events:auto}.map-container me-tpc>img{display:block;margin-bottom:8px;object-fit:cover}.map-container me-tpc>.text{display:inline-block}.map-container .circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#757575;border:2px solid #ffffff;cursor:pointer}.map-container .tags{direction:ltr}.map-container .tags span{display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 4px 0 0;font-size:12px;line-height:1.3em}.map-container .icons{display:inline-block;direction:ltr;margin-left:5px}.map-container .icons span{display:inline-block;line-height:1.3em}.map-container .mind-elixir-ghost{position:fixed;top:-100%;left:-100%;box-sizing:content-box;opacity:.5;background-color:#f6f6f6;max-width:200px;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:8px 16px;border-radius:6px;border:#666666 2px solid}.map-container .selection-area{background:#4f90f22d;border:1px solid #4f90f2}.mind-elixir .context-menu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}.mind-elixir .context-menu .menu-list{position:fixed;list-style:none;margin:0;padding:0;color:var(--panel-color);box-shadow:0 12px 15px #0003;border-radius:5px;overflow:hidden}.mind-elixir .context-menu .menu-list li{min-width:200px;overflow:hidden;white-space:nowrap;padding:6px 10px;background:var(--panel-bgcolor);border-bottom:1px solid var(--panel-border-color);cursor:pointer}.mind-elixir .context-menu .menu-list li span{line-height:20px}.mind-elixir .context-menu .menu-list li a{color:#333;text-decoration:none}.mind-elixir .context-menu .menu-list li.disabled{display:none}.mind-elixir .context-menu .menu-list li:hover{filter:brightness(.95)}.mind-elixir .context-menu .menu-list li:last-child{border-bottom:0}.mind-elixir .context-menu .menu-list li span:last-child{float:right}.mind-elixir .context-menu .key{font-size:10px;background-color:#f1f1f1;color:#333;padding:2px 5px;border-radius:3px}.mind-elixir .tips{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:var(--panel-color);font-weight:bolder}.mind-elixir-toolbar{font-family:iconfont;position:absolute;color:var(--panel-color);background:var(--panel-bgcolor);padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}.mind-elixir-toolbar svg{display:inline-block}.mind-elixir-toolbar span:active{opacity:.5}.mind-elixir-toolbar.rb{right:20px;bottom:20px}.mind-elixir-toolbar.rb span+span{margin-left:10px}.mind-elixir-toolbar.lt{font-size:20px;left:20px;top:20px}.mind-elixir-toolbar.lt span{display:block}.mind-elixir-toolbar.lt span+span{margin-top:10px}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();(function(e){var t,n,i,o,r,s,l='<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="" ></path></symbol></svg>',a=(a=document.getElementsByTagName("script"))[a.length-1].getAttribute("data-injectcss");if(a&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch{}}function d(){r||(r=!0,i())}t=function(){var c,u,p,f;(f=document.createElement("div")).innerHTML=l,l=null,(p=f.getElementsByTagName("svg")[0])&&(p.setAttribute("aria-hidden","true"),p.style.position="absolute",p.style.width=0,p.style.height=0,p.style.overflow="hidden",c=p,(u=document.body).firstChild?(f=c,(p=u.firstChild).parentNode.insertBefore(f,p)):u.appendChild(c))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(i=t,o=e.document,r=!1,(s=function(){try{o.documentElement.doScroll("left")}catch{return void setTimeout(s,50)}d()})(),o.onreadystatechange=function(){o.readyState=="complete"&&(o.onreadystatechange=null,d())})})(window);var j=0,D=1,se=2,Fe={name:"Latte",type:"light",palette:["#dd7878","#ea76cb","#8839ef","#e64553","#fe640b","#df8e1d","#40a02b","#209fb5","#1e66f5","#7287fd"],cssVar:{"--gap":"30px","--main-color":"#444446","--main-bgcolor":"#ffffff","--color":"#777777","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}},Ve={name:"Dark",type:"dark",palette:["#848FA0","#748BE9","#D2F9FE","#4145A5","#789AFA","#706CF4","#EF987F","#775DD5","#FCEECF","#DA7FBC"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#4c4f69","--color":"#cccccc","--bgcolor":"#252526","--panel-color":"#ffffff","--panel-bgcolor":"#2d3748","--panel-border-color":"#696969"}};function ne(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}var ie=function(e,t){if(t.id===e)return t;if(t.children&&t.children.length){for(let n=0;n<t.children.length;n++){let i=ie(e,t.children[n]);if(i)return i}return null}else return null},H=(e,t)=>{if(e.parent=t,e.children)for(let n=0;n<e.children.length;n++)H(e.children[n],e)};function fe(e){if(e.id=U(),e.children)for(let t=0;t<e.children.length;t++)fe(e.children[t])}var dt=(e,t)=>{let n=Date.now();return function(...i){Date.now()-n<t||(e(...i),n=Date.now())}};function We(e,t,n,i){let o=i-t,r=e-n,s=Math.atan(Math.abs(o)/Math.abs(r))/3.14*180;r<0&&o>0&&(s=180-s),r<0&&o<0&&(s=180+s),r>0&&o<0&&(s=360-s);let l=15,a=30,d=s+a,c=s-a;return{x1:n+Math.cos(Math.PI*d/180)*l,y1:i-Math.sin(Math.PI*d/180)*l,x2:n+Math.cos(Math.PI*c/180)*l,y2:i-Math.sin(Math.PI*c/180)*l}}function U(){return(new Date().getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}var ht=function(){let e=U();return{topic:this.newTopicName,id:e}};function ge(e){return JSON.parse(JSON.stringify(e,(t,n)=>{if(t!=="parent")return n}))}var O=(e,t)=>{let n=0,i=0;for(;t&&t!==e;)n+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{offsetLeft:n,offsetTop:i}},M=(e,t)=>{for(let n in t)e.setAttribute(n,t[n])},he=e=>e?e.tagName==="ME-TPC":!1,le=e=>e.filter(t=>{for(let n=0;n<e.length;n++)if(t!==e[n]&&e[n].parentElement.parentElement.contains(t))return!1;return!0}),L={moved:!1,mousedown:!1,onMove(e,t){if(this.mousedown){this.moved=!0;let n=e.movementX,i=e.movementY;t.scrollTo(t.scrollLeft-n,t.scrollTop-i)}},clear(){setTimeout(()=>{this.moved=!1,this.mousedown=!1},0)}};function pt(e){e.map.addEventListener("click",t=>{var n,i;if(t.button!==0)return;if((n=e.helper1)!=null&&n.moved){e.helper1.clear();return}if((i=e.helper2)!=null&&i.moved){e.helper2.clear();return}if(L.moved){L.clear();return}e.clearSelection();let o=t.target;if(o.tagName==="ME-EPD")e.expandNode(o.previousSibling);else if(he(o))e.selectNode(o,!1,t);else if(e.editable)o.tagName==="text"?o.dataset.type==="custom-link"?e.selectArrow(o.parentElement):e.selectSummary(o.parentElement):o.className;else return}),e.map.addEventListener("dblclick",t=>{if(!e.editable)return;let n=t.target;he(n)?e.beginEdit(n):n.tagName==="text"&&(n.dataset.type==="custom-link"?e.editArrowLabel(n.parentElement):e.editSummary(n.parentElement))}),e.map.addEventListener("mousemove",t=>{t.target.contentEditable!=="true"&&L.onMove(t,e.container)}),e.map.addEventListener("mousedown",t=>{let n=e.mouseSelectionButton===0?2:0;t.button===n&&t.target.contentEditable!=="true"&&(L.moved=!1,L.mousedown=!0)}),e.map.addEventListener("mouseleave",t=>{let n=e.mouseSelectionButton===0?2:0;t.button===n&&L.clear()}),e.map.addEventListener("mouseup",t=>{let n=e.mouseSelectionButton===0?2:0;t.button===n&&L.clear()})}var ut={create(){return{handlers:{},showHandler:function(){},addListener:function(e,t){this.handlers[e]===void 0&&(this.handlers[e]=[]),this.handlers[e].push(t)},fire:function(e,...t){if(this.handlers[e]instanceof Array){let n=this.handlers[e];for(let i=0;i<n.length;i++)n[i](...t)}},removeListener:function(e,t){if(!this.handlers[e])return;let n=this.handlers[e];if(!t)n.length=0;else if(n.length)for(let i=0;i<n.length;i++)n[i]===t&&this.handlers[e].splice(i,1)}}}},C=(e=>(e.LHS="lhs",e.RHS="rhs",e))(C||{}),oe=document,mt=function(){this.nodes.innerHTML="";let e=this.createTopic(this.nodeData);ve(e,this.nodeData),e.draggable=!1;let t=oe.createElement("me-root");t.appendChild(e);let n=this.nodeData.children||[];if(this.direction===se){let i=0,o=0;n.map(r=>{r.direction===j?i+=1:r.direction===D?o+=1:i<=o?(r.direction=j,i+=1):(r.direction=D,o+=1)})}ft(this,n,t)},ft=function(e,t,n){let i=oe.createElement("me-main");i.className=C.LHS;let o=oe.createElement("me-main");o.className=C.RHS;for(let r=0;r<t.length;r++){let s=t[r],{grp:l}=e.createWrapper(s);e.direction===se?s.direction===j?i.appendChild(l):o.appendChild(l):e.direction===j?i.appendChild(l):o.appendChild(l)}e.nodes.appendChild(i),e.nodes.appendChild(n),e.nodes.appendChild(o),e.nodes.appendChild(e.lines)},gt=function(e,t){let n=oe.createElement("me-children");for(let i=0;i<t.length;i++){let o=t[i],{grp:r}=e.createWrapper(o);n.appendChild(r)}return n},_=document,N=(e,t)=>{let n=(t?t.mindElixirBox:_).querySelector(`[data-nodeid=me${e}]`);if(!n)throw new Error(`FindEle: Node ${e} not found, maybe it's collapsed.`);return n},ve=function(e,t){if(e.innerHTML="",t.style&&(e.style.color=t.style.color||"",e.style.background=t.style.background||"",e.style.fontSize=t.style.fontSize+"px",e.style.fontWeight=t.style.fontWeight||"normal"),t.dangerouslySetInnerHTML){e.innerHTML=t.dangerouslySetInnerHTML;return}if(t.image){let n=t.image;if(n.url&&n.width&&n.height){let i=_.createElement("img");i.src=n.url,i.style.width=n.width+"px",i.style.height=n.height+"px",n.fit&&(i.style.objectFit=n.fit),e.appendChild(i),e.image=i}}else e.image&&(e.image=void 0);{let n=_.createElement("span");n.className="text",n.textContent=t.topic,e.appendChild(n),e.text=n}if(t.hyperLink){let n=_.createElement("a");n.className="hyper-link",n.target="_blank",n.innerText="\u{1F517}",n.href=t.hyperLink,e.appendChild(n),e.link=n}else e.link&&(e.link=void 0);if(t.icons&&t.icons.length){let n=_.createElement("span");n.className="icons",n.innerHTML=t.icons.map(i=>`<span>${ne(i)}</span>`).join(""),e.appendChild(n),e.icons=n}else e.icons&&(e.icons=void 0);if(t.tags&&t.tags.length){let n=_.createElement("div");n.className="tags",n.innerHTML=t.tags.map(i=>`<span>${ne(i)}</span>`).join(""),e.appendChild(n),e.tags=n}else e.tags&&(e.tags=void 0)},vt=function(e,t){let n=_.createElement("me-wrapper"),{p:i,tpc:o}=this.createParent(e);if(n.appendChild(i),!t&&e.children&&e.children.length>0){let r=be(e.expanded);if(i.appendChild(r),e.expanded!==!1){let s=gt(this,e.children);n.appendChild(s)}}return{grp:n,top:i,tpc:o}},bt=function(e){let t=_.createElement("me-parent"),n=this.createTopic(e);return ve(n,e),t.appendChild(n),{p:t,tpc:n}},yt=function(e){let t=_.createElement("me-children");return t.append(...e),t},xt=function(e){let t=_.createElement("me-tpc");return t.nodeObj=e,t.dataset.nodeid="me"+e.id,t.draggable=this.draggable,t};function qe(e){let t=_.createRange();t.selectNodeContents(e);let n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}var wt=function(e){if(!e)return;let t=_.createElement("div"),n=e.text.textContent;e.appendChild(t),t.id="input-box",t.textContent=n,t.contentEditable="true",t.spellcheck=!1;let i=getComputedStyle(e);t.style.cssText=`min-width:${e.offsetWidth-8}px;
  color:${i.color};
  padding:${i.padding};
  margin:${i.margin};
  font:${i.font};
  background-color:${i.backgroundColor!=="rgba(0, 0, 0, 0)"&&i.backgroundColor};
  border-radius:${i.borderRadius};`,this.direction===j&&(t.style.right="0"),t.focus(),qe(t),this.bus.fire("operation",{name:"beginEdit",obj:e.nodeObj}),t.addEventListener("keydown",o=>{o.stopPropagation();let r=o.key;if(r==="Enter"||r==="Tab"){if(o.shiftKey)return;o.preventDefault(),t.blur(),this.map.focus()}}),t.addEventListener("blur",()=>{var o;if(!t)return;let r=e.nodeObj,s=((o=t.textContent)==null?void 0:o.trim())||"";s===""?r.topic=n:r.topic=s,t.remove(),s!==n&&(e.text.textContent=r.topic,this.linkDiv(),this.bus.fire("operation",{name:"finishEdit",obj:r,origin:n}))})},be=function(e){let t=_.createElement("me-epd");return t.expanded=e!==!1,t.className=e!==!1?"minus":"",t},F=document,V="http://www.w3.org/2000/svg",Ke=function(e,t,n){let i=F.createElementNS(V,"path");return M(i,{d:e,stroke:t||"#666",fill:"none","stroke-width":n}),i},K=function(e){let t=F.createElementNS(V,"svg");return t.setAttribute("class",e),t.setAttribute("overflow","visible"),t},Se=function(){let e=F.createElementNS(V,"line");return e.setAttribute("stroke","#bbb"),e.setAttribute("fill","none"),e.setAttribute("stroke-width","2"),e},Mt=function(e,t){let n={stroke:"rgb(235, 95, 82)",fill:"none","stroke-linecap":"cap","stroke-width":"2"},i=F.createElementNS(V,"g"),o=F.createElementNS(V,"path"),r=F.createElementNS(V,"path");return M(r,{d:t,...n}),M(o,{d:e,...n,"stroke-dasharray":"8,2"}),i.appendChild(o),i.appendChild(r),i},Ue=function(e,t,n){if(!t)return;let i=document.createElement("div");e.nodes.appendChild(i);let o=t.innerHTML;i.id="input-box",i.textContent=o,i.contentEditable="true",i.spellcheck=!1;let r=t.getBBox();i.style.cssText=`
    min-width:${Math.max(88,r.width)}px;
    position:absolute;
    left:${r.x}px;
    top:${r.y}px;
    padding: 2px 4px;
    margin: -2px -4px; 
  `,i.focus(),qe(i),i.addEventListener("keydown",s=>{s.stopPropagation();let l=s.key;if(l==="Enter"||l==="Tab"){if(s.shiftKey)return;s.preventDefault(),i.blur(),e.map.focus()}}),i.addEventListener("blur",()=>{i&&n(i)})},Nt=function(e){let t=this.map.querySelector("me-root"),n=t.offsetTop,i=t.offsetLeft,o=t.offsetWidth,r=t.offsetHeight;this.nodes.style.top=`${1e4-this.nodes.offsetHeight/2}px`,this.nodes.style.left=`${1e4-i-o/2}px`;let s=this.map.querySelectorAll("me-main > me-wrapper");this.lines.innerHTML="";for(let l=0;l<s.length;l++){let a=s[l],d=a.querySelector("me-tpc"),{offsetLeft:c,offsetTop:u}=O(this.nodes,d),p=d.offsetWidth,f=d.offsetHeight,h=a.parentNode.className,g=this.generateMainBranch({pT:n,pL:i,pW:o,pH:r,cT:u,cL:c,cW:p,cH:f,direction:h,containerHeight:this.nodes.offsetHeight}),m=this.theme.palette,v=d.nodeObj.branchColor||m[l%m.length];d.style.borderColor=v,this.lines.appendChild(Ke(g,v,"3"));let b=a.children[0].children[1];if(b&&(b.style.top=(b.parentNode.offsetHeight-b.offsetHeight)/2+"px",h===C.LHS?b.style.left="-10px":b.style.right="-10px"),e&&e!==a)continue;let y=K("subLines"),x=a.lastChild;x.tagName==="svg"&&x.remove(),a.appendChild(y),Ze(this,y,v,a,h,!0)}this.renderArrow(),this.renderSummary(),this.bus.fire("linkDiv")},Ze=function(e,t,n,i,o,r){let s=i.firstChild,l=i.children[1].children;if(l.length===0)return;let a=s.offsetTop,d=s.offsetLeft,c=s.offsetWidth,u=s.offsetHeight;for(let p=0;p<l.length;p++){let f=l[p],h=f.firstChild,g=h.offsetTop,m=h.offsetLeft,v=h.offsetWidth,b=h.offsetHeight,y=h.firstChild.nodeObj.branchColor||n,x=e.generateSubBranch({pT:a,pL:d,pW:c,pH:u,cT:g,cL:m,cW:v,cH:b,direction:o,isFirst:r});t.appendChild(Ke(x,y,"2"));let w=h.children[1];if(w){if(w.style.bottom=-(w.offsetHeight/2)+"px",o===C.LHS?w.style.left="10px":o===C.RHS&&(w.style.right="10px"),!w.expanded)continue}else continue;Ze(e,t,y,f,o)}},Le={addChild:"\u63D2\u5165\u5B50\u8282\u70B9",addParent:"\u63D2\u5165\u7236\u8282\u70B9",addSibling:"\u63D2\u5165\u540C\u7EA7\u8282\u70B9",removeNode:"\u5220\u9664\u8282\u70B9",focus:"\u4E13\u6CE8",cancelFocus:"\u53D6\u6D88\u4E13\u6CE8",moveUp:"\u4E0A\u79FB",moveDown:"\u4E0B\u79FB",link:"\u8FDE\u63A5",clickTips:"\u8BF7\u70B9\u51FB\u76EE\u6807\u8282\u70B9",summary:"\u6458\u8981"},_e={cn:Le,zh_CN:Le,zh_TW:{addChild:"\u63D2\u5165\u5B50\u7BC0\u9EDE",addParent:"\u63D2\u5165\u7236\u7BC0\u9EDE",addSibling:"\u63D2\u5165\u540C\u7D1A\u7BC0\u9EDE",removeNode:"\u522A\u9664\u7BC0\u9EDE",focus:"\u5C08\u6CE8",cancelFocus:"\u53D6\u6D88\u5C08\u6CE8",moveUp:"\u4E0A\u79FB",moveDown:"\u4E0B\u79FB",link:"\u9023\u63A5",clickTips:"\u8ACB\u9EDE\u64CA\u76EE\u6A19\u7BC0\u9EDE",summary:"\u6458\u8981"},en:{addChild:"Add child",addParent:"Add parent",addSibling:"Add sibling",removeNode:"Remove node",focus:"Focus Mode",cancelFocus:"Cancel Focus Mode",moveUp:"Move up",moveDown:"Move down",link:"Link",clickTips:"Please click the target node",summary:"Summary"},ru:{addChild:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0434\u043E\u0447\u0435\u0440\u043D\u0438\u0439 \u044D\u043B\u0435\u043C\u0435\u043D\u0442",addParent:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0440\u043E\u0434\u0438\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0439 \u044D\u043B\u0435\u043C\u0435\u043D\u0442",addSibling:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u0430 \u044D\u0442\u043E\u043C \u0443\u0440\u043E\u0432\u043D\u0435",removeNode:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0443\u0437\u0435\u043B",focus:"\u0420\u0435\u0436\u0438\u043C \u0444\u043E\u043A\u0443\u0441\u0438\u0440\u043E\u0432\u043A\u0438",cancelFocus:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0444\u043E\u043A\u0443\u0441\u0438\u0440\u043E\u0432\u043A\u0438",moveUp:"\u041F\u043E\u0434\u043D\u044F\u0442\u044C \u0432\u044B\u0448\u0435",moveDown:"\u041E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u043D\u0438\u0436\u0435",link:"\u0421\u0441\u044B\u043B\u043A\u0430",clickTips:"\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043D\u0430 \u0446\u0435\u043B\u0435\u0432\u043E\u0439 \u0443\u0437\u0435\u043B",summary:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},ja:{addChild:"\u5B50\u30CE\u30FC\u30C9\u3092\u8FFD\u52A0\u3059\u308B",addParent:"\u89AA\u30CE\u30FC\u30C9\u3092\u8FFD\u52A0\u3057\u307E\u3059",addSibling:"\u5144\u5F1F\u30CE\u30FC\u30C9\u3092\u8FFD\u52A0\u3059\u308B",removeNode:"\u30CE\u30FC\u30C9\u3092\u524A\u9664",focus:"\u96C6\u4E2D",cancelFocus:"\u96C6\u4E2D\u89E3\u9664",moveUp:"\u4E0A\u3078\u79FB\u52D5",moveDown:"\u4E0B\u3078\u79FB\u52D5",link:"\u30B3\u30CD\u30AF\u30C8",clickTips:"\u30BF\u30FC\u30B2\u30C3\u30C8\u30CE\u30FC\u30C9\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u304F\u3060\u3055\u3044",summary:"\u6982\u8981"},pt:{addChild:"Adicionar item filho",addParent:"Adicionar item pai",addSibling:"Adicionar item irmao",removeNode:"Remover item",focus:"Modo Foco",cancelFocus:"Cancelar Modo Foco",moveUp:"Mover para cima",moveDown:"Mover para baixo",link:"Link",clickTips:"Favor clicar no item alvo",summary:"Resumo"},it:{addChild:"Aggiungi figlio",addParent:"Aggiungi genitore",addSibling:"Aggiungi fratello",removeNode:"Rimuovi nodo",focus:"Modalit\xE0 Focus",cancelFocus:"Annulla Modalit\xE0 Focus",moveUp:"Sposta su",moveDown:"Sposta gi\xF9",link:"Collega",clickTips:"Si prega di fare clic sul nodo di destinazione",summary:"Unisci nodi"},es:{addChild:"Agregar hijo",addParent:"Agregar padre",addSibling:"Agregar hermano",removeNode:"Eliminar nodo",focus:"Modo Enfoque",cancelFocus:"Cancelar Modo Enfoque",moveUp:"Mover hacia arriba",moveDown:"Mover hacia abajo",link:"Enlace",clickTips:"Por favor haga clic en el nodo de destino",summary:"Resumen"},fr:{addChild:"Ajout enfant",addParent:"Ajout parent",addSibling:"Ajout voisin",removeNode:"Supprimer",focus:"Cibler",cancelFocus:"Retour",moveUp:"Monter",moveDown:"Descendre",link:"Lier",clickTips:"Cliquer sur le noeud cible",summary:"Annoter"},ko:{addChild:"\uC790\uC2DD \uCD94\uAC00",addParent:"\uBD80\uBAA8 \uCD94\uAC00",addSibling:"\uD615\uC81C \uCD94\uAC00",removeNode:"\uB178\uB4DC \uC0AD\uC81C",focus:"\uD3EC\uCEE4\uC2A4 \uBAA8\uB4DC",cancelFocus:"\uD3EC\uCEE4\uC2A4 \uBAA8\uB4DC \uCDE8\uC18C",moveUp:"\uC704\uB85C \uC774\uB3D9",moveDown:"\uC544\uB798\uB85C \uC774\uB3D9",link:"\uC5F0\uACB0",clickTips:"\uB300\uC0C1 \uB178\uB4DC\uB97C \uD074\uB9AD\uD558\uC2ED\uC2DC\uC624",summary:"\uC694\uC57D"}};function Et(e,t){let n=y=>{let x=document.createElement("div");return x.innerText=y,x.className="tips",x},i=(y,x,w)=>{let E=document.createElement("li");return E.id=y,E.innerHTML=`<span>${ne(x)}</span><span ${w?'class="key"':""}>${ne(w)}</span>`,E},o=_e[e.locale]?e.locale:"en",r=_e[o],s=i("cm-add_child",r.addChild,"Tab"),l=i("cm-add_parent",r.addParent,"Ctrl + Enter"),a=i("cm-add_sibling",r.addSibling,"Enter"),d=i("cm-remove_child",r.removeNode,"Delete"),c=i("cm-fucus",r.focus,""),u=i("cm-unfucus",r.cancelFocus,""),p=i("cm-up",r.moveUp,"PgUp"),f=i("cm-down",r.moveDown,"Pgdn"),h=i("cm-link",r.link,""),g=i("cm-summary",r.summary,""),m=document.createElement("ul");if(m.className="menu-list",m.appendChild(s),m.appendChild(l),m.appendChild(a),m.appendChild(d),(!t||t.focus)&&(m.appendChild(c),m.appendChild(u)),m.appendChild(p),m.appendChild(f),m.appendChild(g),(!t||t.link)&&m.appendChild(h),t&&t.extend)for(let y=0;y<t.extend.length;y++){let x=t.extend[y],w=i(x.name,x.name,x.key||"");m.appendChild(w),w.onclick=E=>{x.onclick(E)}}let v=document.createElement("div");v.className="context-menu",v.appendChild(m),v.hidden=!0,e.container.append(v);let b=!0;return e.container.oncontextmenu=function(y){if(y.preventDefault(),!e.editable||L.moved)return;let x=y.target;if(he(x)){x.parentElement.tagName==="ME-ROOT"?b=!0:b=!1,b?(c.className="disabled",p.className="disabled",f.className="disabled",l.className="disabled",a.className="disabled",d.className="disabled"):(c.className="",p.className="",f.className="",l.className="",a.className="",d.className=""),e.currentNodes||e.selectNode(x),v.hidden=!1,L.mousedown&&(L.mousedown=!1),m.style.top="",m.style.bottom="",m.style.left="",m.style.right="";let w=m.getBoundingClientRect(),E=m.offsetHeight,G=m.offsetWidth,I=y.clientY-w.top,$=y.clientX-w.left;E+I>window.innerHeight?(m.style.top="",m.style.bottom="0px"):(m.style.bottom="",m.style.top=I+15+"px"),G+$>window.innerWidth?(m.style.left="",m.style.right="0px"):(m.style.right="",m.style.left=$+10+"px")}},v.onclick=y=>{y.target===v&&(v.hidden=!0)},s.onclick=()=>{e.addChild(),v.hidden=!0},l.onclick=()=>{e.insertParent(),v.hidden=!0},a.onclick=()=>{b||(e.insertSibling("after"),v.hidden=!0)},d.onclick=()=>{b||(e.removeNode(),v.hidden=!0)},c.onclick=()=>{b||(e.focusNode(e.currentNode),v.hidden=!0)},u.onclick=()=>{e.cancelFocus(),v.hidden=!0},p.onclick=()=>{b||(e.moveUpNode(),v.hidden=!0)},f.onclick=()=>{b||(e.moveDownNode(),v.hidden=!0)},h.onclick=()=>{v.hidden=!0;let y=e.currentNode,x=n(r.clickTips);e.container.appendChild(x),e.map.addEventListener("click",w=>{w.preventDefault(),x.remove();let E=w.target;(E.parentElement.tagName==="ME-PARENT"||E.parentElement.tagName==="ME-ROOT")&&e.createArrow(y,E)},{once:!0})},g.onclick=()=>{v.hidden=!0,e.createSummary(),e.unselectNodes()},()=>{s.onclick=null,l.onclick=null,a.onclick=null,d.onclick=null,c.onclick=null,u.onclick=null,p.onclick=null,f.onclick=null,h.onclick=null,g.onclick=null,v.onclick=null,e.container.oncontextmenu=null}}var Ct=e=>{let t=e.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},St=e=>{let t=e.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},Lt=e=>{e.selectNode(e.map.querySelector("me-root>me-tpc"))},_t=function(e,t){let n=t.parentElement.parentElement.parentElement.previousSibling;if(n){let i=n.firstChild;e.selectNode(i)}},kt=function(e,t){let n=t.parentElement.nextSibling;if(n&&n.firstChild){let i=n.firstChild.firstChild.firstChild;e.selectNode(i)}},ke=function(e,t){var n,i;let o=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!o)return;let r=o.nodeObj,s=o.offsetParent.offsetParent.parentElement;r.parent?s.className===t?kt(e,o):(i=r.parent)!=null&&i.parent?_t(e,o):Lt(e):t===C.LHS?Ct(e):St(e)},je=function(e,t){var n;let i=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!i||!i.nodeObj.parent)return;let o=t+"Sibling",r=i.parentElement.parentElement[o];r&&e.selectNode(r.firstChild.firstChild)},X=function(e,t,n=1){switch(t){case"in":if(e.scaleVal*n>1.6)return;e.scale(e.scaleVal+=.2);break;case"out":if(e.scaleVal*n<.6)return;e.scale(e.scaleVal-=.2)}};function jt(e){let t=()=>{e.currentArrow?e.removeArrow():e.currentSummary?e.removeSummary(e.currentSummary.summaryObj.id):e.currentNode?e.removeNode():e.currentNodes&&e.removeNodes(e.currentNodes)},n={Enter:i=>{i.shiftKey?e.insertSibling("before"):i.ctrlKey?e.insertParent():e.insertSibling("after")},Tab:()=>{e.addChild()},F1:()=>{e.toCenter()},F2:()=>{e.beginEdit()},ArrowUp:i=>{if(i.altKey)e.moveUpNode();else{if(i.metaKey||i.ctrlKey)return e.initSide();je(e,"previous")}},ArrowDown:i=>{i.altKey?e.moveDownNode():je(e,"next")},ArrowLeft:i=>{if(i.metaKey||i.ctrlKey)return e.initLeft();ke(e,C.LHS)},ArrowRight:i=>{if(i.metaKey||i.ctrlKey)return e.initRight();ke(e,C.RHS)},PageUp:()=>e.moveUpNode(),PageDown:()=>{e.moveDownNode()},c:i=>{(i.metaKey||i.ctrlKey)&&(e.currentNode?e.waitCopy=[e.currentNode]:e.currentNodes&&(e.waitCopy=e.currentNodes))},x:i=>{(i.metaKey||i.ctrlKey)&&(e.currentNode?e.waitCopy=[e.currentNode]:e.currentNodes&&(e.waitCopy=e.currentNodes),t())},v:i=>{!e.waitCopy||!e.currentNode||(i.metaKey||i.ctrlKey)&&(e.waitCopy.length===1?e.copyNode(e.waitCopy[0],e.currentNode):e.copyNodes(e.waitCopy,e.currentNode))},"+":i=>{(i.metaKey||i.ctrlKey)&&X(e,"in")},"-":i=>{(i.metaKey||i.ctrlKey)&&X(e,"out")},0:i=>{(i.metaKey||i.ctrlKey)&&e.scale(1)},Delete:t,Backspace:t};e.map.onkeydown=i=>{if(i.preventDefault(),!e.editable||i.target!==i.currentTarget)return;let o=n[i.key];o&&o(i)},e.map.onwheel=i=>{if(i.ctrlKey||i.metaKey){i.preventDefault();let o=Math.abs(i.deltaY/100);i.deltaY<0?X(e,"in",o):e.scaleVal-.2>0&&X(e,"out",o),i.stopPropagation()}}}var pe=document,zt=function(e,t){if(!t)return ue(e),e;let n=e.querySelector(".insert-preview"),i=`insert-preview ${t} show`;return n||(n=pe.createElement("div"),e.appendChild(n)),n.className=i,e},ue=function(e){if(!e)return;let t=e.querySelectorAll(".insert-preview");for(let n of t||[])n.remove()},ze=function(e,t){for(let n of t){let i=n.parentElement.parentElement.contains(e);if(!(e&&e.tagName==="ME-TPC"&&e!==n&&!i&&e.nodeObj.parent))return!1}return!0},Tt=function(e){let t=document.createElement("div");return t.className="mind-elixir-ghost",e.map.appendChild(t),t};function At(e){let t=null,n=null,i=null,o=Tt(e),r=12;e.map.addEventListener("dragstart",s=>{var l,a;let d=s.target;if(d?.tagName!=="ME-TPC"){s.preventDefault();return}(l=e.currentNodes)!=null&&l.includes(d)||(e.unselectNodes(),e.selectNode(d)),e.currentNodes?(t=e.currentNodes,o.innerHTML=e.currentNodes.length+" nodes"):(t=[d],o.innerHTML=d.innerHTML);for(let c of t)c.parentElement.parentElement.style.opacity="0.5";(a=s.dataTransfer)==null||a.setDragImage(o,0,0),L.clear()}),e.map.addEventListener("dragend",async s=>{if(!t)return;for(let a of t)a.parentElement.parentElement.style.opacity="1";let l=s.target;l.style.opacity="",i&&(ue(i),n==="before"?e.moveNodeBefore(t,i):n==="after"?e.moveNodeAfter(t,i):n==="in"&&e.moveNodeIn(t,i),t=null)}),e.map.addEventListener("dragover",dt(function(s){if(!t)return;ue(i);let l=pe.elementFromPoint(s.clientX,s.clientY-r);if(ze(l,t)){i=l;let a=l.getBoundingClientRect().y;s.clientY>a+l.clientHeight?n="after":n="in"}else{let a=pe.elementFromPoint(s.clientX,s.clientY+r);if(ze(a,t)){i=a;let d=a.getBoundingClientRect().y;s.clientY<d?n="before":n="in"}else n=i=null}i&&zt(i,n)},100))}var Dt=function(e){return["createSummary","removeSummary","finishEditSummary"].includes(e.name)?{type:"summary",value:e.obj.id}:["createArrow","removeArrow","finishEditArrowLabel"].includes(e.name)?{type:"arrow",value:e.obj.id}:["removeNodes","copyNodes","moveNodeBefore","moveNodeAfter","moveNodeIn"].includes(e.name)?{type:"nodes",value:e.objs.map(t=>t.id)}:{type:"node",value:e.obj.id}};function Ht(e){let t=[],n=-1,i=e.getData();e.bus.addListener("operation",o=>{if(o.name==="beginEdit")return;t=t.slice(0,n+1);let r=e.getData();t.push({prev:i,currentObject:Dt(o),next:r}),i=r,n=t.length-1}),e.undo=function(){if(n>-1){let o=t[n];i=o.prev,e.refresh(o.prev);try{o.currentObject.type==="node"?e.selectNode(N(o.currentObject.value)):o.currentObject.type==="nodes"&&e.selectNodes(o.currentObject.value.map(r=>N(r)))}catch{}finally{n--}}},e.redo=function(){if(n<t.length-1){n++;let o=t[n];i=o.next,e.refresh(o.next),o.currentObject.type==="node"?e.selectNode(N(o.currentObject.value)):o.currentObject.type==="nodes"&&e.selectNodes(o.currentObject.value.map(r=>N(r)))}},e.map.addEventListener("keydown",o=>{(o.metaKey||o.ctrlKey)&&o.shiftKey&&o.key==="Z"?e.redo():(o.metaKey||o.ctrlKey)&&o.key==="z"&&e.undo()})}var B=(e,t)=>{let n=document.createElement("span");return n.id=e,n.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${t}"></use>
  </svg>`,n};function Ot(e){let t=document.createElement("div"),n=B("fullscreen","full"),i=B("toCenter","living"),o=B("zoomout","move"),r=B("zoomin","add"),s=document.createElement("span");return s.innerText="100%",t.appendChild(n),t.appendChild(i),t.appendChild(o),t.appendChild(r),t.className="mind-elixir-toolbar rb",n.onclick=()=>{e.mindElixirBox.requestFullscreen()},i.onclick=()=>{e.toCenter()},o.onclick=()=>{e.scaleVal<.6||e.scale(e.scaleVal-.2)},r.onclick=()=>{e.scaleVal>1.6||e.scale(e.scaleVal+.2)},t}function It(e){let t=document.createElement("div"),n=B("tbltl","left"),i=B("tbltr","right"),o=B("tblts","side");return t.appendChild(n),t.appendChild(i),t.appendChild(o),t.className="mind-elixir-toolbar lt",n.onclick=()=>{e.initLeft()},i.onclick=()=>{e.initRight()},o.onclick=()=>{e.initSide()},t}function $t(e){e.container.append(Ot(e)),e.container.append(It(e))}var me=class{constructor(){this._listeners=new Map,this.on=this.addEventListener,this.off=this.removeEventListener,this.emit=this.dispatchEvent}addEventListener(t,n){let i=this._listeners.get(t)??new Set;return this._listeners.set(t,i),i.add(n),this}removeEventListener(t,n){var i;return(i=this._listeners.get(t))==null||i.delete(n),this}dispatchEvent(t,...n){let i=!0;for(let o of this._listeners.get(t)??[])i=o(...n)!==!1&&i;return i}unbindAllListeners(){this._listeners.clear()}},Te=(e,t="px")=>typeof e=="number"?e+t:e,T=({style:e},t,n)=>{if(typeof t=="object")for(let[i,o]of Object.entries(t))o!==void 0&&(e[i]=Te(o));else n!==void 0&&(e[t]=Te(n))},Ae=(e=0,t=0,n=0,i=0)=>{let o={x:e,y:t,width:n,height:i,top:t,left:e,right:e+n,bottom:t+i};return{...o,toJSON:()=>JSON.stringify(o)}},Pt=e=>{let t,n=-1,i=!1;return{next:(...o)=>{t=o,i||(i=!0,n=requestAnimationFrame(()=>{e(...t),i=!1}))},cancel:()=>{cancelAnimationFrame(n),i=!1}}},De=(e,t,n="touch")=>{switch(n){case"center":{let i=t.left+t.width/2,o=t.top+t.height/2;return i>=e.left&&i<=e.right&&o>=e.top&&o<=e.bottom}case"cover":return t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom;case"touch":return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom}},Bt=()=>matchMedia("(hover: none), (pointer: coarse)").matches,Yt=()=>"safari"in window,Je=e=>(t,n,i,o={})=>{t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);for(let r of t)if(r)for(let s of n)r[e](s,i,{capture:!1,...o});return[t,n,i,o]},A=Je("addEventListener"),z=Je("removeEventListener"),Q=e=>{var t;let{clientX:n,clientY:i,target:o}=((t=e.touches)==null?void 0:t[0])??e;return{x:n,y:i,target:o}},Y=(e,t=document)=>{let n=Array.isArray(e)?e:[e],i=[];for(let o=0,r=n.length;o<r;o++){let s=n[o];typeof s=="string"?i=i.concat(Array.from(t.querySelectorAll(s))):s instanceof Element&&i.push(s)}return i},Rt=(e,t)=>{for(let n of t){if(typeof n=="number")return e.button===n;if(typeof n=="object"){let i=n.button===e.button,o=n.modifiers.every(r=>{switch(r){case"alt":return e.altKey;case"ctrl":return e.ctrlKey||e.metaKey;case"shift":return e.shiftKey}});return i&&o}}return!1},{abs:P,max:He,min:Oe,ceil:Ie}=Math,$e=(e=[])=>({stored:e,selected:[],touched:[],changed:{added:[],removed:[]}}),Ge=class extends me{constructor(e){var t,n,i,o,r;super(),this._selection=$e(),this._targetBoundaryScrolled=!0,this._selectables=[],this._areaLocation={y1:0,x2:0,y2:0,x1:0},this._areaRect=Ae(),this._singleClick=!0,this._scrollAvailable=!0,this._scrollingActive=!1,this._scrollSpeed={x:0,y:0},this._scrollDelta={x:0,y:0},this._lastMousePosition={x:0,y:0},this.disable=this._toggleStartEvents.bind(this,!1),this.enable=this._toggleStartEvents,this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...e,behaviour:{overlap:"invert",intersect:"touch",triggers:[0],...e.behaviour,startThreshold:(t=e.behaviour)!=null&&t.startThreshold?typeof e.behaviour.startThreshold=="number"?e.behaviour.startThreshold:{x:10,y:10,...e.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...(n=e.behaviour)==null?void 0:n.scrolling,startScrollMargins:{x:0,y:0,...(o=(i=e.behaviour)==null?void 0:i.scrolling)==null?void 0:o.startScrollMargins}}},features:{range:!0,touch:!0,deselectOnBlur:!1,...e.features,singleTap:{allow:!0,intersect:"native",...(r=e.features)==null?void 0:r.singleTap}}};for(let d of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))typeof this[d]=="function"&&(this[d]=this[d].bind(this));let{document:s,selectionAreaClass:l,selectionContainerClass:a}=this._options;this._area=s.createElement("div"),this._clippingElement=s.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(l),a&&this._clippingElement.classList.add(a),T(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),T(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),this._frame=Pt(d=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",d),this._redrawSelectionArea()}),this.enable()}_toggleStartEvents(e=!0){let{document:t,features:n}=this._options,i=e?A:z;i(t,"mousedown",this._onTapStart),n.touch&&i(t,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(e,t=!1){let{x:n,y:i,target:o}=Q(e),{document:r,startAreas:s,boundaries:l,features:a,behaviour:d}=this._options,c=o.getBoundingClientRect();if(e instanceof MouseEvent&&!Rt(e,d.triggers))return;let u=Y(s,r),p=Y(l,r);this._targetElement=p.find(m=>De(m.getBoundingClientRect(),c));let f=e.composedPath(),h=u.find(m=>f.includes(m));if(this._targetBoundary=p.find(m=>f.includes(m)),!this._targetElement||!h||!this._targetBoundary||!t&&this._emitEvent("beforestart",e)===!1)return;this._areaLocation={x1:n,y1:i,x2:0,y2:0};let g=r.scrollingElement??r.body;this._scrollDelta={x:g.scrollLeft,y:g.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),A(r,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),A(r,["mouseup","touchcancel","touchend"],this._onTapStop),A(r,"scroll",this._onScroll),a.deselectOnBlur&&(this._targetBoundaryScrolled=!1,A(this._targetBoundary,"scroll",this._onStartAreaScroll))}_onSingleTap(e){let{singleTap:{intersect:t},range:n}=this._options.features,i=Q(e),o;if(t==="native")o=i.target;else if(t==="touch"){this.resolveSelectables();let{x:s,y:l}=i;o=this._selectables.find(a=>{let{right:d,left:c,top:u,bottom:p}=a.getBoundingClientRect();return s<d&&s>c&&l<p&&l>u})}if(!o)return;for(this.resolveSelectables();!this._selectables.includes(o);)if(o.parentElement)o=o.parentElement;else{this._targetBoundaryScrolled||this.clearSelection();return}let{stored:r}=this._selection;if(this._emitEvent("start",e),e.shiftKey&&n&&this._latestElement){let s=this._latestElement,[l,a]=s.compareDocumentPosition(o)&4?[o,s]:[s,o],d=[...this._selectables.filter(c=>c.compareDocumentPosition(l)&4&&c.compareDocumentPosition(a)&2),l,a];this.select(d),this._latestElement=s}else r.includes(o)&&(r.length===1||e.ctrlKey||r.every(s=>this._selection.stored.includes(s)))?this.deselect(o):(this.select(o),this._latestElement=o)}_delayedTapMove(e){let{container:t,document:n,behaviour:{startThreshold:i}}=this._options,{x1:o,y1:r}=this._areaLocation,{x:s,y:l}=Q(e);if(typeof i=="number"&&P(s+l-(o+r))>=i||typeof i=="object"&&P(s-o)>=i.x||P(l-r)>=i.y){if(z(n,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),this._emitEvent("beforedrag",e)===!1){z(n,["mouseup","touchcancel","touchend"],this._onTapStop);return}A(n,["mousemove","touchmove"],this._onTapMove,{passive:!1}),T(this._area,"display","block"),Y(t,n)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&(A(this._targetElement,"wheel",this._wheelScroll,{passive:!1}),A(this._options.document,"keydown",this._keyboardScroll,{passive:!1}),this._selectables=this._selectables.filter(a=>this._targetElement.contains(a))),this._setupSelectionArea(),this._emitEvent("start",e),this._onTapMove(e)}this._handleMoveEvent(e)}_setupSelectionArea(){let{_clippingElement:e,_targetElement:t,_area:n}=this,i=this._targetRect=t.getBoundingClientRect();this._scrollAvailable?(T(e,{top:i.top,left:i.left,width:i.width,height:i.height}),T(n,{marginTop:-i.top,marginLeft:-i.left})):(T(e,{top:0,left:0,width:"100%",height:"100%"}),T(n,{marginTop:0,marginLeft:0}))}_onTapMove(e){let{_scrollSpeed:t,_areaLocation:n,_options:i,_frame:o}=this,{speedDivider:r}=i.behaviour.scrolling,s=this._targetElement,{x:l,y:a}=Q(e);if(n.x2=l,n.y2=a,this._lastMousePosition.x=l,this._lastMousePosition.y=a,this._scrollAvailable&&!this._scrollingActive&&(t.y||t.x)){this._scrollingActive=!0;let d=()=>{if(!t.x&&!t.y){this._scrollingActive=!1;return}let{scrollTop:c,scrollLeft:u}=s;t.y&&(s.scrollTop+=Ie(t.y/r),n.y1-=s.scrollTop-c),t.x&&(s.scrollLeft+=Ie(t.x/r),n.x1-=s.scrollLeft-u),o.next(e),requestAnimationFrame(d)};requestAnimationFrame(d)}else o.next(e);this._handleMoveEvent(e)}_handleMoveEvent(e){let{features:t}=this._options;(t.touch&&Bt()||this._scrollAvailable&&Yt())&&e.preventDefault()}_onScroll(){let{_scrollDelta:e,_options:{document:t}}=this,{scrollTop:n,scrollLeft:i}=t.scrollingElement??t.body;this._areaLocation.x1+=e.x-i,this._areaLocation.y1+=e.y-n,e.x=i,e.y=n,this._setupSelectionArea(),this._frame.next(null)}_onStartAreaScroll(){this._targetBoundaryScrolled=!0,z(this._targetElement,"scroll",this._onStartAreaScroll)}_wheelScroll(e){let{manualSpeed:t}=this._options.behaviour.scrolling,n=e.deltaY?e.deltaY>0?1:-1:0,i=e.deltaX?e.deltaX>0?1:-1:0;this._scrollSpeed.y+=n*t,this._scrollSpeed.x+=i*t,this._onTapMove(e),e.preventDefault()}_keyboardScroll(e){let{manualSpeed:t}=this._options.behaviour.scrolling,n=e.key==="ArrowLeft"?-1:e.key==="ArrowRight"?1:0,i=e.key==="ArrowUp"?-1:e.key==="ArrowDown"?1:0;this._scrollSpeed.x+=Math.sign(n)*t,this._scrollSpeed.y+=Math.sign(i)*t,e.preventDefault(),this._onTapMove({clientX:this._lastMousePosition.x,clientY:this._lastMousePosition.y,preventDefault:()=>{}})}_recalculateSelectionAreaRect(){let{_scrollSpeed:e,_areaLocation:t,_targetElement:n,_options:i}=this,{scrollTop:o,scrollHeight:r,clientHeight:s,scrollLeft:l,scrollWidth:a,clientWidth:d}=n,c=this._targetRect,{x1:u,y1:p}=t,{x2:f,y2:h}=t,{behaviour:{scrolling:{startScrollMargins:g}}}=i;f<c.left+g.x?(e.x=l?-P(c.left-f+g.x):0,f=f<c.left?c.left:f):f>c.right-g.x?(e.x=a-l-d?P(c.left+c.width-f-g.x):0,f=f>c.right?c.right:f):e.x=0,h<c.top+g.y?(e.y=o?-P(c.top-h+g.y):0,h=h<c.top?c.top:h):h>c.bottom-g.y?(e.y=r-o-s?P(c.top+c.height-h-g.y):0,h=h>c.bottom?c.bottom:h):e.y=0;let m=Oe(u,f),v=Oe(p,h),b=He(u,f),y=He(p,h);this._areaRect=Ae(m,v,b-m,y-v)}_redrawSelectionArea(){let{x:e,y:t,width:n,height:i}=this._areaRect,{style:o}=this._area;o.left=`${e}px`,o.top=`${t}px`,o.width=`${n}px`,o.height=`${i}px`}_onTapStop(e,t){var n;let{document:i,features:o}=this._options,{_singleClick:r}=this;z(this._targetElement,"scroll",this._onStartAreaScroll),z(i,["mousemove","touchmove"],this._delayedTapMove),z(i,["touchmove","mousemove"],this._onTapMove),z(i,["mouseup","touchcancel","touchend"],this._onTapStop),z(i,"scroll",this._onScroll),this._keepSelection(),e&&r&&o.singleTap.allow?this._onSingleTap(e):!r&&!t&&(this._updateElementSelection(),this._emitEvent("stop",e)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,z(this._targetElement,"wheel",this._wheelScroll,{passive:!0}),z(this._options.document,"keydown",this._keyboardScroll,{passive:!0}),this._clippingElement.remove(),(n=this._frame)==null||n.cancel(),T(this._area,"display","none")}_updateElementSelection(){let{_selectables:e,_options:t,_selection:n,_areaRect:i}=this,{stored:o,selected:r,touched:s}=n,{intersect:l,overlap:a}=t.behaviour,d=a==="invert",c=[],u=[],p=[];for(let h=0;h<e.length;h++){let g=e[h];if(De(i,g.getBoundingClientRect(),l)){if(r.includes(g))o.includes(g)&&!s.includes(g)&&s.push(g);else if(d&&o.includes(g)){p.push(g);continue}else u.push(g);c.push(g)}}d&&u.push(...o.filter(h=>!r.includes(h)));let f=a==="keep";for(let h=0;h<r.length;h++){let g=r[h];!c.includes(g)&&!(f&&o.includes(g))&&p.push(g)}n.selected=c,n.changed={added:u,removed:p},this._latestElement=void 0}_emitEvent(e,t){return this.emit(e,{event:t,store:this._selection,selection:this})}_keepSelection(){let{_options:e,_selection:t}=this,{selected:n,changed:i,touched:o,stored:r}=t,s=n.filter(l=>!r.includes(l));switch(e.behaviour.overlap){case"drop":{t.stored=[...s,...r.filter(l=>!o.includes(l))];break}case"invert":{t.stored=[...s,...r.filter(l=>!i.removed.includes(l))];break}case"keep":{t.stored=[...r,...n.filter(l=>!r.includes(l))];break}}}trigger(e,t=!0){this._onTapStart(e,t)}resolveSelectables(){this._selectables=Y(this._options.selectables,this._options.document)}clearSelection(e=!0,t=!1){let{selected:n,stored:i,changed:o}=this._selection;o.added=[],o.removed.push(...n,...e?i:[]),t||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection=$e(e?[]:i)}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}cancel(e=!1){this._onTapStop(null,!e)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(e,t=!1){let{changed:n,selected:i,stored:o}=this._selection,r=Y(e,this._options.document).filter(s=>!i.includes(s)&&!o.includes(s));return o.push(...r),i.push(...r),n.added.push(...r),n.removed=[],this._latestElement=void 0,t||(this._emitEvent("move",null),this._emitEvent("stop",null)),r}deselect(e,t=!1){let{selected:n,stored:i,changed:o}=this._selection,r=Y(e,this._options.document).filter(s=>n.includes(s)||i.includes(s));this._selection.stored=i.filter(s=>!r.includes(s)),this._selection.selected=n.filter(s=>!r.includes(s)),this._selection.changed.added=[],this._selection.changed.removed.push(...r.filter(s=>!o.removed.includes(s))),this._latestElement=void 0,t||(this._emitEvent("move",null),this._emitEvent("stop",null))}};Ge.version="3.7.1";var Ft=Ge;function Vt(e){let t=e.mouseSelectionButton===2?[2]:[0],n=new Ft({selectables:[".map-container me-tpc"],boundaries:[e.container],container:e.selectionContainer,behaviour:{triggers:t,scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:10,y:10}}}}).on("beforestart",({event:i})=>{if(i.target.tagName==="ME-TPC"||i.target.id==="input-box"||i.target.className==="circle")return!1;let o=n.getSelectionArea();return o.style.background="#4f90f22d",o.style.border="1px solid #4f90f2",o.parentElement&&(o.parentElement.style.zIndex="9999"),!0}).on("start",({event:i})=>{!i.ctrlKey&&!i.metaKey&&(e.clearSelection(),n.clearSelection(!0,!0))}).on("move",({store:{changed:{added:i,removed:o}}})=>{L.moved=!0;for(let r of i)r.classList.add("selected");for(let r of o)r.classList.remove("selected")}).on("stop",({store:{stored:i}})=>{e.selectNodes(i)});e.selection=n}var Wt=function(e,t=!0){this.theme=e;let n=this.theme.cssVar,i=Object.keys(n);this.mindElixirBox.style.cssText="";for(let o=0;o<i.length;o++){let r=i[o];this.mindElixirBox.style.setProperty(r,n[r])}e.cssVar["--gap"]||this.mindElixirBox.style.setProperty("--gap","30px"),t&&this.refresh()},W=e=>{var t;let n=(t=e.parent)==null?void 0:t.children,i=n?.indexOf(e)??0;return{siblings:n,index:i}};function qt(e){let{siblings:t,index:n}=W(e);if(t===void 0)return;let i=t[n];n===0?(t[n]=t[t.length-1],t[t.length-1]=i):(t[n]=t[n-1],t[n-1]=i)}function Kt(e){let{siblings:t,index:n}=W(e);if(t===void 0)return;let i=t[n];n===t.length-1?(t[n]=t[0],t[0]=i):(t[n]=t[n+1],t[n+1]=i)}function ye(e){let{siblings:t,index:n}=W(e);return t===void 0?0:(t.splice(n,1),t.length)}function Ut(e,t,n){let{siblings:i,index:o}=W(n);i!==void 0&&(t==="before"?i.splice(o,0,e):i.splice(o+1,0,e))}function Zt(e,t){let{siblings:n,index:i}=W(e);n!==void 0&&(n[i]=t,t.children=[e])}function Xe(e,t,n){if(ye(t),e==="in")n.children?n.children.push(t):n.children=[t];else{t.direction!==void 0&&(t.direction=n.direction);let{siblings:i,index:o}=W(n);if(i===void 0)return;e==="before"?i.splice(o,0,t):i.splice(o+1,0,t)}}var Jt=function(e,t){var n,i;if(e===j)return j;if(e===D)return D;if(e===se){let o=((n=document.querySelector(".lhs"))==null?void 0:n.childElementCount)||0,r=((i=document.querySelector(".rhs"))==null?void 0:i.childElementCount)||0;return o<=r?(t.direction=j,j):(t.direction=D,D)}},Qe=function(e,t,n){var i,o;let r=n.children[0].children[0],s=t.parentElement;if(s.tagName==="ME-PARENT"){if(Z(r),s.children[1])s.nextSibling.appendChild(n);else{let l=e.createChildren([n]);s.appendChild(be(!0)),s.insertAdjacentElement("afterend",l)}e.linkDiv(n.offsetParent)}else s.tagName==="ME-ROOT"&&(Jt(e.direction,r.nodeObj)===j?(i=e.container.querySelector(".lhs"))==null||i.appendChild(n):(o=e.container.querySelector(".rhs"))==null||o.appendChild(n),e.linkDiv())},et=function(e,t){let n=e.parentNode;if(t===0){let i=n.parentNode.parentNode;i.tagName!=="ME-MAIN"&&i.previousSibling.children[1].remove()}n.parentNode.remove()},tt={before:"beforebegin",after:"afterend"},Z=function(e){let t=e.parentElement.parentElement.lastElementChild;t?.tagName==="svg"&&t?.remove()},Gt=function(e,t){let n=e.nodeObj,i=ge(n);i.style&&t.style&&(t.style=Object.assign(i.style,t.style));let o=Object.assign(n,t);ve(e,o),this.linkDiv(),this.bus.fire("operation",{name:"reshapeNode",obj:o,origin:i})},xe=function(e,t,n){if(!t)return null;let i=t.nodeObj;i.expanded===!1&&(e.expandNode(t,!0),t=N(i.id));let o=n||e.generateNewObj();i.children?i.children.push(o):i.children=[o],H(e.nodeData);let{grp:r,top:s}=e.createWrapper(o);return Qe(e,t,r),{newTop:s,newNodeObj:o}},Xt=function(e,t,n){var i,o,r,s;let l=t||this.currentNode;if(!l)return;let a=l.nodeObj;if(a.parent){if(!((i=a.parent)!=null&&i.parent)&&((r=(o=a.parent)==null?void 0:o.children)==null?void 0:r.length)===1){this.addChild(N(a.parent.id),n);return}}else{this.addChild();return}let d=n||this.generateNewObj();if(!((s=a.parent)!=null&&s.parent)){let f=l.closest("me-main").className===C.LHS?j:D;d.direction=f}Ut(d,e,a),H(this.nodeData);let c=l.parentElement,{grp:u,top:p}=this.createWrapper(d);c.parentElement.insertAdjacentElement(tt[e],u),this.linkDiv(u.offsetParent),n||this.editTopic(p.firstChild),this.selectNode(p.firstChild,!0),this.bus.fire("operation",{name:"insertSibling",type:e,obj:d})},Qt=function(e,t){let n=e||this.currentNode;if(!n)return;Z(n);let i=n.nodeObj;if(!i.parent)return;let o=t||this.generateNewObj();Zt(i,o),H(this.nodeData);let r=n.parentElement.parentElement,{grp:s,top:l}=this.createWrapper(o,!0);l.appendChild(be(!0)),r.insertAdjacentElement("afterend",s);let a=this.createChildren([r]);l.insertAdjacentElement("afterend",a),this.linkDiv(),t||this.editTopic(l.firstChild),this.selectNode(l.firstChild,!0),this.bus.fire("operation",{name:"insertParent",obj:o})},en=function(e,t){let n=e||this.currentNode;if(!n)return;let i=xe(this,n,t);if(!i)return;let{newTop:o,newNodeObj:r}=i;this.bus.fire("operation",{name:"addChild",obj:r}),t||this.editTopic(o.firstChild),this.selectNode(o.firstChild,!0)},tn=function(e,t){let n=ge(e.nodeObj);fe(n);let i=xe(this,t,n);if(!i)return;let{newNodeObj:o}=i;this.selectNode(N(o.id)),this.bus.fire("operation",{name:"copyNode",obj:o})},nn=function(e,t){e=le(e);let n=[];for(let i=0;i<e.length;i++){let o=e[i],r=ge(o.nodeObj);fe(r);let s=xe(this,t,r);if(!s)return;let{newNodeObj:l}=s;n.push(l)}this.selectNodes(n.map(i=>N(i.id))),this.bus.fire("operation",{name:"copyNodes",objs:n})},on=function(e){let t=e||this.currentNode;if(!t)return;let n=t.nodeObj;qt(n);let i=t.parentNode.parentNode;i.parentNode.insertBefore(i,i.previousSibling),this.linkDiv(),this.bus.fire("operation",{name:"moveUpNode",obj:n})},rn=function(e){let t=e||this.currentNode;if(!t)return;let n=t.nodeObj;Kt(n);let i=t.parentNode.parentNode;i.nextSibling?i.nextSibling.insertAdjacentElement("afterend",i):i.parentNode.prepend(i),this.linkDiv(),this.bus.fire("operation",{name:"moveDownNode",obj:n})},sn=function(e){var t;let n=e||this.currentNode;if(!n)return;let i=n.nodeObj;if(!i.parent)throw new Error("Can not remove root node");let o=i.parent.children,r=o.findIndex(l=>l===i),s=ye(i);if(et(n,s),o.length!==0){let l=o[r]||o[r-1];this.selectNode(N(l.id))}else this.selectNode(N(i.parent.id));this.linkDiv(),this.bus.fire("operation",{name:"removeNode",obj:i,originIndex:r,originParentId:(t=i?.parent)==null?void 0:t.id})},ln=function(e){e=le(e);for(let t of e){let n=t.nodeObj;if(!n.parent)continue;let i=ye(n);et(t,i)}this.linkDiv(),this.bus.fire("operation",{name:"removeNodes",objs:e.map(t=>t.nodeObj)})},an=function(e,t){e=le(e);let n=t.nodeObj;n.expanded===!1&&(this.expandNode(t,!0),t=N(n.id));for(let i of e){let o=i.nodeObj;Xe("in",o,n),H(this.nodeData);let r=i.parentElement;Qe(this,t,r.parentElement)}this.linkDiv(),this.bus.fire("operation",{name:"moveNodeIn",objs:e.map(i=>i.nodeObj),toObj:n})},nt=(e,t,n,i)=>{e=le(e),t==="after"&&(e=e.reverse());let o=n.nodeObj;for(let r of e){let s=r.nodeObj;Xe(t,s,o),H(i.nodeData),Z(r);let l=r.parentElement.parentNode;n.parentElement.parentNode.insertAdjacentElement(tt[t],l)}i.linkDiv(),i.bus.fire("operation",{name:t==="before"?"moveNodeBefore":"moveNodeAfter",objs:e.map(r=>r.nodeObj),toObj:o})},cn=function(e,t){nt(e,"before",t,this)},dn=function(e,t){nt(e,"after",t,this)},hn=function(e){let t=e||this.currentNode;t&&(t.nodeObj.dangerouslySetInnerHTML||this.editTopic(t))},pn=function(e,t){e.text.textContent=t,e.nodeObj.topic=t,this.linkDiv()},it=Object.freeze(Object.defineProperty({__proto__:null,addChild:en,beginEdit:hn,copyNode:tn,copyNodes:nn,insertParent:Qt,insertSibling:Xt,moveDownNode:rn,moveNodeAfter:dn,moveNodeBefore:cn,moveNodeIn:an,moveUpNode:on,removeNode:sn,removeNodes:ln,reshapeNode:Gt,rmSubline:Z,setNodeTopic:pn},Symbol.toStringTag,{value:"Module"}));function ot(e){return{nodeData:e.isFocusMode?e.nodeDataBackup:e.nodeData,arrows:e.arrows,summaries:e.summaries,direction:e.direction,theme:e.theme}}var un=function(e,t,n){if(e){if(this.clearSelection(),typeof e=="string"){let i=N(e);return i?this.selectNode(i):void 0}e.className="selected",e.scrollIntoView({block:"nearest",inline:"nearest"}),this.currentNode=e,t?this.bus.fire("selectNewNode",e.nodeObj):this.bus.fire("selectNode",e.nodeObj,n)}},mn=function(){this.currentNode&&(this.currentNode.className=""),this.currentNode=null,this.bus.fire("unselectNode")},fn=function(e){this.clearSelection();for(let t of e)t.className="selected";this.currentNodes=e,this.bus.fire("selectNodes",e.map(t=>t.nodeObj))},gn=function(){if(this.currentNodes)for(let e of this.currentNodes)e.classList.remove("selected");this.currentNodes=null,this.bus.fire("unselectNodes")},vn=function(){this.unselectNode(),this.unselectNodes(),this.unselectSummary(),this.unselectArrow()},bn=function(){let e=ot(this);return JSON.stringify(e,(t,n)=>{if(!(t==="parent"&&typeof n!="string"))return n})},yn=function(){return JSON.parse(this.getDataString())},xn=function(){let e=ot(this).nodeData,t="# "+e.topic+`

`;function n(i,o){for(let r=0;r<i.length;r++)o<=6?t+="".padStart(o,"#")+" "+i[r].topic+`

`:t+="".padStart(o-7,"	")+"- "+i[r].topic+`
`,i[r].children&&n(i[r].children||[],o+1)}return n(e.children||[],2),t},wn=function(){this.editable=!0},Mn=function(){this.editable=!1},Nn=function(e){this.scaleVal=e,this.map.style.transform="scale("+e+")",this.bus.fire("scale",e)},En=function(){this.container.scrollTo(1e4-this.container.offsetWidth/2,1e4-this.container.offsetHeight/2)},Cn=function(e){e(this)},Sn=function(e){e.nodeObj.parent&&(this.tempDirection===null&&(this.tempDirection=this.direction),this.isFocusMode||(this.nodeDataBackup=this.nodeData,this.isFocusMode=!0),this.nodeData=e.nodeObj,this.initRight(),this.toCenter())},Ln=function(){this.isFocusMode=!1,this.tempDirection!==null&&(this.nodeData=this.nodeDataBackup,this.direction=this.tempDirection,this.tempDirection=null,this.refresh(),this.toCenter())},_n=function(){this.direction=0,this.refresh()},kn=function(){this.direction=1,this.refresh()},jn=function(){this.direction=2,this.refresh()},zn=function(e){this.locale=e,this.refresh()},Tn=function(e,t){let n=e.nodeObj;typeof t=="boolean"?n.expanded=t:n.expanded!==!1?n.expanded=!1:n.expanded=!0;let i=e.parentNode,o=i.children[1];if(o.expanded=n.expanded,o.className=n.expanded?"minus":"",Z(e),n.expanded){let l=this.createChildren(n.children.map(a=>this.createWrapper(a).grp));i.parentNode.appendChild(l)}else i.parentNode.children[1].remove();this.linkDiv(e.closest("me-main > me-wrapper"));let r=e.getBoundingClientRect(),s=this.container.getBoundingClientRect();(r.bottom>s.bottom||r.top<s.top||r.right>s.right||r.left<s.left)&&e.scrollIntoView({block:"center",inline:"center"}),this.bus.fire("expandNode",n)},An=function(e){e&&(e=JSON.parse(JSON.stringify(e)),this.nodeData=e.nodeData,this.arrows=e.arrows||[],this.summaries=e.summaries||[]),H(this.nodeData),this.layout(),this.linkDiv()},Dn=Object.freeze(Object.defineProperty({__proto__:null,cancelFocus:Ln,clearSelection:vn,disableEdit:Mn,enableEdit:wn,expandNode:Tn,focusNode:Sn,getData:yn,getDataMd:xn,getDataString:bn,initLeft:_n,initRight:kn,initSide:jn,install:Cn,refresh:An,scale:Nn,selectNode:un,selectNodes:fn,setLocale:zn,toCenter:En,unselectNode:mn,unselectNodes:gn},Symbol.toStringTag,{value:"Module"})),Hn=function(e){return{dom:e,moved:!1,mousedown:!1,handleMouseMove(t){this.mousedown&&(this.moved=!0,this.cb&&this.cb(t.movementX,t.movementY))},handleMouseDown(t){t.button===0&&(this.mousedown=!0)},handleClear(t){this.mousedown=!1},cb:null,init(t,n){this.cb=n,this.handleClear=this.handleClear.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),t.addEventListener("mousemove",this.handleMouseMove),t.addEventListener("mouseleave",this.handleClear),t.addEventListener("mouseup",this.handleClear),this.dom.addEventListener("mousedown",this.handleMouseDown)},destory(t){t.removeEventListener("mousemove",this.handleMouseMove),t.removeEventListener("mouseleave",this.handleClear),t.removeEventListener("mouseup",this.handleClear),this.dom.removeEventListener("mousedown",this.handleMouseDown)},clear(){this.moved=!1,this.mousedown=!1}}},Pe={create:Hn};function re(e,t,n){let{offsetLeft:i,offsetTop:o}=O(e.nodes,t),r=t.offsetWidth,s=t.offsetHeight,l=i+r/2,a=o+s/2,d=l+n.x,c=a+n.y;return{w:r,h:s,cx:l,cy:a,ctrlX:d,ctrlY:c}}function R(e){let t,n,i=(e.cy-e.ctrlY)/(e.ctrlX-e.cx);return i>e.h/e.w||i<-e.h/e.w?e.cy-e.ctrlY<0?(t=e.cx-e.h/2/i,n=e.cy+e.h/2):(t=e.cx+e.h/2/i,n=e.cy-e.h/2):e.cx-e.ctrlX<0?(t=e.cx+e.w/2,n=e.cy-e.w*i/2):(t=e.cx-e.w/2,n=e.cy+e.w*i/2),{x:t,y:n}}var On=function(e,t,n,i){let o=document.createElementNS("http://www.w3.org/2000/svg","text");return M(o,{"text-anchor":"middle",x:t+"",y:n+"",fill:i||"#666"}),o.dataset.type="custom-link",o.innerHTML=e,o},rt=function(e,t,n,i,o){if(!t||!n)return;performance.now();let r=re(e,t,i.delta1),s=re(e,n,i.delta2),{x:l,y:a}=R(r),{ctrlX:d,ctrlY:c}=r,{ctrlX:u,ctrlY:p}=s,{x:f,y:h}=R(s),g=We(u,p,f,h),m=Mt(`M ${l} ${a} C ${d} ${c} ${u} ${p} ${f} ${h}`,`M ${g.x1} ${g.y1} L ${f} ${h} L ${g.x2} ${g.y2}`),v=l/8+d*3/8+u*3/8+f/8,b=a/8+c*3/8+p*3/8+h/8,y=On(i.label,v,b,e.theme.cssVar["--color"]);m.appendChild(y),m.arrowObj=i,m.dataset.linkid=i.id,e.linkSvgGroup.appendChild(m),o||(e.arrows.push(i),e.currentArrow=m,lt(e,i,r,s)),performance.now()},In=function(e,t){let n={id:U(),label:"Custom Link",from:e.nodeObj.id,to:t.nodeObj.id,delta1:{x:0,y:-200},delta2:{x:0,y:-200}};rt(this,e,t,n),this.bus.fire("operation",{name:"createArrow",obj:n})},$n=function(e){let t;if(e?t=e:t=this.currentArrow,!t)return;st(this);let n=t.arrowObj.id;this.arrows=this.arrows.filter(i=>i.id!==n),t.remove(),this.bus.fire("operation",{name:"removeArrow",obj:{id:n}})},Pn=function(e){this.currentArrow=e;let t=e.arrowObj,n=N(t.from),i=N(t.to),o=re(this,n,t.delta1),r=re(this,i,t.delta2);lt(this,t,o,r)},Bn=function(){this.currentArrow=null,st(this)},st=function(e){e.linkController.style.display="none",e.P2.style.display="none",e.P3.style.display="none"},lt=function(e,t,n,i){var o;e.linkController.style.display="initial",e.P2.style.display="initial",e.P3.style.display="initial",e.nodes.appendChild(e.linkController),e.nodes.appendChild(e.P2),e.nodes.appendChild(e.P3);let{x:r,y:s}=R(n),{ctrlX:l,ctrlY:a}=n,{ctrlX:d,ctrlY:c}=i,{x:u,y:p}=R(i);e.P2.style.cssText=`top:${a}px;left:${l}px;`,e.P3.style.cssText=`top:${c}px;left:${d}px;`,M(e.line1,{x1:r+"",y1:s+"",x2:l+"",y2:a+""}),M(e.line2,{x1:d+"",y1:c+"",x2:u+"",y2:p+""}),e.helper1&&(e.helper1.destory(e.map),(o=e.helper2)==null||o.destory(e.map)),e.helper1=Pe.create(e.P2),e.helper2=Pe.create(e.P3),e.helper1.init(e.map,(f,h)=>{var g;l=l+f/e.scaleVal,a=a+h/e.scaleVal;let m=R({...n,ctrlX:l,ctrlY:a});r=m.x,s=m.y;let v=r/8+l*3/8+d*3/8+u/8,b=s/8+a*3/8+c*3/8+p/8;e.P2.style.top=a+"px",e.P2.style.left=l+"px",(g=e.currentArrow)==null||g.children[0].setAttribute("d",`M ${r} ${s} C ${l} ${a} ${d} ${c} ${u} ${p}`),M(e.currentArrow.children[2],{x:v+"",y:b+""}),M(e.line1,{x1:r+"",y1:s+"",x2:l+"",y2:a+""}),t.delta1.x=l-n.cx,t.delta1.y=a-n.cy}),e.helper2.init(e.map,(f,h)=>{var g,m;d=d+f/e.scaleVal,c=c+h/e.scaleVal;let v=R({...i,ctrlX:d,ctrlY:c});u=v.x,p=v.y;let b=r/8+l*3/8+d*3/8+u/8,y=s/8+a*3/8+c*3/8+p/8,x=We(d,c,u,p);e.P3.style.top=c+"px",e.P3.style.left=d+"px",(g=e.currentArrow)==null||g.children[0].setAttribute("d",`M ${r} ${s} C ${l} ${a} ${d} ${c} ${u} ${p}`),(m=e.currentArrow)==null||m.children[1].setAttribute("d",`M ${x.x1} ${x.y1} L ${u} ${p} L ${x.x2} ${x.y2}`),M(e.currentArrow.children[2],{x:b+"",y:y+""}),M(e.line2,{x1:d+"",y1:c+"",x2:u+"",y2:p+""}),t.delta2.x=d-i.cx,t.delta2.y=c-i.cy})};function Yn(){this.linkSvgGroup.innerHTML="";for(let e=0;e<this.arrows.length;e++){let t=this.arrows[e];try{rt(this,N(t.from),N(t.to),t,!0)}catch{}}this.nodes.appendChild(this.linkSvgGroup)}function Rn(e){if(!e)return;let t=e.children[2];Ue(this,t,n=>{var i;let o=e.arrowObj,r=((i=n.textContent)==null?void 0:i.trim())||"";r===""?o.label=origin:o.label=r,n.remove(),r!==origin&&(t.innerHTML=o.label,this.linkDiv(),this.bus.fire("operation",{name:"finishEditArrowLabel",obj:o}))})}function Fn(){this.arrows=this.arrows.filter(e=>ie(e.from,this.nodeData)&&ie(e.to,this.nodeData))}var Vn=Object.freeze(Object.defineProperty({__proto__:null,createArrow:In,editArrowLabel:Rn,removeArrow:$n,renderArrow:Yn,selectArrow:Pn,tidyArrow:Fn,unselectArrow:Bn},Symbol.toStringTag,{value:"Module"})),Wn=function(e){var t,n;if(e.length===0)throw new Error("No selected node.");if(e.length===1){let c=e[0].nodeObj,u=e[0].nodeObj.parent;if(!u)throw new Error("Can not select root node.");let p=u.children.findIndex(f=>c===f);return{parent:u.id,start:p,end:p}}let i=0,o=e.map(c=>{let u=c.nodeObj,p=[];for(;u.parent;){let f=u.parent,h=f.children,g=h?.indexOf(u);u=f,p.unshift({node:u,index:g})}return p.length>i&&(i=p.length),p}),r=0;e:for(;r<i;r++){let c=(t=o[0][r])==null?void 0:t.node;for(let u=1;u<o.length;u++)if(((n=o[u][r])==null?void 0:n.node)!==c)break e}if(!r)throw new Error("Can not select root node.");let s=o.map(c=>c[r-1].index).sort(),l=s[0]||0,a=s[s.length-1]||0,d=o[0][r-1].node;if(!d.parent)throw new Error("Please select nodes in the same main topic.");return{parent:d.id,start:l,end:a}},qn=function(e){let t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",e),t},Be=function(e,t){let n=document.createElementNS("http://www.w3.org/2000/svg","path");return M(n,{d:e,stroke:t||"#666",fill:"none","stroke-linecap":"round","stroke-width":"2"}),n},Ye=function(e,t,n,i,o){let r=document.createElementNS("http://www.w3.org/2000/svg","text");return M(r,{"text-anchor":i,x:t+"",y:n+"",fill:o||"#666"}),r.innerHTML=e,r},Kn=e=>N(e).parentElement.parentElement,Un=function({parent:e,start:t}){let n=N(e),i=n.nodeObj,o;return i.parent?o=n.closest("me-main").className:o=N(i.children[t].id).closest("me-main").className,o},at=function(e,t){var n;let{id:i,text:o,parent:r,start:s,end:l}=t,a=e.nodes,d=N(r).nodeObj,c=Un(t),u=1/0,p=0,f=0,h=0;for(let E=s;E<=l;E++){let G=(n=d.children)==null?void 0:n[E];if(!G)return e.removeSummary(i),null;let I=Kn(G.id),{offsetLeft:$,offsetTop:Ee}=O(a,I),Ce=s===l?10:20;E===s&&(f=Ee+Ce),E===l&&(h=Ee+I.offsetHeight-Ce),$<u&&(u=$),I.offsetWidth+$>p&&(p=I.offsetWidth+$)}let g,m,v=f+10,b=h+10,y=(v+b)/2,x=e.theme.cssVar["--color"];c===C.LHS?(g=Be(`M ${u+10} ${v} c -5 0 -10 5 -10 10 L ${u} ${b-10} c 0 5 5 10 10 10 M ${u} ${y} h -10`,x),m=Ye(o,u-20,y+6,"end",x)):(g=Be(`M ${p-10} ${v} c 5 0 10 5 10 10 L ${p} ${b-10} c 0 5 -5 10 -10 10 M ${p} ${y} h 10`,x),m=Ye(o,p+20,y+6,"start",x));let w=qn("s-"+i);return w.appendChild(g),w.appendChild(m),w.summaryObj=t,e.summarySvg.appendChild(w),w},Zn=function(){let e=[];this.currentNode?e=[this.currentNode]:this.currentNodes&&(e=this.currentNodes);let{parent:t,start:n,end:i}=Wn(e),o={id:U(),parent:t,start:n,end:i,text:"summary"},r=at(this,o);this.summaries.push(o),this.editSummary(r),this.bus.fire("operation",{name:"createSummary",obj:o})},Jn=function(e){var t;let n=this.summaries.findIndex(i=>i.id===e);n>-1&&(this.summaries.splice(n,1),(t=document.querySelector("#s-"+e))==null||t.remove()),this.bus.fire("operation",{name:"removeSummary",obj:{id:e}})},Gn=function(e){let t=e.children[1].getBBox(),n=6,i=3,o=document.createElementNS("http://www.w3.org/2000/svg","rect");M(o,{x:t.x-n+"",y:t.y-n+"",width:t.width+n*2+"",height:t.height+n*2+"",rx:i+"",stroke:this.theme.cssVar["--selected"]||"#4dc4ff","stroke-width":"2",fill:"none"}),e.appendChild(o),this.currentSummary=e},Xn=function(){var e,t;(t=(e=this.currentSummary)==null?void 0:e.querySelector("rect"))==null||t.remove(),this.currentSummary=null},Qn=function(){this.summarySvg.innerHTML="",this.summaries.forEach(e=>{try{at(this,e)}catch{}}),this.nodes.insertAdjacentElement("beforeend",this.summarySvg)},ei=function(e){if(!e)return;let t=e.childNodes[1];Ue(this,t,n=>{var i;let o=e.summaryObj,r=((i=n.textContent)==null?void 0:i.trim())||"";r===""?o.text=origin:o.text=r,n.remove(),r!==origin&&(t.innerHTML=o.text,this.linkDiv(),this.bus.fire("operation",{name:"finishEditSummary",obj:o}))})},ti=Object.freeze(Object.defineProperty({__proto__:null,createSummary:Zn,editSummary:ei,removeSummary:Jn,renderSummary:Qn,selectSummary:Gn,unselectSummary:Xn},Symbol.toStringTag,{value:"Module"})),k="http://www.w3.org/2000/svg";function ni(e,t){let n=document.createElementNS(k,"svg");return M(n,{version:"1.1",xmlns:k,height:e,width:t}),n}function ii(e,t){return(parseInt(e)-parseInt(t))/2}function oi(e,t,n,i){let o=document.createElementNS(k,"g"),r="";return e.text?r=e.text.textContent:r=e.childNodes[0].textContent,r.split(`
`).forEach((s,l)=>{let a=document.createElementNS(k,"text");M(a,{x:n+parseInt(t.paddingLeft)+"",y:i+parseInt(t.paddingTop)+ii(t.lineHeight,t.fontSize)*(l+1)+parseFloat(t.fontSize)*(l+1)+"","text-anchor":"start","font-family":t.fontFamily,"font-size":`${t.fontSize}`,"font-weight":`${t.fontWeight}`,fill:`${t.color}`}),a.innerHTML=s,o.appendChild(a)}),o}function ri(e,t,n,i){var o;let r="";(o=e.nodeObj)!=null&&o.dangerouslySetInnerHTML?r=e.nodeObj.dangerouslySetInnerHTML:e.text?r=e.text.textContent:r=e.childNodes[0].textContent;let s=document.createElementNS(k,"foreignObject");M(s,{x:n+parseInt(t.paddingLeft)+"",y:i+parseInt(t.paddingTop)+"",width:t.width,height:t.height});let l=document.createElement("div");return M(l,{xmlns:"http://www.w3.org/1999/xhtml",style:`font-family: ${t.fontFamily}; font-size: ${t.fontSize}; font-weight: ${t.fontWeight}; color: ${t.color}; white-space: pre-wrap;`}),l.innerHTML=r,s.appendChild(l),s}function si(e,t){let n=getComputedStyle(t),{offsetLeft:i,offsetTop:o}=O(e.nodes,t),r=document.createElementNS(k,"rect");return M(r,{x:i+"",y:o+"",rx:n.borderRadius,ry:n.borderRadius,width:n.width,height:n.height,fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth}),r}function ee(e,t,n=!1){let i=getComputedStyle(t),{offsetLeft:o,offsetTop:r}=O(e.nodes,t),s=document.createElementNS(k,"rect");M(s,{x:o+"",y:r+"",rx:i.borderRadius,ry:i.borderRadius,width:i.width,height:i.height,fill:i.backgroundColor,stroke:i.borderColor,"stroke-width":i.borderWidth});let l=document.createElementNS(k,"g");l.appendChild(s);let a;return n?a=ri(t,i,o,r):a=oi(t,i,o,r),l.appendChild(a),l}function li(e,t){let n=getComputedStyle(t),{offsetLeft:i,offsetTop:o}=O(e.nodes,t),r=document.createElementNS(k,"a"),s=document.createElementNS(k,"text");return M(s,{x:i+"",y:o+parseInt(n.fontSize)+"","text-anchor":"start","font-family":n.fontFamily,"font-size":`${n.fontSize}`,"font-weight":`${n.fontWeight}`,fill:`${n.color}`}),s.innerHTML=t.textContent,r.appendChild(s),r.setAttribute("href",t.href),r}function ai(e,t){let n=getComputedStyle(t),{offsetLeft:i,offsetTop:o}=O(e.nodes,t),r=document.createElementNS(k,"image");return M(r,{x:i+"",y:o+"",width:n.width+"",height:n.height+"",href:t.src}),r}var te=100,ci='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',di=(e,t=!1)=>{var n,i,o;let r=e.nodes,s=r.offsetHeight+te*2,l=r.offsetWidth+te*2,a=ni(s+"px",l+"px"),d=document.createElementNS(k,"svg"),c=document.createElementNS(k,"rect");M(c,{x:"0",y:"0",width:`${l}`,height:`${s}`,fill:e.theme.cssVar["--bgcolor"]}),a.appendChild(c),r.querySelectorAll(".subLines").forEach(h=>{let g=h.cloneNode(!0),{offsetLeft:m,offsetTop:v}=O(r,h.parentElement);g.setAttribute("x",`${m}`),g.setAttribute("y",`${v}`),d.appendChild(g)});let u=(n=r.querySelector(".lines"))==null?void 0:n.cloneNode(!0);u&&d.appendChild(u);let p=(i=r.querySelector(".topiclinks"))==null?void 0:i.cloneNode(!0);p&&d.appendChild(p);let f=(o=r.querySelector(".summary"))==null?void 0:o.cloneNode(!0);return f&&d.appendChild(f),r.querySelectorAll("me-tpc").forEach(h=>{h.nodeObj.dangerouslySetInnerHTML?d.appendChild(ee(e,h,!t)):(d.appendChild(si(e,h)),d.appendChild(ee(e,h.text,!t)))}),r.querySelectorAll(".tags > span").forEach(h=>{d.appendChild(ee(e,h))}),r.querySelectorAll(".icons > span").forEach(h=>{d.appendChild(ee(e,h))}),r.querySelectorAll(".hyper-link").forEach(h=>{d.appendChild(li(e,h))}),r.querySelectorAll("img").forEach(h=>{d.appendChild(ai(e,h))}),M(d,{x:te+"",y:te+"",overflow:"visible"}),a.appendChild(d),a},hi=(e,t)=>(t&&e.insertAdjacentHTML("afterbegin","<style>"+t+"</style>"),ci+e.outerHTML);function pi(e){return new Promise((t,n)=>{let i=new FileReader;i.onload=o=>{t(o.target.result)},i.onerror=o=>{n(o)},i.readAsDataURL(e)})}var ui=function(e=!1,t){let n=di(this,e),i=hi(n,t);return new Blob([i],{type:"image/svg+xml"})},mi=async function(e=!1,t){let n=this.exportSvg(e,t),i=await pi(n);return new Promise((o,r)=>{let s=new Image;s.setAttribute("crossOrigin","anonymous"),s.onload=()=>{let l=document.createElement("canvas");l.width=s.width,l.height=s.height,l.getContext("2d").drawImage(s,0,0),l.toBlob(o,"image/png",1)},s.src=i,s.onerror=r})},fi=Object.freeze(Object.defineProperty({__proto__:null,exportPng:mi,exportSvg:ui},Symbol.toStringTag,{value:"Module"}));function gi(e,t){return async function(...n){let i=this.before[t];i&&!await i.apply(this,n)||e.apply(this,n)}}var Re=Object.keys(it),ct={};for(let e=0;e<Re.length;e++){let t=Re[e];ct[t]=gi(it[t],t)}var vi={getObjById:ie,generateNewObj:ht,layout:mt,linkDiv:Nt,editTopic:wt,createWrapper:vt,createParent:bt,createChildren:yt,createTopic:xt,findEle:N,changeTheme:Wt,...Dn,...ct,...Vn,...ti,...fi,init(e){if(!e||!e.nodeData)return new Error("MindElixir: `data` is required");e.direction!==void 0&&(this.direction=e.direction),this.changeTheme(e.theme||this.theme,!1),this.nodeData=e.nodeData,H(this.nodeData),this.arrows=e.arrows||[],this.summaries=e.summaries||[],this.tidyArrow(),this.toolBar&&$t(this),this.keypress&&jt(this),this.editable&&Vt(this),this.contextMenu&&this.disposable.push(Et(this,this.contextMenuOption)),this.draggable&&At(this),this.allowUndo&&Ht(this),this.toCenter(),this.layout(),this.linkDiv()},destroy(){var e;this.disposable.forEach(t=>t()),this.mindElixirBox&&(this.mindElixirBox.innerHTML=""),this.mindElixirBox=void 0,this.nodeData=void 0,this.arrows=void 0,this.summaries=void 0,this.currentArrow=void 0,this.currentNode=void 0,this.currentNodes=void 0,this.currentSummary=void 0,this.waitCopy=void 0,this.theme=void 0,this.direction=void 0,this.bus=void 0,this.container=void 0,this.map=void 0,this.lines=void 0,this.linkController=void 0,this.linkSvgGroup=void 0,this.P2=void 0,this.P3=void 0,this.line1=void 0,this.line2=void 0,this.nodes=void 0,(e=this.selection)==null||e.destroy(),this.selection=void 0}};function bi({pT:e,pL:t,pW:n,pH:i,cT:o,cL:r,cW:s,cH:l,direction:a,containerHeight:d}){let c=t+n/2,u=e+i/2,p;a===C.LHS?p=r+s:p=r;let f=o+l/2,h=(1-Math.abs(f-u)/d)*.25*(n/2);return a===C.LHS?c=c-n/10-h:c=c+n/10+h,`M ${c} ${u} Q ${c} ${f} ${p} ${f}`}function yi({pT:e,pL:t,pW:n,pH:i,cT:o,cL:r,cW:s,cH:l,direction:a,isFirst:d}){let c=parseInt(this.mindElixirBox.style.getPropertyValue("--gap")),u=0,p=0;d?u=e+i/2:u=e+i;let f=o+l,h=0,g=0,m=0,v=Math.abs(u-f)/300*c;return a===C.LHS?(m=t,h=m+c,g=m-c,p=r+c,`M ${h} ${u} C ${m} ${u} ${m+v} ${f} ${g} ${f} H ${p}`):(m=t+n,h=m-c,g=m+c,p=r+s-c,`M ${h} ${u} C ${m} ${u} ${m-v} ${f} ${g} ${f} H ${p}`)}var xi="4.3.6",q=document;function S({el:e,direction:t,locale:n,draggable:i,editable:o,contextMenu:r,contextMenuOption:s,toolBar:l,keypress:a,mouseSelectionButton:d,selectionContainer:c,before:u,newTopicName:p,allowUndo:f,generateMainBranch:h,generateSubBranch:g,overflowHidden:m,theme:v}){let b=null,y=Object.prototype.toString.call(e);if(y==="[object HTMLDivElement]"?b=e:y==="[object String]"&&(b=document.querySelector(e)),!b)throw new Error("MindElixir: el is not a valid element");b.className+=" mind-elixir",b.innerHTML="",this.mindElixirBox=b,this.disposable=[],this.before=u||{},this.locale=n||"en",this.contextMenuOption=s,this.contextMenu=r===void 0?!0:r,this.toolBar=l===void 0?!0:l,this.keypress=a===void 0?!0:a,this.mouseSelectionButton=d||0,this.direction=typeof t=="number"?t:1,this.draggable=i===void 0?!0:i,this.newTopicName=p||"new node",this.editable=o===void 0?!0:o,this.allowUndo=f===void 0?!1:f,this.currentNode=null,this.currentArrow=null,this.scaleVal=1,this.tempDirection=null,this.generateMainBranch=h||bi,this.generateSubBranch=g||yi,this.overflowHidden=m||!1,this.bus=ut.create(),this.container=q.createElement("div"),this.selectionContainer=c||this.container,this.container.className="map-container";let x=window.matchMedia("(prefers-color-scheme: dark)");this.theme=v||(x.matches?Ve:Fe);let w=q.createElement("div");w.className="map-canvas",this.map=w,this.map.setAttribute("tabindex","0"),this.container.appendChild(this.map),this.mindElixirBox.appendChild(this.container),this.nodes=q.createElement("me-nodes"),this.nodes.className="main-node-container",this.lines=K("lines"),this.summarySvg=K("summary"),this.linkController=K("linkcontroller"),this.P2=q.createElement("div"),this.P3=q.createElement("div"),this.P2.className=this.P3.className="circle",this.P2.style.display=this.P3.style.display="none",this.line1=Se(),this.line2=Se(),this.linkController.appendChild(this.line1),this.linkController.appendChild(this.line2),this.linkSvgGroup=K("topiclinks"),this.map.appendChild(this.nodes),this.overflowHidden?this.container.style.overflow="hidden":pt(this)}S.prototype=vi;S.LEFT=j;S.RIGHT=D;S.SIDE=se;S.THEME=Fe;S.DARK_THEME=Ve;S.version=xi;S.E=N;S.new=e=>({nodeData:{id:U(),topic:e||"new topic",children:[]}});S.dragMoveHelper=L;var we=window.acquireVsCodeApi&&window.acquireVsCodeApi(),Me=(e,t)=>{if(e.expanded=t,e.children)for(let n=0;n<e.children.length;n++)Me(e.children[n],t)},ae=window.injectedData,J=null,wi={el:"#map",newTopicName:"\u5B50\u8282\u70B9",direction:S.RIGHT,locale:"en",draggable:!1,editable:!1,contextMenu:!0,contextMenuOption:{focus:!0,link:!0,extend:[{name:"Node edit",onclick:()=>{alert("extend menu")}}]},toolBar:!0,nodeMenu:!0,keypress:!0,allowUndo:!1,theme:S.DARK_THEME};J=new S(wi);console.log(JSON.stringify(ae));J.init(ae);J.bus.addListener("selectNode",(e,t)=>{console.log(e),we.postMessage({})});var Ne=document.querySelector(".mind-elixir-toolbar.rb"),ce=document.createElement("span");ce.title="Expand All";ce.innerHTML='<svg t="1739342378874" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1617" width="200" height="200"><path d="M768 342.016H341.984v426.016H255.968V342.016q0-36 24.992-60.992t60.992-24.992h426.016v86.016z m-169.984-256H170.016q-34.016 0-59.008 24.992t-24.992 59.008v428h84V170.016h428V86.016zM938.016 512v342.016q0 34.016-24.992 59.008t-59.008 24.992H512q-36 0-60.992-24.992t-24.992-59.008V512q0-36 24.992-60.992T512 426.016h342.016q34.016 0 59.008 24.992T938.016 512z m-84 128h-128v-128H640v128h-128v86.016h128v128h86.016v-128h128V640z" p-id="1618"></path></svg>';var de=document.createElement("span");de.title="Collapse All";de.innerHTML='<svg t="1739342411256" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2596" width="200" height="200"><path d="M597.333333 170.666667H170.666667v426.666666H85.333333V170.666667a85.333333 85.333333 0 0 1 85.333334-85.333334h426.666666v85.333334m170.666667 85.333333H341.333333a85.333333 85.333333 0 0 0-85.333333 85.333333v426.666667h85.333333V341.333333h426.666667V256m170.666667 256v341.333333a85.333333 85.333333 0 0 1-85.333334 85.333334h-341.333333a85.333333 85.333333 0 0 1-85.333333-85.333334v-341.333333a85.333333 85.333333 0 0 1 85.333333-85.333333h341.333333a85.333333 85.333333 0 0 1 85.333334 85.333333m-85.333334 128h-341.333333v85.333333h341.333333v-85.333333z" p-id="2597"></path></svg>';ce?.addEventListener("click",()=>{Me(ae.nodeData,!0),J.refresh()});de?.addEventListener("click",()=>{Me(ae.nodeData,!1),J.refresh()});Ne?.appendChild(ce);Ne?.appendChild(de);if(we){let e=document.createElement("span");e.title="Download",e.innerHTML='<svg t="1739342547294" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3585" width="200" height="200"><path d="M731.428571 341.333333h73.142858a73.142857 73.142857 0 0 1 73.142857 73.142857v414.476191a73.142857 73.142857 0 0 1-73.142857 73.142857H219.428571a73.142857 73.142857 0 0 1-73.142857-73.142857V414.47619a73.142857 73.142857 0 0 1 73.142857-73.142857h73.142858v73.142857H219.428571v414.476191h585.142858V414.47619h-73.142858v-73.142857z m-176.90819-242.590476l0.048762 397.092572 84.577524-84.601905 51.687619 51.712-172.373334 172.397714-172.397714-172.373333 51.712-51.736381 83.626667 83.626666V98.742857h73.142857z" p-id="3586"></path></svg>',e.addEventListener("click",()=>{we.postMessage({command:"download"})}),Ne?.appendChild(e)}
/*! Bundled license information:

mind-elixir/dist/MindElixir.js:
  (*! @viselect/vanilla v3.7.1 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla *)
*/

            </script>
        </body>
        </html>